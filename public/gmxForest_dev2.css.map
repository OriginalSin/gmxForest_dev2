{
  "version": 3,
  "file": "gmxForest_dev2.css",
  "sources": [
    "..\\src\\App.html",
    "..\\src\\Sites.html",
    "..\\src\\Report.html",
    "..\\src\\Popup.html",
    "..\\src\\CreateSite.html",
    "..\\src\\Snapping.html",
    "..\\src\\Table.html",
    "..\\src\\SelectInput.html"
  ],
  "sourcesContent": [
    "<script>\r\n\timport * as Requests from './Requests.js';\r\n\r\n\t//const stateStorage = Requests.getState();\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowGrid: 1,\r\n\t\t\t\tgmxMap: null,\r\n\t\t\t\tquadrantIds: [],\r\n\t\t\t\tlayerIds: [],\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\ttab: 'sites'\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tSites: './Sites.html',\r\n\t\t\tReport: './Report.html'\r\n\t\t},\r\n\t\r\n\t\tmethods: {\r\n\t\t\tviewItem(id, layerItems, hashCols) {\r\n\t\t\t\tconst { map } = this.get();\r\n\r\n\t\t\t\tfor (let i = 0, len = layerItems.length; i < len; i++) {\r\n\t\t\t\t\tlet it = layerItems[i];\r\n\t\t\t\t\tif (id === it[hashCols.gmx_id]) {\r\n\t\t\t\t\t\tlet geo = it[hashCols.geomixergeojson],\r\n\t\t\t\t\t\t\tbbox = L.gmxUtil.getGeometryBounds(geo),\r\n\t\t\t\t\t\t\tlatlngBbox = L.latLngBounds([[bbox.min.y, bbox.min.x], [bbox.max.y, bbox.max.x]]);\r\n\t\t\t\t\t\tmap.fitBounds(latlngBbox);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tclearLayer(ev) {\r\n\t\t\t\tconst { layerID, layerIds, quadrantIds} = this.get();\r\n\t\t\t\tlet ph = {},\r\n\t\t\t\t\tdelID = ev.layer.options.layerID;\r\n\t\t\t\tif (delID === layerID) {\r\n\t\t\t\t\tph.layerID = '';\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0, len = layerIds.length; i < len; i++) {\r\n\t\t\t\t\tif (layerIds[i].id === delID) {\r\n\t\t\t\t\t\tlayerIds.splice(i, 1);\r\n\t\t\t\t\t\tph.layerIds = layerIds;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0, len = quadrantIds.length; i < len; i++) {\r\n\t\t\t\t\tif (quadrantIds[i].id === delID) {\r\n\t\t\t\t\t\tquadrantIds.splice(i, 1);\r\n\t\t\t\t\t\tph.quadrantIds = quadrantIds;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n // console.log('clearLayer', ph, quadrantIds);\r\n\t\t\t\tthis.set(ph);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonstate({ changed, current, previous }) {\r\n\t\t\tif (changed.gmxMap) {\r\n\t\t\t\tif (!this._eventOn && current.gmxMap._events) {\r\n\t\t\t\t\tthis._eventOn = true;\r\n\t\t\t\t\tcurrent.gmxMap.on('layerremove', this.clearLayer.bind(this));\r\n\t\t\t\t}\r\n// console.log('App onstate', changed, current);\r\n\r\n// addPopupHook(key, callback:function(properties, div, node, hooksCount))\r\n\t\t\t\t// Requests.getLayersIds(current.meta, current.gmxMap).then(json => { this.set(json); });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n//\tReport\r\n</script>\r\n\r\n<div class=\"forest-plugin-container\">\r\n\t<ul class=\"nav nav-tabs\">\r\n\t\t<li class=\"nav-item\">\r\n\t\t\t<a class=\"nav-link show {tab === 'sites' ? 'active' : '-'}\" href=\"#tab1\" on:click=\"set({tab: 'sites', layerID: ''})\">Делянки</a>\r\n\t\t</li>\r\n\t\t<li class=\"nav-item\">\r\n\t\t\t<a class=\"nav-link {tab === 'reports' ? 'active' : '-'}\" href=\"#tab2\" data-toggle=\"tab\" on:click=\"set({tab: 'reports', layerID: ''})\">Отчеты</a>\r\n\t\t</li>\r\n\t</ul>\r\n\r\n{#if tab === 'reports'}\r\n\t<Report bind:gmxMap bind:map bind:layerID bind:layerIds bind:quadrantIds bind:showGrid />\r\n{:else}\r\n\t<Sites bind:gmxMap bind:map bind:layerID bind:layerIds bind:quadrantIds />\r\n{/if}\r\n</div>\r\n\r\n<style>\r\n.forest-plugin-container {\r\n    background: #FFFFFF;\r\n    border-right: 1px solid lightgray;\r\n}\r\n.forest-plugin-container a {\r\n\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n\tfont-size: 16px;\r\n\tfont-weight: 500;\r\n}\r\n\r\n.nav {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -webkit-flex;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tpadding-left: 0;\r\n\tmargin-bottom: 0;\r\n\tlist-style: none\r\n}\r\n\r\n.nav-link {\r\n\tdisplay: block;\r\n\tpadding: .5em 1em\r\n}\r\n\r\n.nav-link:focus,\r\n.nav-link:hover {\r\n\ttext-decoration: none\r\n}\r\n\r\n.nav-link.disabled {\r\n\tcolor: #636c72;\r\n\tcursor: not-allowed\r\n}\r\n\r\n.nav-tabs {\r\n\tborder-bottom: 1px solid #ddd\r\n}\r\n\r\n.nav-tabs .nav-item {\r\n\t/*margin-bottom: -1px;*/\r\n\twidth: 50%;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    background: #F3F7FA;\r\n    border-left: 1px solid lightgray;\r\n}\r\n\r\n.nav-tabs .nav-link {\r\n\t/*border: 1px solid transparent;*/\r\n\t/*border-top-right-radius: .25rem;*/\r\n\t/*border-top-left-radius: .25rem*/\r\n}\r\n\r\n.nav-tabs .nav-link:focus,\r\n.nav-tabs .nav-link:hover {\r\n\t/*border-color: #eceeef #eceeef #ddd*/\r\n}\r\n\r\n.nav-tabs .nav-link.disabled {\r\n\tcolor: #636c72;\r\n\tbackground-color: transparent;\r\n\tborder-color: transparent\r\n}\r\n\r\n.nav-tabs .nav-item.show .nav-link,\r\n.nav-tabs .nav-link.active {\r\n\tcolor: #02A97A;\r\n\tbackground-color: rgba(2, 169, 122, 0.1);\r\n\tborder-bottom: 4px solid #02A97A;\r\n}\r\n\r\n.nav-tabs .dropdown-menu {\r\n\tmargin-top: -1px;\r\n\tborder-top-right-radius: 0;\r\n\tborder-top-left-radius: 0\r\n}\r\n\r\na.nav-link {\r\n    color: #394B59;\r\n\ttext-decoration: none;\r\n}\r\n\r\n\r\nul.nav.nav-tabs li:first-child.nav-item a.nav-link:before {\r\n    content: url(./img/del_ic.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\nul.nav.nav-tabs li:first-child.nav-item a.nav-link.active:before {\r\n    content: url(./img/del_ic_act.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\nul.nav.nav-tabs li:last-child.nav-item a.nav-link:before {\r\n    content: url(./img/otch_ic.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\nul.nav.nav-tabs li:last-child.nav-item a.nav-link.active:before {\r\n    content: url(./img/otch_ic_act.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\n</style>\r\n",
    "<script>\r\n\timport * as Config from './Config.js';\r\n\timport * as EditorLib from './EditorLib.js';\r\n\timport * as Requests from './Requests.js';\r\n\timport CreateSite from './CreateSite.html';\r\n\timport Snapping from './Snapping.html';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tprnt: this,\r\n\t\t\t\terror: '',\r\n\t\t\t\taskMode: false,\r\n\t\t\t\tlayerItems: null,\r\n\t\t\t\thashCols: {},\r\n\t\t\t\tchecked: {},\r\n\t\t\t\tquadrantLayerId: '',\r\n\t\t\t\tquadrantIds: [],\r\n\t\t\t\tquadrantValues: null,\r\n\t\t\t\titem: null,\r\n\t\t\t\tdelAsk: 0,\r\n\t\t\t\tdelID: 0,\r\n\t\t\t\tdelAskStyle: '',\r\n\t\t\t\tthisComp: null,\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\tlayerIds: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\t// Snapping: './Snapping.html',\r\n\t\t\tTable: './Table.html'\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tsnap: ({ item, hashCols }) => {\r\n\t\t\t\tlet out = {};\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tlet snap = item[hashCols.snap];\r\n\t\t\t\t\tif (snap) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tout = JSON.parse(snap);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\treturn out;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn out;\r\n\t\t\t},\r\n\t\t},\r\n\t\r\n\t\tmethods: {\r\n\t\t\tcolsToHash(arr) {\r\n\t\t\t\treturn arr.reduce((a, v, i) => { a[v] = i; return a; }, {});\r\n\t\t\t},\r\n\t\t\tsetNodeField(node, setFlag) {\r\n\t\t\t\tconst {map, gmxMap} = this.get();\r\n\t\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value,\r\n\t\t\t\t\tname = node.name;\r\n\r\n// console.log('setNodeField', node, setFlag, val, gmxMap);\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.regetFeatures(val);\r\n/*\r\n\t\t\t\t\tlet layer = gmxMap.layersByID[val],\r\n\t\t\t\t\t\tmeta = layer.getGmxProperties().MetaProperties;\r\n\r\n\t\t\t\t\tRequests.loadFeatures(val)\r\n\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\t\t\t\tlet res = json.Result,\r\n\t\t\t\t\t\t\t\tcols = res.fields,\r\n\t\t\t\t\t\t\t\thashCols = this.colsToHash(cols),\r\n\t\t\t\t\t\t\t\tout = {prnt: this, cols: cols, hashCols: hashCols, layerItems: res.values, layerID: val || '', quadrantLayerId: '', quadrantValues: null},\r\n\t\t\t\t\t\t\t\tlatlngBounds = L.latLngBounds();\r\n\r\n\t\t\t\t\t\t\tres.values.map( it => {\r\n\t\t\t\t\t\t\t\tlet bb = L.gmxUtil.getGeometryBounds(it[it.length - 1]);\r\n\t\t\t\t\t\t\t\tlatlngBounds.extend([\r\n\t\t\t\t\t\t\t\t\t[bb.min.y, bb.min.x],\r\n\t\t\t\t\t\t\t\t\t[bb.max.y, bb.max.x]\r\n\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (res.values.length) {\r\n\t\t\t\t\t\t\t\tmap.fitBounds(latlngBounds);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!layer._map) {\r\n\t\t\t\t\t\t\t\tmap.addLayer(layer);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Requests.chkLayer(val);\r\n\r\n\t\t\t\t\t\t\tif (meta.kvartal) {\r\n\t\t\t\t\t\t\t\tlet quadrantLayerId = meta.kvartal.Value;\r\n\t\t\t\t\t\t\t\tRequests.loadQuadrantValues(quadrantLayerId)\r\n\t\t\t\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\t\t\t\tout.quadrantLayerId = quadrantLayerId;\r\n\t\t\t\t\t\t\t\t\tout.quadrantValues = json;\r\n\t\t\t\t\t\t\t\t\tthis.set(out);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.set(out);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set({layerID: ''});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tregetFeatures(lid) {\r\n\t\t\t\tlet { layerID, map, gmxMap } = this.get();\r\n\t\t\t\tif (lid) { layerID = lid; }\r\n\t\t\t\tlet layer = gmxMap.layersByID[layerID],\r\n\t\t\t\t\tmeta = layer.getGmxProperties().MetaProperties;\r\n\t\t\t\tRequests.loadFeatures(layerID)\r\n\t\t\t\t.then(json => {\r\n\t\t\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\t\t\tlet res = json.Result,\r\n\t\t\t\t\t\t\tcols = res.fields,\r\n\t\t\t\t\t\t\tattr = {prnt: this, isForestCols: true, cols: cols, hashCols: this.colsToHash(cols), layerItems: res.values, layerID: layerID};\r\n\r\n\t\t\t\t\t\tfor (let k in Config.fieldsConf) {\r\n\t\t\t\t\t\t\tif (!(k in attr.hashCols)) {\r\n\r\n\t\t\t\t\t\t\t\tattr.isForestCols = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n// console.log('kkkkkkk', lid, attr);\r\n\t\t\t\t\t\tif (lid) {\r\n\t\t\t\t\t\t\tlet latlngBounds = L.latLngBounds();\r\n\t\t\t\t\t\t\tres.values.forEach( it => {\r\n\t\t\t\t\t\t\t\tlet bb = L.gmxUtil.getGeometryBounds(it[it.length - 1]);\r\n\t\t\t\t\t\t\t\tlatlngBounds.extend([\r\n\t\t\t\t\t\t\t\t\t[bb.min.y, bb.min.x],\r\n\t\t\t\t\t\t\t\t\t[bb.max.y, bb.max.x]\r\n\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (res.values.length) {\r\n\t\t\t\t\t\t\t\tmap.fitBounds(latlngBounds);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!layer._map) {\r\n\t\t\t\t\t\t\t\tmap.addLayer(layer);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Requests.chkLayer(val);\r\n\r\n\t\t\t\t\t\t\tif (meta.kvartal) {\r\n\t\t\t\t\t\t\t\tlet quadrantLayerId = meta.kvartal.Value;\r\n\t\t\t\t\t\t\t\tRequests.loadQuadrantValues(quadrantLayerId)\r\n\t\t\t\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\t\t\t\tattr.quadrantLayerId = quadrantLayerId;\r\n\t\t\t\t\t\t\t\t\tattr.quadrantValues = json;\r\n\t\t\t\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tsetField(key, data) {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tchangedParams[key] = data;\r\n\t\t\t\tthis.set({changedParams: changedParams});\r\n\t\t\t},\r\n\r\n\t\t\tsendExcel(ev) {\r\n\t\t\t\tRequests.sendExcel(ev.target).then(json => {\r\n\t\t\t\t\tif (json) {\r\n\t\t\t\t\t\tif (json.status === 'error') {\r\n\t\t\t\t\t\t\tsetTimeout(function() { this.set({error: ''}); }.bind(this), 5000);\r\n\t\t\t\t\t\t\tthis.set({error: json.text});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (json.layerID) {\r\n\t\t\t\t\t\t\tthis.regetLayersIds(json.layerID);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n// console.log('sendFile', json);\r\n\t\t\t\t});\r\n\t\t\t\tthis.set({askMode: false});\r\n\t\t\t},\r\n\t\t\tsendFile(ev) {\r\n\t\t\t\tRequests.sendVectorFile(ev.target, true).then(json => {\r\n\t\t\t\t\tif (json) {\r\n\t\t\t\t\t\tif (json.status === 'error') {\r\n\t\t\t\t\t\t\tsetTimeout(function() { this.set({error: ''}); }.bind(this), 5000);\r\n\t\t\t\t\t\t\tthis.set({error: json.text});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (json.layerID) {\r\n\t\t\t\t\t\t\tthis.regetLayersIds(json.layerID);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n// console.log('sendFile', json);\r\n\t\t\t\t});\r\n\t\t\t\tthis.set({askMode: false});\r\n\t\t\t},\r\n\t\t\taddHand() {\r\n// console.log('addHand');\r\n\t\t\t\tthis.set({askMode: false});\r\n\t\t\t\tthis.createSite1();\r\n\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tregetLayersIds(layerID) {\r\n// console.log('regetLayersIds', layerID);\r\n\t\t\t\tconst {gmxMap} = this.get();\r\n\r\n\t\t\t\tlet ph = Requests.getLayersIds(gmxMap);\r\n\t\t\t\tph.layerID = layerID;\r\n\t\t\t\tthis.set(ph);\r\n\t\t\t\tthis.setNodeField(this.refs.LayerSelect);\r\n/*\r\n\t\t\t\tRequests.getLayersIds(gmxMap).then(json => {\r\n\t\t\t\t\tjson.layerID = layerID;\r\n\t\t\t\t\tthis.set(json);\r\n\t\t\t\t\tthis.setNodeField(this.refs.LayerSelect);\r\n\t\t\t\t});\r\n*/\r\n\t\t\t},\r\n\r\n\t\t\tcreateSnap() {\r\n\t\t\t\tconst {map, quadrantLayerId, quadrantIds, snap, gmxMap, layerID, item, isForestCols, hashCols, quadrantValues} = this.get();\r\n\t\t\t\tlet gmxPopup = L.control.gmxPopup({maxHeight: 0, position: 'document', anchor: L.point(451, 430), closeOnMapClick: false}).openOn(map),\r\n\t\t\t\t\tsite = new Snapping({\r\n\t\t\t\t\t\ttarget: gmxPopup._contentNode,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprnt: this,\r\n\t\t\t\t\t\t\tsnap: snap,\r\n\t\t\t\t\t\t\tlayerID: layerID,\r\n\t\t\t\t\t\t\titem: item,\r\n\t\t\t\t\t\t\tmeta: gmxMap.layersByID[layerID].getGmxProperties().MetaProperties,\r\n\t\t\t\t\t\t\tisForestCols: isForestCols,\r\n\t\t\t\t\t\t\thashCols: hashCols,\r\n\t\t\t\t\t\t\tquadrantLayerId: quadrantLayerId,\r\n\t\t\t\t\t\t\tquadrantIds: quadrantIds,\r\n\t\t\t\t\t\t\tquadrantValues: quadrantValues,\r\n\t\t\t\t\t\t\tgmxPopup: gmxPopup,\r\n\t\t\t\t\t\t\tmap: map\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\tmap.on('removeControl', site.toggleContextmenu.bind(site));\r\n\t\t\t\tsite.on('update', ({ changed, current, previous }) => {\r\n\t\t\t\t\tif (changed.cancel && current.cancel) {\r\n// console.log('юююююю json', changed, current, site);\r\n\t\t\t\t\t\tmap.removeControl(gmxPopup);\r\n\t\t\t\t\t\t// this.set({});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tmap.gmxControlsManager.add(gmxPopup);\r\n\t\t\t\tthis.gmxPopup = gmxPopup;\r\n\t\t\t},\r\n\t\t\tcreateSite1() {\r\n\t\t\t\tconst {map, quadrantIds} = this.get();\r\n\t\t\t\tlet gmxPopup = L.control.gmxPopup({maxHeight: 0, position: 'document', anchor: L.point(451, 430), closeOnMapClick: false}).openOn(map),\r\n\t\t\t\t\tsite = new CreateSite({\r\n\t\t\t\t\t\ttarget: gmxPopup._contentNode,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprnt: this,\r\n\t\t\t\t\t\t\tquadrantIds: quadrantIds,\r\n\t\t\t\t\t\t\tgmxPopup: gmxPopup,\r\n\t\t\t\t\t\t\tmap: map\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n// console.log('createSite1 json', map);\r\n\t\t\t\tmap.gmxControlsManager.add(gmxPopup);\r\n\t\t\t\tthis.gmxPopup = gmxPopup;\r\n\t\t\t},\r\n\t\t\tdeleteItem(id, ev) {\r\n\t\t\t\tconst { layerID, delAsk, delID } = this.get();\r\n\t\t\t\t\r\n\t\t\t\tif (delAsk && delID === id) {\r\n\t\t\t\t\tRequests.modifyVectorObjects(layerID, [{\"action\":\"delete\",\"id\": delID}]).then((argv) => {\r\n\t\t\t\t\t\tthis.regetFeatures();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.set({delAsk: 0});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set({delAsk: 1, delID: id, delAskStyle: 'top: '+ (ev.clientY - 30) + 'px; left: 120px;'});\r\n\t\t\t\t}\r\nconsole.log('deleteItem', delID);\r\n\t\t\t},\r\n\t\t\teditItem(id, snap, del) {\r\n\t\t\t\tconst { map, layerID, hashCols } = this.get();\r\n\t\t\t\tlet gmxDrawingSnap = null;\r\n\t\t\t\tif (snap) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet json = JSON.parse(snap);\r\n\t\t\t\t\t\tlet coords = json.coordinates.map(it => it.reverse());\r\n\t\t\t\t\t\tgmxDrawingSnap = map.gmxDrawing.add(L.polyline(coords), {pointStyle:{shape: 'circle'}, lineStyle:{color: '#ff0000'}} );\r\n\t\t\t\t\t\tgmxDrawingSnap.on('editstop dragend rotateend', (it) => {\r\n\t\t\t\t\t\t\tlet geoJSON = it.object.toGeoJSON(),\r\n\t\t\t\t\t\t\t\ttr = document.getElementsByClassName('edit-obj')[0].getElementsByTagName('tr'),\r\n\t\t\t\t\t\t\t\tinp = tr[tr.length - 1].getElementsByTagName('input')[0];\r\n\t\t\t\t\t\t\tinp.value = JSON.stringify(geoJSON.geometry);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// map.setView(coords[0]);\r\n\t\t\t\t\t\t// map.fitBounds(gmxDrawingSnap.getBounds());\r\n\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tconsole.log('Без привязки', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$(\r\n\t\t\t\t\tEditorLib.editObject(layerID, id, {\r\n\t\t\t\t\t\tdel: del,\r\n\t\t\t\t\t\thashCols: hashCols,\r\n\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t{ name: 'FRSTAT', hide: true },\r\n\t\t\t\t\t\t\t{ name: 'snap', hide: true }\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t).on ('close', e => {\r\n\t\t\t\t\tvar target = e.currentTarget,\r\n\t\t\t\t\t\tgeo = JSON.stringify(target.getGeometry()),\r\n\t\t\t\t\t\tdgeo = JSON.stringify(target.getGeometryObj().toGeoJSON().geometry);\r\n\r\n\t\t\t\t\t// flag = geo === dgeo;\r\n\t\t\t\t\tmap.gmxDrawing.remove(gmxDrawingSnap);\r\n\t\t\t\t\tthis.regetFeatures();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\tsetAskMode() {\r\n\t\t\t\tif (this.gmxPopup && this.gmxPopup._map) {\r\n\t\t\t\t\tthis.gmxPopup._map.removeControl(this.gmxPopup);\r\n\t\t\t\t\tthis.gmxPopup = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.set({askMode: true});\r\n\t\t\t},\r\n\r\n\t\t\teditSite() {\r\n\t\t\t\tconst { gmxMap, layerID, stateSave } = this.get();\r\n// console.log('editSite', layerID);\r\n\t\t\t\tthis.currentLayer = gmxMap.layersByID[layerID];\r\n\t\t\t\t$(\r\n\t\t\t\t\tEditorLib.editLayer(layerID)\r\n\t\t\t\t);\r\n\t\t\t\t\r\n\t\t\t\tthis.regetFeatures();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonstate({ changed, current, previous }) {\r\n // console.log('Sites onstate', changed, current.layerIds);\r\n\t\t\tif (changed.gmxMap) {\r\n\t\t\t\tlet ph = Requests.getLayersIds(current.gmxMap);\r\n\t\t\t\tthis.set(ph);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"sites\">\r\n\t<div class=\"main_row\">\r\n\t\t<div class=\"main_right_tab_title_left\">Группа делянок</div>\r\n\t\t<div class=\"main_right_tab_title_right\"><span class=\"{layerID ? '' : 'disabled'}\" on:click=\"editSite()\">Редактировать</span>&nbsp;&nbsp;&nbsp;&nbsp;<span on:click=\"setAskMode()\">Создать</span></div>\r\n\t</div>\r\n\t<div class=\"main_row\">\r\n\t\t{#if layerIds.length}\r\n\t\t<select on:change=\"setNodeField(this, true)\" name=\"layerID\" class=\"select\" ref:LayerSelect>\r\n\t\t\t<option value=\"\"></option>\r\n\t\t\t\t{#each layerIds as it}\r\n\t\t\t\t\t<option value=\"{it.id}\" selected=\"{layerID === it.id}\" class=\"{it.bad ? 'red' : ''}\">{it.title}</option>\r\n\t\t\t\t{/each}\r\n\t\t</select>\r\n\t\t{/if}\r\n\t</div>\r\n\t<div class=\"separator\"></div>\r\n\t{#if error}\r\n\t<div class=\"error\">{error || ''}</div>\r\n\t{/if}\r\n\t{#if askMode}\r\n\t<div class=\"main_pop_cont_1\">\r\n\t\t<div class=\"closeButton\" on:click=\"set({askMode: false})\">×</div>\r\n\t\t<div class=\"main_pop_cont_1_top\">\r\n\t\t\t<label for=\"profileImage\">Из файла Excel</label> \r\n\t\t\t<input type=\"file\" id=\"profileImage\" on:change=\"sendExcel(event)\" style=\"display: none;\">\r\n\t\t</div>\r\n\t\t<div class=\"main_pop_cont_1_top\">\r\n\t\t\t<label for=\"profileVector\">Из векторного файла</label> \r\n\t\t\t<input type=\"file\" id=\"profileVector\" on:change=\"sendFile(event)\" style=\"display: none;\">\r\n\t\t</div>\r\n\t\t<div class=\"main_pop_cont_1_bottom\" on:click=\"addHand()\">Вводом углов и дистанций</div>\r\n\t</div>\r\n\t{/if}\r\n\r\n\t{#if layerID}\r\n\t<div class=\"main_row\">\r\n\t\t<div class=\"add_del\" on:click=\"createSnap()\">Добавить делянку</div>\r\n\t</div>\r\n\t{#if layerItems}\r\n\t<div class=\"main_row\">\r\n\t\t<Table prnt=\"{prnt}\" layerID=\"{layerID}\" items=\"{layerItems}\" hashCols=\"{hashCols}\" editFlag=true bind:item bind:checked />\r\n\t</div>\r\n\t{#if delAsk}\r\n\t\t<div class=\"main_pop_cont_del\" style=\"{delAskStyle}\" ref:delAsk>\r\n\t\t\t<div class=\"main_pop_cont_del_row1\">Вы уверены?</div>\r\n\t\t\t<div class=\"main_pop_cont_del_row2\">\r\n\t\t\t\t<div class=\"but_del\" on:click=\"deleteItem(delID)\">Да, удалить</div>\r\n\t\t\t\t<div class=\"but_cancel\" on:click=\"set({delAsk: 0})\">Отмена</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t{/if}\r\n\r\n\t{/if}\r\n\t{/if}\r\n\r\n</div>\r\n\r\n<style>\r\n.main_pop_cont_del {\r\n    position: absolute;\r\n\tdisplay: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 218px;\r\n    height: 85px;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 15px;\r\n}\r\n.main_pop_cont_del_row1 {\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #10161A;\r\n}\r\n.main_pop_cont_del_row2 {\r\n    height: 30px;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.but_del {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #FFF;\r\n    width: 100px;\r\n    height: 30px;\r\n    background: #ED5641;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n}\r\n.but_cancel {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #10161A;\r\n    width: 74px;\r\n    height: 30px;\r\n    background: #FFF;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n}\r\n\r\n\r\n\r\n* {\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n.main_right_tab_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n.main_right_tab_title_right span {\r\n\tcursor: pointer;\r\n\ttext-decoration: none;\r\n    color: #318CFE;\r\n    transition: all 0.23s ease;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\nselect.select {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n\r\noption {\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.sites {\r\n    padding: 15px 24px 30px 12px;\r\n}\r\n.error {\r\n    padding: 10px;\r\n}\r\n\r\n.main_row {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n}\r\n.main_row select {\r\n    width: 100%;\r\n    min-height: 30px;\r\n}\r\n\r\n:global(.gmxControlPopup.leaflet-control .content-wrapper) {\r\n\tmargin: 10px 0 0 0;\r\n}\r\n\r\n:global(.gmxControlPopup.leaflet-control) {\r\n    top: -184px;\r\n    border-radius: 3px;\r\n\tmargin: 0;\r\n}\r\n.disabled {\r\n\tdisplay: none;\r\n}\r\n.separator {\r\n    border-bottom: 1px solid #D8E1E8;\r\n    margin-top: 23px;\r\n    margin-left: -12px;\r\n    margin-right: -25px;\r\n    margin-bottom: 13px;\r\n}\r\n\r\n.main_pop_cont_1 {\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 221px;\r\n    height: 142px;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 13px 10px;\r\n    position: absolute;\r\n    right: 26px;\r\n}\r\n.main_pop_cont_1 div {\r\n\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #394B59;\r\n    height: 37px;\r\n\tcursor: pointer;\r\n}\r\nlabel {\r\n    cursor: pointer;\r\n}\r\n.main_pop_cont_1_top input {\r\n\ttop: -20px;\r\n    position: relative;\r\n}\r\n\t\r\n.main_pop_cont_1 div:hover {\r\n\tcolor: #318CFE;\r\n}\r\n\r\n.main_pop_cont_1 .closeButton {\r\n    position: absolute;\r\n    font: 16px/14px Tahoma, Verdana, sans-serif;\r\n    font-weight: bold;\r\n    color: #c3c3c3;\r\n    top: 4px;\r\n    right: 4px;\r\n    cursor: pointer;\r\n}\r\n.main_pop_cont_1 div {\r\n    color: #394B59;\r\n/*    transition: all 0.23s ease;*/\r\n}\r\n.main_pop_cont_1 div:before {\r\n    width: 22.5px;\r\n    margin-right: 7px;\r\n    position: relative;\r\n    top: 5px;\r\n}\r\n\r\n.main_pop_cont_1_bottom:before {\r\n    content: url(./img/angle_ic.svg);\r\n}\r\n.main_pop_cont_1_bottom:hover:before {\r\n    content: url(./img/angle_ic_act.svg);\r\n}\r\n.main_pop_cont_1_middle:before {\r\n    content: url(./img/vector_ic.svg);\r\n}\r\n.main_pop_cont_1_middle:hover:before {\r\n    content: url(./img/vector_ic_act.svg);\r\n}\r\n.main_pop_cont_1_top:before {\r\n    content: url(./img/excel_ic.svg);\r\n}\r\n.main_pop_cont_1_top:hover:before {\r\n\tcontent: url(./img/excel_ic_act.svg);\r\n}\r\n\r\n.add_del {\r\n\tcursor: pointer;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    color: #318CFE;\r\n    display: block;\r\n    cursor: pointer;\r\n}\r\n.add_del:before {\r\n    content: url(./img/add_ic.svg);\r\n    margin-right: 7px;\r\n    position: relative;\r\n    top: 3px;\r\n    transition: all 0.23s ease;\r\n}\r\n\r\nfieldset {\r\n    padding: 10px;\r\n    margin: 10px;\r\n}\r\n.red {\r\n\tcolor: red;\r\n}\r\n</style>\r\n",
    "<script>\r\n\timport * as Requests from './Requests.js';\r\n\r\n\tconst stateStorage = Requests.getState();\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\trecheckFlag: 0,\r\n\t\t\t\tstateSave: 1,\r\n\t\t\t\treverse: false,\r\n\t\t\t\terror: '',\r\n\t\t\t\tchangedParams: {},\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tlayerID: {value: '', title: 'Выбор слоя'},\r\n\t\t\t\t\tquadrantLayerId: {value: '', title: 'Слой квартальной сети'},\r\n\t\t\t\t\treportType: {value: 'об использовании лесов', options: ['об использовании лесов', 'о воспроизводстве лесов'], title: 'Тип отчета'},\r\n\t\t\t\t\torganizationName: {value: '', title: 'Наименование организации'},\r\n\t\t\t\t\tinn: {value: '', title: 'ИНН'},\r\n\t\t\t\t\tregion: {value: '', title: 'Субъект Российской Федерации'},\r\n\t\t\t\t\tforestry: {value: '', title: 'Лесничество'},\r\n\t\t\t\t\t//forestry: {value: '', title: 'Лесничество', fieldName: 'Лесничество'},\r\n\t\t\t\t\tsectionForestry: {value: '', title: 'Участковое лесничество'},\r\n\t\t\t\t\tquadrant: {value: '', title: 'Квартал'},\r\n\t\t\t\t\tdacha: {value: '', title: 'Дача/Урочище'},\r\n\t\t\t\t\tstratum: {value: '', title: 'Выдел'},\r\n\t\t\t\t\tfellingForm: {value: 'сплошная', title: 'Форма рубки', select: ['сплошная', 'выборочная']},\r\n\t\t\t\t\tfellingType: {value: '', title: 'Тип рубки'},\r\n\t\t\t\t\trecoveryEventType: {value: '', title: 'Тип лесовосстановительного мероприятия'},\r\n\t\t\t\t\tsiteArea: {value: '', title: 'Площадь'},\r\n\t\t\t\t\tscale: {value: 10000, title: 'Масштаб'},\r\n\t\t\t\t\tsite: {value: '', title: 'Делянка'}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tscales: [\r\n\t\t\t\t\t{value: 5000, title: '1:5000'},\r\n\t\t\t\t\t{value: 10000, title: '1:10000'},\r\n\t\t\t\t\t{value: 15000, title: '1:15000'},\r\n\t\t\t\t\t{value: 20000, title: '1:20000'},\r\n\t\t\t\t\t{value: 25000, title: '1:25000'},\r\n\t\t\t\t\t{value: 30000, title: '1:30000'},\r\n\t\t\t\t\t{value: 35000, title: '1:35000'},\r\n\t\t\t\t\t{value: 40000, title: '1:40000'},\r\n\t\t\t\t\t{value: 45000, title: '1:45000'},\r\n\t\t\t\t\t{value: 50000, title: '1:50000'},\r\n\t\t\t\t\t{value: '', title: 'Авто'}\r\n\t\t\t\t],\r\n \r\n\t\t\t\tshowGrid: 1,\r\n\t\t\t\tpdf: 0,\r\n\t\t\t\tnumPoints: 0,\r\n\t\t\t\tdrawSnap: 0,\r\n\t\t\t\tlayerItems: [],\r\n\t\t\t\tformat: 2,\r\n\t\t\t\ttempl: '',\r\n\t\t\t\tnum_points: true,\r\n\t\t\t\tlimit: 0,\r\n\t\t\t\treport: false,\r\n\t\t\t\tdrawstart: false,\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\tquadrantLayerId: '',\r\n\t\t\t\treportType: '',\r\n\t\t\t\tchecked: {},\r\n\t\t\t\tlayerIds: [], quadrantIds: [],\r\n\t\t\t\tmeta: {},\r\n\t\t\t\thashCols: {},\r\n\t\t\t\tcols: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tTable: './Table.html',\r\n\t\t\tSelectInput: './SelectInput.html'\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmetaTypeReport: ({ meta }) => meta && meta['Тип отчета'] ? meta['Тип отчета'].Value : '',\r\n\t\t\tisTypeRecovery: ({ meta }) => meta && meta['Тип отчета'] &&  meta['Тип отчета'].Value === 'о воспроизводстве лесов'\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tviewItem(id) {\r\n\t\t\t\tconst { map, layerItems, hashCols} = this.get();\r\n\r\n\t\t\t\tfor (let i = 0, len = layerItems.length; i < len; i++) {\r\n\t\t\t\t\tlet it = layerItems[i];\r\n\t\t\t\t\tif (id === it[hashCols.gmx_id]) {\r\n\t\t\t\t\t\tlet geo = it[hashCols.geomixergeojson],\r\n\t\t\t\t\t\t\tbbox = L.gmxUtil.getGeometryBounds(geo),\r\n\t\t\t\t\t\t\tlatlngBbox = L.latLngBounds([[bbox.min.y, bbox.min.x], [bbox.max.y, bbox.max.x]]);\r\n\t\t\t\t\t\tmap.fitBounds(latlngBbox);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendReport(pt) {\r\n\t\t\t\tconst {numPoints, drawSnap, showGrid, pdf, checked, layerItems, hashCols, params, format, layerID, gmxMap, changedParams, num_points, templ} = this.get();\r\n\r\n\t\t\t\tlet flag = pt.textContent === 'Создать отчеты';\r\n\r\n\t\t\t\tlet promise = Requests.sendReport(flag, numPoints, drawSnap, showGrid, pdf, checked, layerItems, hashCols, params, format, layerID, gmxMap, changedParams, num_points, templ, this);\r\n\t\t\t\tif (promise) {\r\n\t\t\t\t\tthis.set({report: true, error: ''});\r\n\t\t\t\t\tpromise.then(json => {\r\n\t\t\t\t\t\tif (json) { this.set(json); }\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => console.warn(err));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set({error: 'Не все обязательные параметры заполнены!'});\r\n\t\t\t\t\t//pt.textContent = 'Продолжить';\r\n\t\t\t\t\tthis.resetButton1(true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartDrawing(ev) {\r\n\t\t\t\tconst { map, drawstart, layerID, checked } = this.get();\r\n\t\t\t\tthis.set({drawstart: !drawstart});\r\n\t\t\t\tif(!drawstart) {\r\n\t\t\t\t\tmap.gmxDrawing.clear();\r\n\t\t\t\t\tmap.gmxDrawing.create('Polygon');\r\n\t\t\t\t\tmap.gmxDrawing.on('drawstop', (e) => {\r\n\t\t\t\t\t\tthis.set({drawstart: false});\r\n\t\t\t\t\t\tRequests.selectFeaturesWithDrawing(layerID, e.object.toGeoJSON().geometry)\r\n\t\t\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\t\t\tthis.set({checked: L.extend(json, checked)});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t\tmap._gmxEventsManager._drawstart = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tgetKeyState(key) {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\treturn changedParams[key];\r\n\t\t\t},\r\n\t\t\tsetField(key, data) {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tchangedParams[key] = data;\r\n\t\t\t\tthis.set({changedParams: changedParams});\r\n\t\t\t},\r\n\t\t\tsetNodeField(node, setFlag) {\r\n\t\t\t\tconst { map } = this.get();\r\n\t\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value,\r\n\t\t\t\t\tname = node.name;\r\n\t\t\t\tthis.setField(name, val);\r\n\t\t\t\tif (setFlag) {\r\n\t\t\t\t\tlet attr = {checked: {}, reverse: false};\r\n\t\t\t\t\tattr[name] = val;\r\n\t\t\t\t\tif (name === 'layerID') {\r\n\t\t\t\t\t\tthis.clearChangedNodes();\r\n\t\t\t\t\t\tRequests.chkLayer(val);\r\n\t\t\t\t\t\t// let layer = nsGmx.gmxMap.layersByID[val],\r\n\t\t\t\t\t\t\t// latLngBounds = L.gmxUtil.getGeometryBounds(layer._gmx.geometry).toLatLngBounds(true);\r\n\t\t\t\t\t\t// map.fitBounds(latLngBounds);\r\n\t\t\t\t\t\t// if (!layer._map) {\r\n\t\t\t\t\t\t\t// map.addLayer(layer);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcolsToHash(arr) {\r\n\t\t\t\treturn arr.reduce((a, v, i) => { a[v] = i; return a; }, {});\r\n\t\t\t},\r\n\r\n\t\t\tstyleHook(it) {\r\n\t\t\t\tconst { checked } = this.get();\r\n\t\t\t\treturn checked && checked[it.id] ? { strokeStyle: '#00ffff' } : {};\r\n\t\t\t},\r\n\t\t\tloadState() {\r\n\t\t\t\tconst {hashCols} = this.get();\r\n\t\t\t\tlet changedParams = {};\r\n\t\t\t\tfor(let key in stateStorage) {\r\n\t\t\t\t\tlet it = stateStorage[key],\r\n\t\t\t\t\t\tpk = it.field;\r\n\r\n\t\t\t\t\tif (pk && !hashCols[pk]) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchangedParams[key] = it;\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({changedParams: changedParams});\r\n\t\t\t\tthis.checkState();\r\n\t\t\t},\r\n\t\t\tclearChangedNodes() {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tfor(let key in changedParams) {\r\n\t\t\t\t\tlet node = this.refs[key];\r\n\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\t\tnode.value = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({reportType: '', changedParams:{}});\r\n\t\t\t},\r\n\t\t\tcheckState() {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tlet target = this.options.target;\r\n\t\t\t\tfor(let key in changedParams) {\r\n\t\t\t\t\tlet it = changedParams[key],\r\n\t\t\t\t\t\tnode = this.refs[key];\r\n\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\tif (typeof(it) !== 'object') {\r\n\t\t\t\t\t\t\tnode.value = it;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key === 'reportType') {\r\n\t\t\t\t\t\tthis.set({reportType: it});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadFeatures() {\r\n\t\t\t\tconst { gmxMap, layerID, stateSave } = this.get();\r\n\t\t\t\tthis.currentLayer = gmxMap.layersByID[layerID];\r\n\t\t\t\tlet meta = null;\r\n\r\n\t\t\t\tif (this.currentLayer) {\r\n\t\t\t\t\tthis.currentLayer.setStyleHook(this.styleHook.bind(this));\r\n\t\t\t\t\tmeta = this.currentLayer.getGmxProperties().MetaProperties;\r\n\t\t\t\t}\r\n\t\t\t\tRequests.loadFeatures(layerID)\r\n\t\t\t\t.then(json => {\r\n\t\t\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\t\t\tlet cols = json.Result.fields,\r\n\t\t\t\t\t\t\tattr = {cols: cols, hashCols: this.colsToHash(cols), meta: meta, layerItems: json.Result.values};\r\n\t\t\t\t\t\tif (Object.keys(stateStorage).length) {\r\n\t\t\t\t\t\t\tattr.stateSave = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (meta && meta['Тип отчета']) {\r\n\t\t\t\t\t\t\tattr.reportType = meta['Тип отчета'].Value;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.refs.scale.selectedIndex = 1;\r\n\t\t\t\t\t\tif (attr.stateSave) {\r\n\t\t\t\t\t\t\tthis.refs.loadState.classList.remove('disabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tresetButton1(flag) {\r\n\t\t\t\tif (this.refs.submitButton) {\r\n\t\t\t\t\tthis.refs.submitButton.textContent = flag ? 'Продолжить' : 'Создать отчеты';\r\n\t\t\t\t\tlet attr = {recheckFlag: 0};\r\n\t\t\t\t\tif (!flag) { attr.error = 0; }\r\n\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t//this.needRefreshButton = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// onupdate({ changed, current, previous }) {\r\n\t\t// },\r\n\r\n\t\tonstate({ changed, current, previous }) {\r\n// console.log('Report onstate', changed, current);\r\n\t\t\tif (changed.gmxMap) {\r\n\t\t\t\tlet ph = Requests.getLayersIds(current.gmxMap);\r\n\t\t\t\tRequests.getReportsCount().then(json => {\r\n\t\t\t\t\tif (json && json.registered) {\r\n\t\t\t\t\t\tlet count = json.limit - json.used;\r\n\t\t\t\t\t\tph.limit = count > 0 ? count : 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set(ph);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// this.set(Requests.getLayersIds(current.gmxMap));\r\n\t\t\t}\r\n\t\t\tif (changed.layerID && current.layerID) {\r\n\t\t\t\tthis.loadFeatures();\r\n\t\t\t}\r\n\t\t\tif (changed.checked && this.currentLayer) {\r\n\t\t\t\tthis.currentLayer.repaint();\r\n\t\t\t}\r\n\t\t\tif (changed.recheckFlag && current.recheckFlag) {\r\n\t\t\t\tthis.resetButton1();\r\nconsole.log('recheckFlag', current.recheckFlag)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// if (changed.changedParams) {\r\n// console.log('ggggg', changed)\r\n\t\t\t\t// if (this.refs.submitButton && this.refs.submitButton.textContent !== 'Создать отчеты') {\r\n\t\t\t\t\t// this.refs.submitButton.textContent === 'Создать отчеты';\r\n\t\t\t\t// }\r\n\t\t\t// }\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"forest-plugin-container\">\r\n\t<div class=\"forest-plugin-header\">Лимит отчетов: {limit}</div>\r\n\t<div class=\"gmx-select-layer-container\">\r\n\t\t<span class=\"gmx-select-layer-container__label\">Выбор слоя</span>\r\n\t\t<select on:change=\"setNodeField(this, true)\" name=\"layerID\" class=\"gmx-sidebar-select-medium\">\r\n\t\t\t<option value=\"\"></option>\r\n\t\t\t{#if layerIds}\r\n\t\t\t\t{#each layerIds as it}\r\n\t\t\t\t\t<option value=\"{it.id}\" selected=\"{layerID === it.id}\">{it.title}</option>\r\n\t\t\t\t{/each}\r\n\t\t\t{/if}\r\n\t\t</select>\r\n\t</div>\r\n{#if layerID}\r\n\t<div class=\"leftContent forest-plugin-content\">\r\n\t\t\t<div class=\"gmx-sidebar-label-medium\">Ввод информации\r\n\t\t\t\t{#if stateSave}\r\n\t\t\t\t<i on:click=\"loadState()\" ref:loadState class=\"material-icons loadState disabled\" title=\"Загрузить выбор полей предыдущего отчета\"></i>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div on:mousedown=\"set({recheckFlag: 1})\">\r\n\t\t\t\t\t<div class=\"gmx-sidebar-labeled-block\">\r\n\t\t\t\t\t\t<div class=\"gmx-sidebar-label\">{params.reportType.title}</div>\r\n\t\t\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"reportType\" ref:reportType class=\"reportType gmx-sidebar-select-large\">\r\n{#if metaTypeReport}\r\n\t\t\t\t\t\t\t\t<option value=\"{metaTypeReport}\">{metaTypeReport}</option>\r\n{:else}\r\n{#each params.reportType.options as it}\r\n\t\t\t\t\t\t\t\t<option value=\"{it}\">{it}</option>\r\n{/each}\r\n{/if}\r\n\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n{#if reportType !== 'о воспроизводстве лесов'}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<SelectInput key=\"fellingForm\" bind:recheckFlag bind:params bind:cols bind:changedParams />\r\n\t\t\t\t\t\t<SelectInput key=\"fellingType\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t</div>\r\n{/if}\r\n\t\t\t\t\t<SelectInput key=\"organizationName\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"inn\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"region\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"forestry\" meta={meta} bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"sectionForestry\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"dacha\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"quadrant\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"stratum\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"site\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n{#if reportType === 'о воспроизводстве лесов'}\r\n\t\t\t\t\t<SelectInput key=\"recoveryEventType\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n{/if}\r\n\t\t\t\t\t<SelectInput key=\"siteArea\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\r\n\t\t\t\t\t<div class=\"gmx-sidebar-labeled-block\">\r\n\t\t\t\t\t\t<div class=\"gmx-sidebar-label\">{params.scale.title || params.scale.value}</div>\r\n\t\t\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"scale\" ref:scale class=\"scale gmx-sidebar-select-large\">\r\n{#each scales as it}\r\n\t\t\t\t\t\t\t\t<option value=\"{it.value}\" selected=\"{it.value == params.scale.value}\">{it.title}</option>\r\n{/each}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"gmx-sidebar-labeled-block\">\r\n\t\t\t\t\t\t<div class=\"gmx-sidebar-label\">{params.quadrantLayerId.title || params.quadrantLayerId.value}</div>\r\n\t\t\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"quadrantLayerId\" ref:quadrantLayerId class=\"quadrantLayerId gmx-sidebar-select-large\">\r\n\t\t\t\t\t\t\t<option value=\"\"></option>\r\n{#if quadrantIds}\r\n\t{#each quadrantIds as it}\r\n\t\t\t\t\t\t\t\t\t<option value=\"{it.id}\"> {it.title}</option>\r\n\t{/each}\r\n{/if}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"labeled-block\">\r\n\t\t\t\t<span class=\"left\">\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"custom-control-input\" name=\"pdf\" on:change=\"set({pdf: this.checked ? 1 : 0})\" />\r\n\t\t\t\t\t<label class=\"custom-control-label\" for=\"pdf\"> +PDF</label>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"center\">\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"custom-control-input\" name=\"numPoints\" on:change=\"set({numPoints: this.checked ? 1 : 0})\" />\r\n\t\t\t\t\t<label class=\"custom-control-label\" for=\"numPoints\">+координаты точек</label>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"right\">\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"custom-control-input\" name=\"drawSnap\" on:change=\"set({drawSnap: this.checked ? 1 : 0})\" />\r\n\t\t\t\t\t<label class=\"custom-control-label\" for=\"drawSnap\"> +привязочный ход</label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"gmx-sidebar-label-medium\">Список объектов</div>\r\n\t\t\t<div class=\"forest-features-block\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"gmx-geometry-select-container\"><button on:click=\"startDrawing(event)\" class=\"gmx-sidebar-button\">{drawstart ? 'Полигон рисуется' :'Выделите участки полигоном'}</button></div>\r\n\t\t\t\t\t<div class=\"gmx-sidebar-label-medium\">Выделено: {Object.keys(checked).length} / {layerItems.length}</div>\r\n\t\t\t\t\t<Table items=\"{layerItems}\" hashCols=\"{hashCols}\" reverse={reverse} bind:checked />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if error}\r\n\t\t\t<div class=\"errorParent\">\r\n\t\t\t\t<div class=\"error\">{error || ''}</div>\r\n\t\t\t</div>\r\n\t\t\t{/if}\r\n\t\t\t<div class=\"gmx-button-container\">\r\n{#if report}\r\n\t\t\t\t<button class=\"gmx-sidebar-button-disabled\"><div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div></button>\r\n{:else}\r\n\t\t\t\t<button on:click=\"sendReport(this)\" class=\"gmx-sidebar-button{Object.keys(checked).length ? '' : '-disabled'}\" ref:submitButton>Создать отчеты</button>\r\n{/if}\r\n\t\t\t</div>\r\n\r\n\t</div>\r\n{/if}\r\n</div>\r\n\r\n<style>\r\n\r\n.errorParent, .error {\r\n    padding: 10px;\r\n}\r\n\r\n.labeled-block {\r\n    text-align: center;\r\n    margin-top: 15px;\r\n}\r\n.labeled-block span {\r\n\tmargin: 6px;\r\n}\r\n.loadState {\r\n    transform: rotate(90deg);\r\n    right: 14px;\r\n    position: absolute;\r\n\tcursor: pointer;\r\n}\r\n.loadState:after {\r\n\tcontent: 'storage';\r\n}\r\n.disabled {\r\n\tpointer-events: none;\r\n\tcolor:#efefef;\r\n\tcursor:default\r\n}\r\n\r\n.clearState {\r\n    right: 24px;\r\n    position: absolute;\r\n\tcursor: pointer;\r\n}\r\n.clearState:after {\r\n\tcontent: 'delete';\r\n}\r\n.material-icons {\r\n\tfont-family: 'Material Icons';\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    font-size: 16px;\r\n    letter-spacing: normal;\r\n    text-transform: none;\r\n    display: inline-block;\r\n    white-space: nowrap;\r\n    word-wrap: normal;\r\n    direction: ltr;\r\n    -webkit-font-smoothing: antialiased;\r\n}\r\n\r\n.line-block {\r\n    margin-top: 20px;\r\n    padding: 0px 12px;\r\n    font-size: 13px;\r\n    line-height: 31px;\r\n    font-family: \"Arial\";\r\n    color: #777f85;\r\n}\r\n.line-block input {\r\n\tposition: relative;\r\n    top: 2px;\r\n}\r\n\r\n.gmx-button-container {width:100%;height:40px;margin:10px 0}\r\n.gmx-button-container  button {display:block;margin:0 auto}\r\n\r\n.gmx-sidebar-select-medium ,\r\n.gmx-sidebar-select-large {\r\n\tbox-sizing:border-box;\r\n\twidth:100px;\r\n\theight:33px;\r\n\tpadding:0 8px;\r\n\tborder-radius:3px;\r\n\tbackground-color:#f7fbff;\r\n\tborder:1px solid #d7e1e7;\r\n\tfont-family:Arial;\r\n\tfont-size:13px;\r\n\tfont-weight:400;\r\n\tcolor:#5b7284;\r\n}\r\n\r\n.gmx-sidebar-select-medium {\r\n\twidth:200px;\r\n\theight:30px;\r\n\tfloat:right;\r\n\tmargin-right:10px;\r\n\tmargin-top:5px;\r\n\r\n\ttext-align:left;\r\n\tpadding-right:40px;\r\n\toverflow:hidden;\r\n\ttext-overflow:ellipsis\r\n}\r\n.gmx-sidebar-select-large {\r\n\twidth:100%;\r\n}\r\n\r\n.gmx-select-layer-container {width:100%;height:40px;background-color:#ebf1f5;border-bottom:1px solid #bbb}\r\n.gmx-select-layer-container__label {width:30%;height:22px;padding:0 10px;font-size:16px;font-weight:400;line-height:31px;color:#5b7284;font-family:Arial;color:#5b7284;font-size:15px;font-weight:600;line-height:38px;text-align:left}\r\n\r\n.forest-plugin-container {font-family:\"Roboto\";border-collapse:collapse;padding-bottom:17px}\r\n.forest-plugin-header {height:40px;line-height:40px;padding-left:10px;background-color:#ebf1f5;font-size:18px;font-weight:bold;color:#5b7284;font-family:Arial;color:#181f25;font-size:15px;font-weight:600;text-align:left;border-bottom:1px solid #bbb}\r\n.gmx-sidebar-labeled-block {margin-top:4px;padding:0 10px;width:auto;display:grid;text-align:left}\r\n.forest-features-block {padding:0 10px}\r\n.forest-plugin-content {width:100%;height:90%;background-color:#f5f8fa;overflow:hidden}\r\n\r\n.forest-plugin-container  select {\r\n\tborder:1px solid rgba(27, 68, 97, 0.3);\r\n\toutline:0px;-moz-appearance:none;\r\n\t-webkit-appearance:none;appearance:none;\r\n\tbackground:url(./sort-down.png) no-repeat right #FFF;\r\n\tbackground-position-x:98%\r\n}\r\n.forest-plugin-container  select :-moz-focusring{color:transparent;text-shadow:0 0 0 #000}\r\n.forest-plugin-container  option :not(:checked){color:#49677d}\r\n\r\n.gmx-geometry-select-container {width:100%;height:40px}\r\n.gmx-geometry-select-container  button {display:block;margin:0 auto;width:100%;margin-top:15px;font-family:Arial;color:#5b7284;font-size:14px;font-weight:500;line-height:31.249px;text-align:center;border:1px solid rgba(27, 68, 97, 0.3);background:url(./ext/polygon.png) no-repeat #d8e1e8;background-position:4%;padding-left:30px;transition:all 0.25s ease}\r\n.gmx-geometry-select-container  button :hover{box-shadow:0 2px 3px rgba(0, 0, 0, 0.2)}\r\n.gmx-sidebar-input-large {\r\n\twidth:100%;\r\n\tbackground:#FFF;\r\n\tborder:1px solid rgba(27, 68, 97, 0.3);\r\n\tfont-family:Arial;\r\n\tcolor:#5b7284;\r\n\tfont-size:13px;\r\n\tfont-weight:400;\r\n\tline-height:31.249px;\r\n\ttext-align:left\r\n}\r\n.gmx-sidebar-label ,.gmx-sidebar-label-medium ,.gmx-sidebar-label-small {font-size:13px;line-height:31px;font-family:\"Arial\";padding-left:0px;color:#777f85}\r\n.gmx-sidebar-label-medium {font-size:16px;font-family:Arial;color:#5b7284;font-size:16px;font-weight:600;line-height:31.249px;text-align:left;top:10px;position:relative;padding-bottom:10px;padding-left:10px}\r\n.gmx-sidebar-label-small {font-size:13px}\r\n\r\n.gmx-sidebar-button ,.gmx-sidebar-button-toggled ,.gmx-sidebar-button-error ,.gmx-sidebar-button-disabled {border-radius:3px;padding:0 6px;border:1px solid #d7e1e7;cursor:pointer;background-color:#5baceb;width:94%;height:47px;color:#FFF;font-family:Arial;font-size:17px;font-weight:600}\r\n.gmx-sidebar-button :focus,.gmx-sidebar-button-toggled :focus,.gmx-sidebar-button-error :focus,.gmx-sidebar-button-disabled :focus{outline:none}\r\n.gmx-sidebar-button-toggled {box-shadow:inset 0 1px 4px rgba(27, 31, 35, 0.55)}\r\n.gmx-sidebar-button-error {color:red}\r\n.gmx-sidebar-button-disabled {pointer-events:none;background-color:#efefef;cursor:default}\r\n\r\n\r\n</style>\r\n",
    "<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tgetReverse: null,\r\n\t\t\t\tstandart: '',\r\n\t\t\t\tring: [],\r\n\t\t\t\ttab: 2\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tlatlng: ({ geoJson }) => geoJson.coordinates[0][0]\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\ttoggleTab(tab) {\r\n\t\t\t\tif (tab === 1) {\r\n\t\t\t\t\tthis.nextPoint(ev.target, true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\treverse(tab) {\r\n\t\t\t\tconst {getReverse} = this.get();\r\n\t\t\t\tthis.set({ring: getReverse()});\r\n\t\t\t\t// console.log('ring', ring, geoJson);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"main_pop_cont_2\">\r\n\t<div class=\"pop_title edit\"></div>\r\n\t<div class=\"tabbable\" id=\"tabs-440015\">\r\n\t   <ul class=\"nav nav-tabs\">\r\n\t\t  <li class=\"nav-item edit\" on:click=\"set({tab: 2})\">\r\n\t\t\t <a class=\"nav-link mi {tab === 2 ? 'active' : ''}\" href=\"#tab2\" data-toggle=\"tab\" aria-expanded=\"false\">Информация</a>\r\n\t\t  </li>\r\n\t\t  <li class=\"nav-item edit\" on:click=\"set({tab: 1})\">\r\n\t\t\t <a class=\"nav-link mi {tab === 1 ? 'active' : ''}\" href=\"#tab1\" data-toggle=\"tab\" aria-expanded=\"true\">Контур делянки </a>\r\n\t\t  </li>\r\n\t   </ul>\r\n\t   <div class=\"tab-content\">\r\n\t\t  <div class=\"tab-pane active tab1 {tab === 2 ? 'disabled' : ''}\" ref:tab1 aria-expanded=\"true\">\r\n\t\t\t <div class=\"scrollbar scrolly\">\r\n\t\t\t\t<div class=\"pop_ro_title\">\r\n\t\t\t\t   <div class=\"pop_ro_title_left\">Координаты привязочной точки</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"pop_ro pop_ro_radio_input\">\r\n\t\t\t\t   <input class=\"inp_pop_mini\" placeholder=\"lat\" value=\"{latlng[1]}\" disabled />\r\n\t\t\t\t   <input class=\"inp_pop_mini\" placeholder=\"long\" value=\"{latlng[0]}\" disabled />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"pop_ro_title\">\r\n\t\t\t\t   <div class=\"pop_ro_title_left\">Контур делянки</div>\r\n\t\t\t\t\t<div class=\"gmx-geometry-select-container\"><button on:click=\"reverse()\" class=\"gmx-sidebar-button\">(Поменять порядок обхода)</button></div>\r\n\r\n\t\t\t\t</div>\r\n\t{#if ring}\r\n\t\t{#each ring as it, i}\r\n\t\t<div class=\"pop_ro ring ring{i}\">\r\n\t\t\t<div class=\"pop_ro_title_left\">{i + 0}-{i === ring.length - 1 ? 0 : i + 1}</div>\r\n\t\t\t<input name=\"ring{i}_a\" value=\"{it[0]}\" class=\"inp_pop_mini_m\" disabled />\r\n\t\t\t-\r\n\t\t\t<input name=\"ring{i}_d\" value=\"{Math.round(it[1])}\" class=\"inp_pop_mini_m\" placeholder=\"Distance\" type=\"number\" min=\"0\" step=\"1\" disabled />\r\n\t\t</div>\r\n\t\t{/each}\r\n\t{/if}\r\n\r\n\t\t\t </div>\r\n\t\t  </div>\r\n\t\t  <div class=\"tab-pane {tab === 1 ? 'disabled' : ''} tab2\" ref:tab2 aria-expanded=\"false\">\r\n\t\t\t <div class=\"scrollbar scrolly\" id=\"style-4\">\r\n\t\t\t\t{@html standart}\r\n\t\t\t </div>\r\n\t\t  </div>\r\n\t   </div>\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\r\n.main_pop_cont_2 {\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 287px;\r\n    height: 460px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: left;\r\n}\r\n.main_pop_cont_2 div {\r\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n}\r\n.main_pop_cont_2 div button {\r\n    cursor: pointer;\r\n}\r\n.scrollbar {\r\n    height: 340px;\r\n    width: 100%;\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n}\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: -5px;\r\n}\r\n.pop_ro_title_big {\r\n    font-style: normal;\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    color: #394B59;\r\n    display: block;\r\n}\r\n.pop_ro_title_radio {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-bottom: -12px;\r\n    margin-top: -5px;\r\n}\r\n.custom-control-input {\r\n    position: relative;\r\n    z-index: 1;\r\n    opacity: 1;\r\n    margin-right: 10px;\r\n    top: 2px;\r\n}\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    display: block;\r\n}\r\n.pop_ro.pop_ro_radio_input {\r\n    margin-left: 23px;\r\n}\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 5px 15px;\r\n}\r\ninput.inp_pop {\r\n    width: 100%;\r\n    text-align: left;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini {\r\n    width: 48%;\r\n    text-align: left;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini_m {\r\n    width: 60px;\r\n    text-align: left;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\n.pop_ro_right_dotted span {\r\n    cursor: pointer;\r\n}\r\n.add_thin_ic {\r\n    content: url(./img/add_thin_ic.svg);\r\n}\r\n.dotted_ic {\r\n    content: url(./img/remove_thin_ic.svg);\r\n}\r\n.pop_bottom {\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 40px;\r\n    border-top: 1px solid #D8E1E8;\r\n    align-items: center;\r\n}\r\n.pop_bottom_left {\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-right: 1px solid #D8E1E8;\r\n    cursor: pointer;\r\n}\r\n.pop_bottom_right {\r\n    color: #394B59;\r\n    width: 50%;\r\n    justify-content: center;\r\n    color: #318CFE;\r\n    cursor: pointer;\r\n}\r\n.main_pop_cont_4_Imp {\r\n\tposition: absolute;\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 218px;\r\n    height: 118px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 15px;\r\n}\r\n.info {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: right;\r\n    text-decoration-line: underline;\r\n    cursor: pointer;\r\n    color: #318CFE;\r\n}\r\n.main_pop_cont_4_Imp_text {\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    text-align: left;\r\n    line-height: 18px;\r\n    color: #10161A;\r\n    display: block;\r\n}\r\n.pop_ro_title .main_pop_cont_4_Imp {\r\n\tdisplay: none;\r\n}\r\n.pop_ro_title .info:hover .main_pop_cont_4_Imp {\r\n\tdisplay: block;\r\n}\r\n\r\n.error {\r\n\tbackground-color: lightcoral;\r\n}\r\n.disabled {\r\n    display: none;\r\n}\r\n\r\n.nav-tabs {\r\n    border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.nav {\r\n    display: -webkit-box;\r\n    display: -webkit-flex;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    padding-left: 0;\r\n    margin-bottom: 0;\r\n    list-style: none;\r\n}\r\n\r\n.nav-tabs .nav-item {\r\n    width: 50%;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    background: #F3F7FA;\r\n    border-left: 1px solid lightgray;\r\n}\r\n\r\nlink.active {\r\n    color: #02A97A;\r\n    background-color: rgba(2, 169, 122, 0.1);\r\n    border-bottom: 4px solid #02A97A;\r\n}\r\n\r\nli.nav-item.edit {\r\n\tfont-size: 14px;\r\n}\r\n\r\n.nav-link {\r\n    display: block;\r\n    padding: .5em 1em;\r\n}\r\n\r\na.nav-link.mi {\r\n    font-size: 11px;\r\n    line-height: 23px;\r\n}\r\n\r\nspan.font_normal {\r\n    font-weight: 400;\r\n    color: #333;\r\n}\r\n\r\n:global(.gmxPopup .leaflet-popup-content-wrapper .leaflet-popup-content) {\r\n    overflow: hidden;\r\n    min-width: 290px;\r\n}\r\n\r\n.leaflet-popup-content {\r\n    line-height: 1.4;\r\n    margin: -2px -5px;\r\n}\r\n\r\na.nav-link.mi {\r\n    font-size: 13px;\r\n    line-height: 26px;\r\n    text-decoration: none;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    font-weight: 600;\r\n    color: #394B59;\r\n}\r\n\r\na.nav-link.mi.active {\r\n    color: #02A97A;\r\n    background-color: rgba(2, 169, 122, 0.1);\r\n    border-bottom: 4px solid #02A97A;\r\n}\r\n\r\ndiv.active {\r\n    background-color: transparent;\r\n    padding: 20px 0px;\r\n}\r\n\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 20px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: -5px;\r\n}\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 15px 15px;\r\n    align-items: center;\r\n    margin-top: 7px;\r\n}\r\n\r\nbutton.gmx-sidebar-button {\r\n    background: transparent;\r\n    border: 0 solid lightgray;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    padding: 0 13px;\r\n    background: #02A97A;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #FFF;\r\n    width: 180px;\r\n    height: 30px;\r\n    background: #ED5641;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    position: relative;\r\n    left: 3px;\r\n}\r\n\r\ninput.inp_pop_mini_m {\r\n    width: 60px;\r\n    text-align: left;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    left: 3px;\r\n    position: relative;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\n\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    min-width: 35px;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\ndiv#style-4 {\r\n    padding: 20px 15px;\r\n}\r\n\r\n.leaflet-container a.leaflet-popup-close-button {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    padding: 11px 4px 0 5px;\r\n    border: none;\r\n    text-align: center;\r\n    width: 18px;\r\n    height: 14px;\r\n    font: 16px/14px Tahoma, Verdana, sans-serif;\r\n    color: #c3c3c3;\r\n    text-decoration: none;\r\n    font-weight: bold;\r\n    background: transparent;\r\n}\r\n</style>\r\n",
    "<div class=\"pop_title\">Создание групп делянок</div>\r\n\r\n<div class=\"site-block\">\r\n\t<div class=\"main_pop_cont_2\">\r\n\t\t<div class=\"scrollbar\" id=\"style-4\">\r\n\t\t   <div class=\"pop_ro_title\">\r\n\t\t\t  <div class=\"pop_ro_title_left\">Название группы</div>\r\n\t\t\t  <div class=\"pop_ro_title_right\">Обязательное</div>\r\n\t\t   </div>\r\n\t\t   <div class=\"pop_ro\"><input class=\"inp_pop\" on:change=\"setNodeField(this, true)\" name=\"layerID\" placeholder=\"Делянки\" ref:layerID /></div>\r\n\r\n\t\t   <div class=\"pop_ro_title\"><div class=\"pop_ro_title_left\">Квартальная сеть</div></div>\r\n\t\t   <div class=\"pop_ro\">\r\n\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"quadrantLayerId\" ref:quadrantLayerId class=\"select\">\r\n\t\t\t\t\t{#each quadrantIds as it}\r\n\t\t\t\t\t\t<option value=\"{it.id}\" selected=\"{quadrantLayerId === it.id}\" class=\"{it.bad ? 'red' : ''}\">{it.title}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\r\n\t\t\t  <span class=\"pop_upload\" alt=\"pop_upload\" on:click=\"createKvartal()\" ></span>\r\n\t\t   </div>\r\n\r\n\t\t</div>\r\n\t\t<div class=\"pop_bottom\">\r\n\t\t   <div class=\"pop_bottom_left\" on:click=\"cancel()\">Отмена</div>\r\n\t\t   <div class=\"pop_bottom_right\" on:click=\"create()\">Создать</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<script>\r\nimport * as Config from './Config.js';\r\nimport * as Requests from './Requests.js';\r\nimport * as EditorLib from './EditorLib.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tquadrantIds: [],\r\n\t\t\tquadrantLayerId: null,\r\n\t\t\treportType: 'об использовании лесов'\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t},\r\n\tmethods: {\r\n\t\tsetNodeField(node, setFlag) {\r\n // console.log('setNodeField', node);\r\n\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value,\r\n\t\t\t\tname = node.name;\r\n\t\t\t// this.setField(name, val);\r\n\t\t\tif (setFlag) {\r\n\t\t\t\tlet attr = {};\r\n\t\t\t\tattr[name] = val;\r\n\t\t\t\tif (name === 'layerID') {\r\n\t\t\t\t\tif (this.refs.layerID.value) {\r\n\t\t\t\t\t\tthis.refs.layerID.classList.remove('error');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.refs.layerID.classList.add('error');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.set(attr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcancel() {\r\n\t\t\tlet {map, gmxPopup} = this.get();\r\n\t\t\tmap.removeControl(gmxPopup);\r\n\t\t},\r\n\t\tcreateKvartal() {\r\n\t\t\tEditorLib.createLayer(true);\r\n\t\t},\r\n\t\tcreate() {\r\n\t\t\tlet {map, gmxPopup, quadrantIds, prnt} = this.get();\r\n\r\n\t\t\tif (!this.refs.layerID.value) {\r\n\t\t\t\tthis.refs.layerID.classList.add('error');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet qSel = this.refs.quadrantLayerId,\r\n\t\t\t\tqVal = qSel.options.length ? qSel.options[qSel.selectedIndex || 0].value : '',\r\n\t\t\t\tcols = Object.keys(Config.fieldsConf).map ((k) => { return { Name: k, ColumnSimpleType: Config.fieldsConf[k].ColumnSimpleType } });\r\n\t\t\tlet props = {\r\n\t\t\t\tTitle: this.refs.layerID.value || 'Делянки 1',\r\n\t\t\t\tMetaProperties: {\r\n\t\t\t\t\tkvartal: {Value: qVal, Type: 'String'}\r\n\t\t\t\t},\r\n\t\t\t\tsrs: 3857,\r\n\t\t\t\tColumns: cols,\r\n\t\t\t\tSourceType: 'manual',\r\n\t\t\t\tGeometryType: \"polygon\"\r\n\t\t\t};\r\n\t\t\tEditorLib.saveLayer(props)\r\n\t\t\t\t.then(json => {\r\n\t\t\t\t\tmap.removeControl(gmxPopup);\r\n\t\t\t\t\tsetTimeout(prnt.regetLayersIds.bind(prnt, json.name), 1500);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n.gmxControlPopup .content-wrapper {\r\n    margin: 20px 0 0 0;\r\n    padding: 1px;\r\n    text-align: left;\r\n    cursor: default;\r\n}\r\n\r\n.closeButton {\r\n    position: absolute;\r\n    font: 16px/14px Tahoma, Verdana, sans-serif;\r\n    font-weight: bold;\r\n    color: #c3c3c3;\r\n    top: 12px;\r\n    right: 12px;\r\n    cursor: pointer;\r\n}\r\n\r\nselect.reportType.gmx-sidebar-select-large {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n\r\ninput.inp_pop {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n    padding-left: 5px;\r\n}\r\n\r\nselect.select {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n\r\n\r\nspan.pop_upload {\r\n    content: url(./img/upload.svg);\r\n\tcursor: pointer;\r\n    left: 10px;\r\n    position: relative;\r\n}\r\n\r\n.pop_ro_title_right {\r\n    font-style: italic;\r\n    font-weight: normal;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: right;\r\n    color: #8A9BA8;\r\n    display: block;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    display: block;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n\r\n.main_pop_cont_2 {\r\n    cursor: default;\r\n    overflow-y: auto;\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 0px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 287px;\r\n    height: auto;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n}\r\n\r\n.pop_bottom_left {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-right: 1px solid #D8E1E8;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n.pop_bottom_right {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #318CFE;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n\r\n.pop_bottom {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 40px;\r\n    border-top: 1px solid #D8E1E8;\r\n    align-items: center;\r\n    font-family: IBM Plex Sans;\r\n    margin-top: 23px;\r\n}\r\n\r\n.gmxControlPopup {\r\n    position: absolute;\r\n    border-radius: 4px;\r\n    background: white;\r\n    box-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n}\r\n\r\n.pop_title {\r\n    pointer-events: none;\r\n    position: relative;\r\n    top: 0px;\r\n    left: 0;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    font-family: IBM Plex Sans;\r\n    min-height: 30px;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    padding-left: 17px;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 5px 15px;\r\n}\r\n.pop_ro select, .pop_ro input {\r\n    width: 100%;\r\n    min-height: 30px;\r\n}\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    /*min-height: 30px;*/\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: -5px;\r\n}\r\n</style>\r\n",
    "<script>\r\n\timport * as Config from './Config.js';\r\n\timport * as EditorLib from './EditorLib.js';\r\n\timport * as Requests from './Requests.js';\r\n\r\n\t// import * as geoMag from './geomag.js';\r\n\r\n\tconst DEFANGLE = 45,\r\n\t\tDEFLEG = 200,\r\n\t\tPATERNS = {\r\n\t\t\tangle: /(\\d*)\\.?\\d*_a/,\r\n\t\t\tdist: /(\\d+)_d/\r\n\t\t\t// ,\r\n\t\t\t// latlng: '\\d*([\\.]&#123;1&#125;\\d*)?'\r\n\t\t};\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstep: 1,\r\n\t\t\t\tcoordType: 0,\r\n\t\t\t\tcancel: null,\r\n\t\t\t\tdrawings: null,\r\n\t\t\t\tquadrantLayerId: null,\r\n\t\t\t\tquadrantIds: null,\r\n\t\t\t\tquadrantValues: null,\r\n\t\t\t\tlayerItems: null,\r\n\t\t\t\tsnap: null,\r\n\t\t\t\tkvartal: null,\r\n\t\t\t\tpaterns: {\r\n\t\t\t\t\tangle: '[СВЮЗ]*[ВЗ]*[\\d]+([\\.,][\\d]+)?',\t\t\t// С, СВ, В, ЮВ, Ю, ЮЗ, З, СЗ\r\n\t\t\t\t\tlatlng: '\\d*([\\.]&#123;1&#125;\\d*)?',\r\n\t\t\t\t\tlatlngPoint: '\\d+°\\d+\\'\\d\\d.\\d\\d\" N, \\d+°\\d+\\'\\d\\d.\\d\\d\" E'\r\n\t\t\t\t},\r\n\t\t\t\tfieldsConf: Config.fieldsConf || {},\r\n\t\t\t\tisForestCols: false,\r\n\t\t\t\treportType: 'ИЛ',\r\n\t\t\t\thashCols: {},\r\n\t\t\t\tchecked: {},\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\tlayerIds: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tisReqTypeReport: ({ meta }) => meta.report_t && (meta.report_t.Value === 'ВЛ' || meta.report_t.Value === 'о воспроизводстве лесов'),\r\n\t\t\tlatlng: ({ snap }) => snap && snap.latlng,\r\n\t\t\tlatlngPoint: ({ snap }) => snap && snap.latlng && L.gmxUtil.getCoordinatesString(L.latLng(snap.latlng[0], snap.latlng[1]), 1),\r\n\t\t\tsnapArr: ({ snap }) => snap && snap.snap || [[0, 0, 0]],\r\n\t\t\tringArr: ({ snap }) => snap && snap.ring || [[0, 0, 0]],\r\n\t\t\tlistQuadrants: ({ quadrantValues }) => quadrantValues && Object.keys(quadrantValues) || null\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t_lastProps: {},\r\n\t\t\tcoordFormatChange(ev) {\r\n\t\t\t\tconst { snap, coordType } = this.get();\r\n\t\t\t\tif (coordType) {\r\n\t\t\t\t\tlet latlng = snap.latLng;\r\n\t\t\t\t\tlet str = L.gmxUtil.latLonFormatCoordinates(latlng);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet latlng = snap.latLng;\r\n\t\t\t\t\tlet str = L.gmxUtil.formatCoordinates(latlng);\r\nconsole.log('coordFormatChange', ev)\r\n\t\t// return  gmxAPIutils.formatDegrees(Math.abs(y)) + (y > 0 ? ' N, ' : ' S, ') +\r\n\t\t\t// gmxAPIutils.formatDegrees(Math.abs(x)) + (x > 0 ? ' E' : ' W');\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({coordType: coordType ? 0 : 1})\r\n\t\t\t},\r\n\r\n\t\t\tparseCoordinate: function(text) {\r\n\t\t\t\tif (text.match(/[йцукенгшщзхъфывапролджэячсмитьбюЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮqrtyuiopadfghjklzxcvbmQRTYUIOPADFGHJKLZXCVBM_:]/)) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\ttext = text.replace(/,/g, '.');\r\n\t\t\t\tlet regex = /(-?\\d+(\\.\\d+)?)([^\\d\\-]*)/g,\r\n\t\t\t\t\tt = regex.exec(text),\r\n\t\t\t\t\tresults = [];\r\n\r\n\t\t\t\twhile (t) {\r\n\t\t\t\t\tresults.push(t[1]);\r\n\t\t\t\t\tt = regex.exec(text);\r\n\t\t\t\t}\r\n\t\t\t\tif (!results.length) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tvar ii = Math.floor(results.length),\r\n\t\t\t\t\ty = 0,\r\n\t\t\t\t\tmul = 1,\r\n\t\t\t\t\ti;\r\n\t\t\t\tfor (i = 0; i < ii; i++) {\r\n\t\t\t\t\ty += parseFloat(results[i]) * mul;\r\n\t\t\t\t\tmul /= 60;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (text.indexOf('S') !== -1 || text.indexOf('W') !== -1) {\r\n\t\t\t\t\ty = -y;\r\n\t\t\t\t}\r\n\t\t\t\treturn y;\r\n\t\t\t},\r\n\r\n\t\t\tonKeyUp(ev) {\r\n\t\t\t\tif (ev.key === 'Enter') {\r\n\t\t\t\t\tthis.nextPoint(ev.target, true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_parseAngle(str) {\t\t// С, СВ, В, ЮВ, Ю, ЮЗ, З, СЗ\r\n\t\t\t\tstr = str.trim();\r\n\t\t\t\tlet angle = 0,\r\n\t\t\t\t\tnp = '',\r\n\t\t\t\t\tp1 = (str[0] || '').toUpperCase(),\r\n\t\t\t\t\tp2 = (str[1] || '').toUpperCase(),\r\n\t\t\t\t\td = (p2 === 'З' ? 45 : (p2 === 'В' || p2 === 'B' ? -45 : 0)),\r\n\t\t\t\t\tfMinus = false,\r\n\t\t\t\t\ts = 1;\r\n\r\n\t\t\t\tif (p1 === 'C' || p1 === 'С') {\r\n\t\t\t\t\tnp = 'С';\r\n\t\t\t\t\tif (p2 === 'З') {\r\n\t\t\t\t\t\t// angle = 360;\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'СЗ';\r\n\t\t\t\t\t\tfMinus = true;\r\n\t\t\t\t\t} else if (p2 === 'В' || p2 === 'B') {\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'СВ';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (p1 === 'Ю') {\r\n\t\t\t\t\tnp = 'Ю';\r\n\t\t\t\t\tangle = 180;\r\n\t\t\t\t\tif (p2 === 'З') {\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'ЮЗ';\r\n\t\t\t\t\t} else if (p2 === 'В' || p2 === 'B') {\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'ЮВ';\r\n\t\t\t\t\t\tfMinus = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (p1 === 'З') {\r\n\t\t\t\t\tnp = 'З';\r\n\t\t\t\t\tangle = 270;\r\n\t\t\t\t} else if (p1 === 'В' || p1 === 'B') {\r\n\t\t\t\t\tnp = 'В';\r\n\t\t\t\t\tangle = 90;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts = 0;\r\n\t\t\t\t}\r\n\t\t\t\tlet rumb = Number(str.substr(s));\r\n\t\t\t\treturn {\r\n\t\t\t\t\tnp: np,\r\n\t\t\t\t\trumb: rumb,\r\n\t\t\t\t\tangle: angle + (fMinus ? -rumb : rumb)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\t_isError(val, val1, rmb) {\r\n\t\t\t\tif (rmb && rmb.np) {\r\n\t\t\t\t\tif (rmb.np.length === 1 && rmb.rumb !== 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else if (rmb.rumb < 0 || rmb.rumb >= 90) {\r\n\t\t\t\t\t// } else if (isNaN(val) || rmb.rumb < 0 || rmb.rumb >= 90) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tval = rmb.rumb;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn isNaN(val) || (val !== null && (val < 0 || val >= 360)) ? true : (val1 !== undefined && val1 <= 0 ? true : false);\r\n\t\t\t},\r\n\t\t\tfromClipboard(ev) {\r\n\t\t\t\tconst { snap, map } = this.get();\r\n\t\t\t\tlet cont = this.refs.sn0,\r\n\t\t\t\t\tinputs = cont.getElementsByTagName('input'),\r\n\t\t\t\t\ttarget = ev.target,\r\n\t\t\t\t\tclipboardData = ev.clipboardData,\r\n\t\t\t\t\tstr = clipboardData.getData('text/plain'),\r\n\t\t\t\t\tarr = str.indexOf(',') !== -1 ? L.gmxUtil.parseCoordinates(str) : this.parseCoordinate(str);\r\n\t\t\t\tif (arr) {\r\n\t\t\t\t\tif (!L.Util.isArray(arr)) {\r\n\t\t\t\t\t\tarr = target === inputs[0] ? [arr, inputs[1].value] : [inputs[0].value, arr];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclipboardData.clearData();\r\n\t\t\t\t\t\r\n\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(arr[0] || 0, arr[1] || 0));\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tinputs[0].value = snap.latlng[0];\r\n\t\t\t\t\t\tinputs[1].value = snap.latlng[1];\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t\tinputs[0].classList.remove('error');\r\n\t\t\t\t\tinputs[1].classList.remove('error');\r\n\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinputs[0].classList.add('error');\r\n\t\t\t\t\tinputs[1].classList.add('error');\r\n\t\t\t\t\tthis.refs.sn00.classList.add('error');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetPoint(ev) {\r\n\t\t\t\tlet node = ev.target,\r\n\t\t\t\t\tkey = ev.data,\r\n\t\t\t\t\t_focus = null;\r\n\r\n\t\t\t\tif (node.value === '') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst { snap, map } = this.get();\r\n\t\t\t\tlet str = node.options ? node.options[node.selectedIndex].value : node.value;\r\n\t\t\t\t\r\n\t\t\t\tlet rmb = this._parseAngle(str),\r\n\t\t\t\t\tval = rmb.angle,\r\n\t\t\t\t\tname = node.name,\r\n\t\t\t\t\tprnt = node.parentNode,\r\n\t\t\t\t\ttype = 'point',\r\n\t\t\t\t\tdata = snap.latlng,\r\n\t\t\t\t\terror = true;\r\n\r\n\t\t\t\tif (prnt.classList.contains('snap')) {\r\n\t\t\t\t\ttype = 'snap';\r\n\t\t\t\t\tdata = snap.snap || [[]];\r\n\t\t\t\t} else if (prnt.classList.contains('ring')) {\r\n\t\t\t\t\ttype = 'ring';\r\n\t\t\t\t\tdata = snap.ring || [[]];\r\n\t\t\t\t}\r\n// console.log('setPoint', type, val, node, prnt.name);\r\n\t\t\t\tif (type === 'point') {\r\n\t\t\t\t\tif (name === 'lng' || name === 'lat') {\r\n\t\t\t\t\t\tval = Number(node.value);\r\n\t\t\t\t\t\tif (val) {\r\n\t\t\t\t\t\t\tif (name === 'lng' && val >= -180 && val <= 180) {\r\n\t\t\t\t\t\t\t\terror = false;\r\n\t\t\t\t\t\t\t\t// snap.latlng = [snap.latlng ? snap.latlng[0] : 0, val];\r\n\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(snap.latlng ? snap.latlng[0] : 0, val));\r\n\t\t\t\t\t\t\t} else if (name === 'lat' && val > -90 && val < 90) {\r\n\t\t\t\t\t\t\t\terror = false;\r\n\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(val, snap.latlng ? snap.latlng[1] : 0));\r\n\t\t\t\t\t\t\t\t// snap.latlng = [val, snap.latlng ? snap.latlng[1] : 0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (val === 0) {\r\n\t\t\t\t\t\t\terror = false;\r\n\t\t\t\t\t\t\tlet cont = this.refs.sn0,\r\n\t\t\t\t\t\t\t\tinputs = cont.getElementsByTagName('input'),\r\n\t\t\t\t\t\t\t\tcenter = map.getCenter();\r\n\r\n\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(center);\r\n\t\t\t\t\t\t\t// snap.latlng = [Number(center.lat.toFixed(6)), Number(center.lng.toFixed(6))];\r\n\t\t\t\t\t\t\tinputs[0].value = snap.latlng[0];\r\n\t\t\t\t\t\t\tinputs[1].value = snap.latlng[1];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (snap.snap && !snap.snap[0].length) {\r\n\t\t\t\t\t\t\t\tsnap.snap = [[90, DEFLEG, '90']];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (snap.ring && !snap.ring[0].length) {\r\n\t\t\t\t\t\t\t\tsnap.ring = [[45, DEFLEG, '45']];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(snap.latlng[0], snap.latlng[1]);\r\n\t\t\t\t\t\t\t// this.delta = snap.latlng[0] ? 1 / Math.cos(snap.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\t\tthis.delta = 1;\r\n\t\t\t\t\t\t\tthis.reDrawing(snap, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (type === 'snap' || type === 'ring') {\r\n\t\t\t\t\tif (PATERNS.angle.test(name)) {\r\n\t\t\t\t\t\tlet arr = PATERNS.angle.exec(name);\r\n\t\t\t\t\t\tif (arr.length) {\r\n\t\t\t\t\t\t\tlet it = data[arr[1]];\r\n\t\t\t\t\t\t\t// error = !val || this._isError(val, it[1], rmb);\r\n\t\t\t\t\t\t\terror = this._isError(val, undefined, rmb);\r\n\t\t\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\t\t\tit[0] = Number(val);\r\n\t\t\t\t\t\t\t\tit[1] = it[1] || 200;\r\n\t\t\t\t\t\t\t\t_focus = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tit[2] = str;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (PATERNS.dist.test(name)) {\r\n\t\t\t\t\t\terror = this._isError(null, val);\r\n\t\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\t\tlet arr = PATERNS.dist.exec(name);\r\n\t\t\t\t\t\t\tif (arr.length) {\r\n\t\t\t\t\t\t\t\tlet it = data[arr[1]];\r\n\t\t\t\t\t\t\t\tit[1] = Number(val);\r\n\t\t\t\t\t\t\t\tit[0] = it[0] || 0;\r\n\t\t\t\t\t\t\t\t_focus = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\tif (type === 'snap') {\r\n\t\t\t\t\t\t\tsnap.snap = data;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsnap.ring = data;\r\n\t\t\t\t\t\t\t// this._focus = data.length === 1 && _focus !== null ? _focus : null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet delItem = prnt.getElementsByClassName('delItem')[0],\r\n\t\t\t\t\taddNext = prnt.getElementsByClassName('addNext')[0];\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tnode.classList.add('error');\r\n\t\t\t\t\tif (delItem) { delItem.classList.add('disabled'); }\r\n\t\t\t\t\tif (addNext) { addNext.classList.add('disabled'); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.classList.remove('error');\r\n\t\t\t\t\tif (delItem) { delItem.classList.remove('disabled'); }\r\n\t\t\t\t\tif (addNext) { addNext.classList.remove('disabled'); }\r\n\t\t\t\t\t// this.reDrawing(snap);\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t},\r\n\r\n\t\t\tsetLatlngPoint(ev) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet node = ev.target,\r\n\t\t\t\t\tres = L.Control.gmxLocation.Utils.parseCoordinates(node.value);\r\n\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tsnap.latlng = res;\r\n\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tdelPoint(node) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet prnt = node.parentNode.parentNode,\r\n\t\t\t\t\tinputs = prnt.getElementsByTagName('input'),\r\n\t\t\t\t\tcmdSpans = prnt.getElementsByClassName('pop_ro_right_dotted')[0].children;\r\n\r\n\t\t\t\tif (prnt.classList.contains('snap') && snap.snap && snap.snap.length) {\r\n\t\t\t\t// if (prnt.classList.contains('snap') && snap.snap.length > 1) {\r\n\t\t\t\t\tlet arr = PATERNS.angle.exec(inputs[0].name),\r\n\t\t\t\t\t\tnm = arr.length ? Number(arr[1]) : 0;\r\n\t\t\t\t\tsnap.snap.splice(nm, 1);\r\n\t\t\t\t\tif (!snap.snap.length) {\r\n\t\t\t\t\t\tsnap.snap = [[]];\r\n\t\t\t\t\t\tinputs[0].value = inputs[1].value = '';\r\n\t\t\t\t\t\tcmdSpans[0].classList.add('disabled');\r\n\t\t\t\t\t\tcmdSpans[1].classList.add('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t} else if (prnt.classList.contains('ring') && snap.ring && snap.ring.length) {\r\n\t\t\t\t// } else if (prnt.classList.contains('ring') && snap.ring.length > 1) {\r\n\t\t\t\t\tlet arr = PATERNS.angle.exec(inputs[0].name),\r\n\t\t\t\t\t\tnm = arr.length ? Number(arr[1]) : 0;\r\n\t\t\t\t\tsnap.ring.splice(nm, 1);\r\n\t\t\t\t\tif (!snap.ring.length) {\r\n\t\t\t\t\t\tsnap.ring = [[]];\r\n\t\t\t\t\t\tinputs[0].value = inputs[1].value = '';\r\n\t\t\t\t\t\tcmdSpans[0].classList.add('disabled');\r\n\t\t\t\t\t\tcmdSpans[1].classList.add('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t_getNum(str, reg) {\r\n\t\t\t\tlet arr = reg.exec(str);\r\n\t\t\t\treturn arr.length ? Number(arr[1]) : 0;\r\n\t\t\t},\r\n\t\t\tnextPoint(node, flag) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet prnt = flag ? node.parentNode : node.parentNode.parentNode,\r\n\t\t\t\t\tcont = this.refs.sn0,\r\n\t\t\t\t\tscrollBox = this.refs.scroll,\r\n\t\t\t\t\tinputs = prnt.getElementsByTagName('input'),\r\n\t\t\t\t\tfirstChild = inputs[0],\r\n\t\t\t\t\trmb = this._parseAngle(firstChild.value),\r\n\t\t\t\t\tleg = [90, DEFLEG];\r\n // console.log('nextPoint', snap, scrollBox.scrollHeight, scrollBox.clientHeight, scrollBox.offsetHeight);\r\n\t\t\t\tthis._focusNode = node === inputs[0] ? inputs[1].name : null;\r\n\t\t\t\tif (prnt.classList.contains('point')) {\r\n\t\t\t\t\tsnap.snap = snap.snap || [[]];\r\n\t\t\t\t\tsnap.snap.unshift(leg);\r\n\t\t\t\t\tthis.set({ snap: snap })\r\n\t\t\t\t} else if (prnt.classList.contains('snap')) {\r\n\t\t\t\t\tif (!this._isError(inputs[0].value, inputs[1].value, rmb)) {\r\n\t\t\t\t\t\tlet nm = this._getNum(inputs[0].name, PATERNS.angle);\r\n\t\t\t\t\t\tsnap.snap = snap.snap || [[Number(inputs[0].value), Number(inputs[1].value)]];\r\n\t\t\t\t\t\tif (!this._focusNode) {\r\n\t\t\t\t\t\t\tsnap.snap.splice(nm + 1, 0, leg);\r\n\t\t\t\t\t\t\tthis._focusNode = 'snap' + (nm + 1) + '_a';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (prnt.classList.contains('ring')) {\r\n\t\t\t\t\tif (!this._isError(inputs[0].value, inputs[1].value, rmb)) {\r\n\t\t\t\t\t\t// let arr = PATERNS.angle.exec(firstChild.name),\r\n\t\t\t\t\t\t\t// nm = arr.length ? Number(arr[1]) : 0;\r\n\t\t\t\t\t\tlet nm = this._getNum(inputs[0].name, PATERNS.angle);\r\n\t\t\t\t\t\tsnap.ring = snap.ring || [[Number(inputs[0].value), Number(inputs[1].value)]];\r\n\t\t\t\t\t\tthis._focus = 0;\r\n\t\t\t\t\t\tif (!this._focusNode) {\r\n\t\t\t\t\t\t\tsnap.ring.splice(nm + 1, 0, [DEFANGLE, DEFLEG]);\r\n\t\t\t\t\t\t\tthis._focusNode = 'ring' + (nm + 1) + '_a';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\taddRing(node) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tsnap.ring = snap.ring || [];\r\n\t\t\t\tsnap.ring.unshift([DEFANGLE, DEFLEG]);\r\n\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t},\r\n\t\t\tcreateKvartal() {\r\n\t\t\t\tEditorLib.createLayer(true);\r\n\t\t\t},\r\n\t\t\tsetKvartal(node) {\r\n\t\t\t\tconst { map, quadrantValues, snap } = this.get();\r\n// console.log('setKvartal', node);\r\n\t\t\t\tif (quadrantValues) {\r\n\t\t\t\t\tif (this._drawingItems) {\r\n\t\t\t\t\t\tfor (let key in this._drawingItems) {\r\n\t\t\t\t\t\t\tmap.gmxDrawing.remove(this._drawingItems[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._drawingItems = null;\r\n\t\t\t\t\tlet kv = node.value,\r\n\t\t\t\t\t\tcont = this.refs.sn0,\r\n\t\t\t\t\t\taddNext = cont.getElementsByClassName('addNext')[0];\r\n\t\t\t\t\tif (quadrantValues[kv]) {\r\n\t\t\t\t\t\tlet bbox = quadrantValues[kv].bbox,\r\n\t\t\t\t\t\t\tlatlng = bbox.getCenter().reverse(),\r\n\t\t\t\t\t\t\tlat = cont.getElementsByClassName('lat')[0],\r\n\t\t\t\t\t\t\tlng = cont.getElementsByClassName('lng')[0],\r\n\t\t\t\t\t\t\tmin = bbox.min,\r\n\t\t\t\t\t\t\tmax = bbox.max;\r\n\t\t\t\t\t\tmap.fitBounds([[min.y, min.x], [max.y, max.x]]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlat.value = latlng[0]; lat.classList.remove('error');\r\n\t\t\t\t\t\tlng.value = latlng[1]; lng.classList.remove('error');\r\n\t//\t\t\t\t\taddNext.classList.remove('disabled');\r\n\t// console.log('setKvartal', latlng);\r\n\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(latlng[0], latlng[1]));\r\n\t\t\t\t\t\t// snap.latlng = this._getLatlng(latlng);\r\n\t\t\t\t\t\t// snap.latlng = latlng;\r\n\t\t\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(snap.latlng[0], snap.latlng[1]);\r\n\t\t\t\t\t\t// this.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec;\r\n\t\t\t\t\t\t//this.delta = snap.latlng[0] ? 1 / Math.cos(snap.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\tthis.delta = 1;\r\n\t// console.log('nextPoint', snap, prnt);\r\n\t\t\t\t\t\tsnap.snap = snap.snap || [[]];\r\n\t\t\t\t\t\tif (snap.snap.length === 0) {\r\n\t\t\t\t\t\t\tsnap.snap.unshift([90, DEFLEG]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set({ snap: snap, kvartal: kv });\r\n\t\t\t\t\t\tthis.chkInputs(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// addNext.classList.add('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t_drawingItems: null,\r\n\t\t\t_clearDrawingItems() {\r\n\t\t\t\tconst { geo, map } = this.get();\r\n\t\t\t\tif (this._drawingItems) {\r\n\t\t\t\t\tfor (let key in this._drawingItems) {\r\n\t\t\t\t\t\tmap.gmxDrawing.remove(this._drawingItems[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (geo) { map.gmxDrawing.remove(geo); }\r\n\t\t\t\tthis._drawingItems = null;\r\n\t\t\t},\r\n\r\n\t\t\tcancelMe() {\r\n\t\t\t\tthis.toggleContextmenu(0);\r\n\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\tthis.set({cancel: true});\r\n// console.log('cancelMe', this);\r\n\t\t\t},\r\n\t\t\taddObjectAny(geo) {\r\n\t\t\t\tconst { layerID, kvartal, hashCols, prnt, map } = this.get();\r\n\r\n\t\t\t\tlet snap = '';\r\n\t\t\t\tif (this._drawingItems.snap) {\r\n\t\t\t\t\tlet geo = this._drawingItems.snap.toGeoJSON().geometry,\r\n\t\t\t\t\t\tcoords = geo.coordinates;\r\n\t\t\t\t\tif (coords.length > 1) {\r\n\t\t\t\t\t\tif (coords.length !== 2 || coords[0][0] !== coords[1][0] || coords[0][1] !== coords[1][1]) {\r\n\t\t\t\t\t\t\tsnap = JSON.stringify(geo);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n// console.log('Requests.fields', Requests.fields)\r\n\r\n\t\t\t\t$(\r\n\t\t\t\t\tEditorLib.editObject(layerID, null, {\r\n\t\t\t\t\t\thashCols: hashCols,\r\n\t\t\t\t\t\tdFields: JSON.parse(window.localStorage.getItem('gmxForest_Delanka')) || {},\r\n\t\t\t\t\t\t// fields: fields,\r\n\t\t\t\t\t\tsnap: snap,\r\n\t\t\t\t\t\tdrawingObject: geo\r\n\t\t\t\t\t})\r\n\t\t\t\t).on ('close', e => {\r\n\t\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\t\tmap.gmxDrawing.remove(geo);\r\n\t\t\t\t\tprnt.regetFeatures();\r\n\t\t\t\t\tL.gmx.layersVersion.chkVersion(layerID);\r\n\t\t\t\t\tlet dFields = e.target.getAll();\r\n // console.log('dFields', dFields, hashCols);\r\n\t\t\t\t\tdelete dFields.FRSTAT;\r\n\t\t\t\t\tdelete dFields.snap;\r\n\t\t\t\t\twindow.localStorage.setItem('gmxForest_Delanka', JSON.stringify(dFields));\r\n\t\t\t\t});\r\n\t\t\t\tthis.set({cancel: true});\r\n\t\t\t},\r\n\r\n\t\t\tchkInputs(flag) {\r\n\t\t\t\t// node = node || document.getElementsByClassName('main_pop_cont_2')[0];\r\n\t\t\t\tlet inputs = document.getElementsByClassName('main_pop_cont_2')[0].getElementsByTagName('input');\r\n\t\t\t\tfor (let i = 0, len = inputs.length; i < len; i++) {\r\n\t\t\t\t\tlet it = inputs[i];\r\n\t\t\t\t\tif (flag && it.name === 'ring0_a') {\r\n\t\t\t\t\t\tit.classList.add('error');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('chkInputs', it.classList.contains('error'), val, name)\r\n\t\t\t\t\tif (it.classList.contains('error')) {\r\n\t\t\t\t\t\tit.focus();\r\n\t\t\t\t\t\tit.select();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t// _namesHash: {\r\n\t\t\t\t// reportType: 'Тип отчета',\r\n\t\t\t\t// organizationName: 'Наименование организации',\r\n\t\t\t\t// inn: 'ИНН',\r\n\t\t\t\t// region: 'Субъект Российской Федерации',\r\n\t\t\t\t// forestry: 'Лесничество',\r\n\t\t\t\t// sectionForestry: 'Участковое Лесничество',\r\n\t\t\t\t// quadrant: 'Квартал',\r\n\t\t\t\t// dacha: 'Дача',\r\n\t\t\t\t// stratum: 'Выделы',\r\n\t\t\t\t// fellingForm: 'Форма рубки',\r\n\t\t\t\t// fellingType: 'Тип рубки', // *\r\n\t\t\t\t// recoveryEventType: 'Тип лесовосстановления',\r\n\t\t\t\t// siteArea: 'Площадь',\r\n\t\t\t\t// scale: 'Масштаб',\r\n\t\t\t\t// site: 'Делянка'\r\n\t\t\t// },\r\n\r\n\t\t\taddObject(node) {\r\n\t\t\t\tconst { map, prnt, snap, layerID, hashCols, kvartal, meta, item, geo } = this.get();\r\n\r\n// console.log('Requests.fields', Requests.fields)\r\n\t\t\t\tlet properties = {\r\n\t\t\t\t\tsnap: JSON.stringify(this._drawingItems.snap.toGeoJSON().geometry),\r\n\t\t\t\t\tFRSTAT: 0\r\n\t\t\t\t};\r\n\t\t\t\tlet fields = [\r\n\t\t\t\t\t\t{ name: 'FRSTAT', value: 0 },\r\n\t\t\t\t\t\t{ name: 'snap', value: JSON.stringify(this._drawingItems.snap.toGeoJSON().geometry) }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinputs = this.refs.scroll.getElementsByTagName('input');\r\n\t\t\t\t\t// ,\r\n\t\t\t\t\t// selectNodes = this.refs.scroll.getElementsByTagName('select');\r\n\r\n\t\t\t\t// inputs.concat(selectNodes);\r\n\t\t\t\tfor (let key in meta) {\r\n\t\t\t\t\tif (key in hashCols) {\r\n\t\t\t\t\t\t//fields.push({ name: key, value: meta[key].Value });\r\n\t\t\t\t\t\tproperties[key] = meta[key].Value || '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0, len = inputs.length; i < len; i++) {\r\n\t\t\t\t\tlet it = inputs[i],\r\n\t\t\t\t\t\tname = it.name,\r\n\t\t\t\t\t\tval = it.options ? it.options[it.selectedIndex || 0].value : it.value;\r\n\r\n\t\t\t\t\tif (val) {\r\n\t\t\t\t\t\tproperties[name] = val;\r\n\t\t\t\t\t\t// properties[this._namesHash[name] || name] = val;\r\n\t\t\t\t\t\t// fields.push({ name: this._namesHash[name] || name, value: val });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (hashCols['Квартал'] || hashCols.kv || hashCols.kvartal) {\r\n\t\t\t\t\tlet kvKey = hashCols['Квартал'] ? 'Квартал' : (hashCols.kv ? 'kv' : 'kvartal');\r\n\t\t\t\t\t// fields.push({ name: kvKey, value: kvartal });\r\n\t\t\t\t\tproperties[kvKey] = kvartal;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet lastProps = Object.keys(properties).reduce((p, k) => {\r\n\t\t\t\t\tif (Config.fieldsConf[k] && Config.fieldsConf[k].save && properties[k]) {\r\n\t\t\t\t\t\tp[k] = properties[k];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}, {});\r\n\t\t\t\t\r\n\t\t\t\tRequests.saveState(lastProps, 'gmxForest_lastProps');\r\n// console.log('ssssssssss', latlngs) L.gmxUtil.geoJSONtoGeometry\r\n\t\t\t\tRequests.modifyVectorObjects(layerID, [{\r\n\t\t\t\t\tproperties: properties,\r\n\t\t\t\t\tgeometry: L.gmxUtil.geoJSONtoGeometry(geo.toGeoJSON()),\r\n\t\t\t\t\taction: 'insert'\r\n\t\t\t\t}]).then((ev) => {\r\nconsole.log('insert VectorObjects', ev)\r\n\t\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\t\tmap.gmxDrawing.remove(geo);\r\n\t\t\t\t\t// prnt.editSite();\r\n\t\t\t\t\tprnt.regetFeatures();\r\n\t\t\t\t\tL.gmx.layersVersion.chkVersion(layerID);\r\n\t\t\t\t});\r\n\t\t\t\tthis.cancelMe();\r\n\t\t\t},\r\n\r\n\t\t\tnextStep() {\r\n\t\t\t\tconst { step, meta, map } = this.get();\r\n console.log('nextStep', step, meta, this.refs);\r\n// this.chkInputs();\r\n\t\t\t\tconst isRing = this._drawingItems && this._drawingItems.ring;\r\n\t\t\t\tif (step === 2) {\r\n\t\t\t\t\tthis.addObject();\r\n\t\t\t\t} else if (this.chkInputs(!isRing)) {\r\n\t\t\t\t\tlet ring = this._drawingItems.ring.rings[0].ring,\r\n\t\t\t\t\t\tlatlngs = ring.getLayers()[0].getLatLngs();\r\n// console.log('ssssssssss', latlngs)\r\n\t\t\t\t\tlatlngs[latlngs.length - 1] = latlngs[0];\r\n\r\n\t\t\t\t\tmap.gmxDrawing.remove(this._drawingItems.ring);\r\n\t\t\t\t\tlet geo = map.gmxDrawing.add(L.polygon(latlngs), {title: 'Делянка'});\r\n\r\n\t\t\t\t\tthis.set({step: 2, geo: geo, _lastProps: Requests.getState('gmxForest_lastProps')});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\treDrawing(snap, setView) {\r\n\t\t\t\tconst { map } = this.get();\r\n// console.log('reDrawing', snap);\r\n\r\n\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\tif (snap) {\r\n\t\t\t\t\tif (snap.latlng) {\r\n\t\t\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(snap.latlng[0], snap.latlng[1]);\r\n\t\t\t\t\t\tlet cont = this.refs.sn0;\r\n\t\t\t\t\t\tif (cont) {\r\n\t\t\t\t\t\t\tlet inputs = cont.getElementsByTagName('input');\r\n\t\t\t\t\t\t\tinputs[0].classList.remove('error');\r\n\t\t\t\t\t\t\tinputs[1].classList.remove('error');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// this.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec;\r\n\t\t\t\t\t\t// this.delta = snap.latlng[0] ? 1 / Math.cos(snap.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\tthis.delta = 1;\r\n\t\t\t\t\t\tlet gmxDrawing = map.gmxDrawing,\r\n\t\t\t\t\t\t\tlatlng = new L.LatLng(snap.latlng[0], snap.latlng[1]),\r\n\t\t\t\t\t\t\tp = latlng,\r\n\t\t\t\t\t\t\tmarker = L.marker(latlng, {draggable: true, title: 'Snap point'}).on('dragend', (it, ev) => {\r\n\t\t\t\t\t\t\t\t// if (snap.snap && snap.snap.length) {\r\n\t\t\t\t\t\t\t\t\tlet cont = this.refs.sn0,\r\n\t\t\t\t\t\t\t\t\t\tinputs = cont.getElementsByTagName('input'),\r\n\t\t\t\t\t\t\t\t\t\tlatlng = it.target.getLatLng();\r\n\t\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(latlng);\r\n\t\t\t\t\t\t\t\t\t// snap.latlng = [latlng.lat, latlng.lng];\r\n\t\t\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t}, this),\r\n\t\t\t\t\t\t\tmyObject = map.gmxDrawing.add(marker, {}),\r\n\t\t\t\t\t\t\tout = {\r\n\t\t\t\t\t\t\t\tmarker: myObject\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tarr = [];\r\n\r\n\t\t\t\t\t\tif (setView) { map.setView(latlng); }\r\n\t\t\t\t\t\tif (snap.snap) {\r\n\t\t\t\t\t\t\tarr = snap.snap.map((it) => {\r\n\t\t\t\t\t\t\t\t// p = L.GeometryUtil.destination(p, 180 + it[0], it[1]);\r\n\t\t\t\t\t\t\t\tlet angle = it[0] || 0,\r\n\t\t\t\t\t\t\t\t\tdist = it[1] || 0;\r\n\t\t\t\t\t\t\t\tangle += this.declination ? this.declination : 0;\r\n\t\t\t\t\t\t\t\tdist *= this.delta ? this.delta : 1;\r\n\t\t\t\t\t\t\t\tp = L.GeometryUtil.destination(p, angle, dist);\r\n\t\t\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// arr = arr.reverse();\r\n\t\t\t\t\t\t\tarr.unshift(latlng);\r\n\t\t\t\t\t\t\tlatlng = p;\r\n\t\t\t\t\t\t\tout.snap = map.gmxDrawing.add(L.polyline(arr), {pointStyle:{shape: 'circle'}, lineStyle:{color: '#ff0000'}} );\r\n\t\t\t\t\t\t\tout.snap.on('editstop dragend rotateend', (it) => {\r\n\t\t\t\t\t\t\t\tlet geoJSON = it.object.toGeoJSON(),\r\n\t\t\t\t\t\t\t\t\tcoords = geoJSON.geometry.coordinates,\r\n\t\t\t\t\t\t\t\t\tlatlngs = coords.map((it) => L.latLng(it[1], it[0])),\r\n\t\t\t\t\t\t\t\t\tarr = Requests.getAngleDist(latlngs[0], latlngs, this.declination, this.delta);\r\n\t\t\t\t\t\t\t\tarr.shift();\r\n// console.log('latlng1', coords[0]);\r\n\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(coords[0][1], coords[0][0]));\r\n\t\t\t\t\t\t\t\tsnap.snap = arr;\r\n\t\t\t\t\t\t\t\tthis.lastEdit = 'snap';\r\n\t\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (snap.ring) {\r\n\t\t\t\t\t\t\tarr = snap.ring.map((it) => {\r\n\t\t\t\t\t\t\t\tlet angle = (it[0] || 0);\r\n\t\t\t\t\t\t\t\tangle -= this.declination ? this.declination : 0;\r\n\t\t\t\t\t\t\t\tp = L.GeometryUtil.destination(p, (it[0] || 0) + (this.declination ? this.declination : 0), it[1] || 0);\r\n\t\t\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tarr.unshift(latlng);\r\n\t\t\t\t\t\t\tout.ring = map.gmxDrawing.add(L.polyline(arr), {pointStyle:{shape: ''}, lineStyle:{color: '#0000ff'}} );\r\n\t\t\t\t\t\t\tout.ring.on('editstop dragend rotateend', (it) => {\r\n\t\t\t\t\t\t\t\tlet geoJSON = it.object.toGeoJSON(),\r\n\t\t\t\t\t\t\t\t\tlatlngs = geoJSON.geometry.coordinates.map((it) => L.latLng(it[1], it[0])),\r\n\t\t\t\t\t\t\t\t\tarr = Requests.getAngleDist(latlngs[0], latlngs, this.declination, this.delta),\r\n\t\t\t\t\t\t\t\t\tsnapLen = snap.snap ? snap.snap.length : 0;\r\n\t\t\t\t\t\t\t\tif (!snapLen) {\r\n\t\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(latlngs[0]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tarr.shift();\r\n\t\t\t\t\t\t\t\tsnap.ring = arr;\r\n\t\t\t\t\t\t\t\tthis.lastEdit = 'ring';\r\n\t\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.lastEdit && out[this.lastEdit]) {\r\n\t\t\t\t\t\t\tout[this.lastEdit].bringToFront();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.lastEdit = '';\r\n\t\t\t\t\t\tthis._drawingItems = out;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttoggleContextmenu(flag) {\r\n // console.log('toggleContextmenu', flag);\r\n\t\t\t\tlet map = nsGmx.leafletMap,\r\n\t\t\t\t\tmcm = map.contextmenu,\r\n\t\t\t\t\tdcm = map.gmxDrawing.contextmenu;\r\n\r\n\t\t\t\tif (!this._privazMenu) {\r\n\t\t\t\t\tthis._privazMenu = {callback: this.privaz.bind(this), text: 'Привязать'};\r\n\t\t\t\t}\r\n\t\t\t\tif (flag === 1) {\r\n\t\t\t\t\tdcm.insertItem(this._privazMenu, 0, 'points');\r\n\t\t\t\t\tthis._getCenterMenu = mcm.insertItem({callback: this.getCenter.bind(this), text: 'Взять координату'}, 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdcm.removeItem(this._privazMenu, 'points');\r\n\t\t\t\t\tif (this._getCenterMenu) {\r\n\t\t\t\t\t\tmcm.removeItem(this._getCenterMenu);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\t\tthis.set({cancel: true});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsbl_mer(lat, lon) {\r\n\t\t\t\tlet zone = Math.round(lon / 6) + 1,\r\n\t\t\t\t\tl0 = zone * 6 - 3;\r\n\t\t\t\treturn (lon - l0) * Math.sin(lat);\r\n\t\t\t},\r\n\t\t\tsetNodeField(node, setFlag) {\r\n\t\t\t\tconst { map, quadrantIds} = this.get();\r\n\t\t\t\tthis.set({quadrantValues: null, quadrantLayerId: null});\r\n\t\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value;\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tL.gmxUtil.loaderStatus(val);\r\n\t\t\t\t\tRequests.loadQuadrantValues(val)\r\n\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\tthis.set({quadrantValues: json, quadrantLayerId: val || null});\r\n\t\t\t\t\t\tfor (let i = 0, len = quadrantIds.length; i < len; i++) {\r\n\t\t\t\t\t\t\tlet pt = quadrantIds[i];\r\n\t\t\t\t\t\t\tif (pt.id === val) {\r\n\t\t\t\t\t\t\t\tmap.fitBounds(pt.bounds);\r\n\t\t\t\t\t\t\t\tif (!pt._layer._map) { map.addLayer(pt._layer); }\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tL.gmxUtil.loaderStatus(val, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tprivaz(ev, feature) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet geoJson = feature.toGeoJSON(),\r\n\t\t\t\t\tlatlngs = L.geoJson(geoJson).getLayers()[0].getLatLngs();\r\n\t\t\t\t\t\r\n\t\t\t\tif (latlngs[0][0] instanceof L.LatLng) {\r\n\t\t\t\t\tlatlngs = latlngs[0];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar tt = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsnap.latlng = this._getLatlng(latlngs[0]);\r\n\t\t\t\t\r\n\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(latlngs[0].lat, latlngs[0].lng);\r\n\t\t\t\tthis.delta = 1;\r\n\t\t\t\tlatlngs.push(latlngs[0]);\r\n\t\t\t\t\r\n\t\t\t\tsnap.snap = [[]];\r\n\t\t\t\tlet ring = Requests.getAngleDist(latlngs[0], latlngs, this.declination, this.delta);\r\n\t\t\t\tring.shift();\r\n\t\t\t\tsnap.ring = ring;\r\n\t\t\t\tfeature.remove();\r\n\t\t\t\tthis.set({snap: snap});\r\n\t\t\t},\r\n\t\t\t_getLatlng(latlng) {\r\n\t\t\t\treturn [Number(latlng.lat.toFixed(6)), Number(latlng.lng.toFixed(6))];\r\n\t\t\t},\r\n\t\t\tgetCenter(ev) {\r\n \t\t\t\tconst { snap, map } = this.get();\r\n\t\t\t\tsnap.latlng = this._getLatlng(ev.latlng);\r\n\t\t\t\tthis.set({snap: snap});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonupdate({ changed, current, previous }) {\r\n\t\t\tif (changed.cancel && current.cancel) {\r\n\t\t\t\tthis.toggleContextmenu(0);\r\n\t\t\t}\r\n\t\t\tif (changed.snap && this._focusNode) {\r\n\t\t\t\tlet arr = document.getElementsByName(this._focusNode);\r\n\t\t\t\tif (arr && arr.length) {\r\n\t\t\t\t\tarr[0].focus();\r\n\t\t\t\t\tarr[0].select();\r\n\t\t\t\t}\r\n\t\t\t\tthis._focusNode = undefined;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonstate({ changed, current, previous }) {\r\n\t\t\tif (changed.step && current.step === 1) {\r\n\t\t\t\tthis.toggleContextmenu(current.step);\r\n\t\t\t}\r\n\r\n // console.log('snap onstate', this._lastProps, current);\r\n\t\t\tif (changed.snap) {\r\n\t\t\t\tlet snap = current.snap,\r\n\t\t\t\t\tquadrantValues = current.quadrantValues,\r\n\t\t\t\t\titem = current.item,\r\n\t\t\t\t\thashCols = current.hashCols;\r\n\t\t\t\tif (!snap.latlng && quadrantValues && item && hashCols && current.map) {\r\n\t\t\t\t\tlet out = {},\r\n\t\t\t\t\t\tfitBounds = null,\r\n\t\t\t\t\t\tkv = item[hashCols.kv || hashCols.kvartal];\r\n\t\t\t\t\tif (quadrantValues[kv]) {\r\n\t\t\t\t\t\tlet bbox = quadrantValues[kv].bbox,\r\n\t\t\t\t\t\t\tmin = bbox.min,\r\n\t\t\t\t\t\t\tmax = bbox.max;\r\n\t\t\t\t\t\tcurrent.map.fitBounds([[min.y, min.x], [max.y, max.x]]);\r\n\t\t\t\t\t\tout.latlng = bbox.getCenter();\r\n\t\t\t\t\t\tthis.declination = Requests.geoMag(out.latlng[0], out.latlng[1], 0).dec - this.sbl_mer(out.latlng[0], out.latlng[1]);\r\n\t\t\t\t\t\t// this.delta = out.latlng[0] ? 1 / Math.cos(out.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\tthis.delta = 1;\r\n\t\t\t\t\t\tlet p = new L.LatLng(out.latlng[1], out.latlng[0]),\r\n\t\t\t\t\t\t\tcenter = p,\r\n\t\t\t\t\t\t\tfp = null;\r\n\t\t\t\t\t\tif (!snap.ring && item && hashCols) {\r\n\t\t\t\t\t\t\tlet geo = item[hashCols.geomixergeojson],\r\n\t\t\t\t\t\t\t\tgeoJSON = L.geoJson(L.gmxUtil.geometryToGeoJSON(geo)),\r\n\t\t\t\t\t\t\t\tlatlngs = geoJSON.getLayers()[0].getLatLngs()[0];\r\n\t\t\t\t\t\t\tfp = latlngs[0];\r\n\t\t\t\t\t\t\tlatlngs.unshift(latlngs[0]);\r\n\t\t\t\t\t\t\tlet ring = Requests.getAngleDist(p, latlngs, this.declination, this.delta);\r\n\t\t\t\t\t\t\tring.shift();\r\n\t\t\t\t\t\t\tring.shift();\r\n\t\t\t\t\t\t\tp = latlngs[latlngs.length - 1];\r\n\t\t\t\t\t\t\tlet bearing = L.GeometryUtil.bearing(p, fp);\r\n\t\t\t\t\t\t\tbearing = Math.floor(bearing * 100) / 100;\r\n\t\t\t\t\t\t\tring.push([\r\n\t\t\t\t\t\t\t\tbearing + (bearing < 0 ? 360 : 0),\r\n\t\t\t\t\t\t\t\tL.gmxUtil.distVincenty(p.lng, p.lat, fp.lng, fp.lat)\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\tout.ring = ring;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!snap.snap) {\r\n\t\t\t\t\t\t\tlet bearing = L.GeometryUtil.bearing(fp, center);\r\n\t\t\t\t\t\t\tbearing = Math.floor(bearing * 100) / 100;\r\n\t\t\t\t\t\t\tout.snap = [[\r\n\t\t\t\t\t\t\t\tbearing + (bearing < 0 ? 360 : 0),\r\n\t\t\t\t\t\t\t\tL.gmxUtil.distVincenty(fp.lng, fp.lat, center.lng, center.lat)\r\n\t\t\t\t\t\t\t]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsnap = out;\r\n\t\t\t\t\t\tthis.set({snap: out, kvartal: kv});\r\n\t\t\t\t\t\tthis.reDrawing(snap, true);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t// } else if (this._focusNode !== undefined) {\r\n\t\t\t\t\t// console.log('sssssss', this._focusNode);\r\n\t\t\t\t\t// this.set({snap: {\r\n\t\t\t\t\t\t// snap: [[]],\r\n\t\t\t\t\t\t// ring: [[]]\r\n\t\t\t\t\t// }});\r\n\t\t\t\t}\r\n\t\t\t\tthis.reDrawing(snap);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"main_pop_cont_2\">\r\n\t<div class=\"pop_title\">Добавление делянки</div>\r\n{#if step === 1}\r\n\t<div class=\"scrollbar\" ref:scroll>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_big\">Шаг 1. Контур делянки</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class=\"pop_ro_title_radio\">\r\n\t\t\t<div class=\"pop_ro_title_left\"><label class=\"custom-control-label\">Слой квартальной сети</label></div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"quadrantLayerId\" ref:quadrantLayerId class=\"quadrantLayerId gmx-sidebar-select-large\">\r\n\t\t\t\t<option value=\"\"></option>\r\n{#if quadrantIds}\r\n{#each quadrantIds as it}\r\n\t\t\t\t\t\t<option value=\"{it.id}\" selected=\"{it.id === quadrantLayerId}\">{it.title}</option>\r\n{/each}\r\n{/if}\r\n\t\t\t</select>\r\n\t\t\t<span class=\"pop_upload\" alt=\"pop_upload\" on:click=\"createKvartal()\" ></span>\r\n\t\t</div>\r\n{#if listQuadrants}\r\n\t\t<div class=\"pop_ro_title_radio\">\r\n\t\t\t<div class=\"pop_ro_title_left\"><label class=\"custom-control-label\" for=\"defaultUnchecked\">Квартал</label></div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro pop_ro_radio_input\">\r\n\t\t\t<input name=\"kvartal\" value=\"{kvartal || ''}\" on:input=\"setKvartal(this)\" class=\"\" list=\"kvartal\" title=\"Указать квартал\" />\r\n\t\t\t<datalist id=\"kvartal\">\r\n\t\t\t{#each listQuadrants as it}\r\n\t\t\t\t<option value={it} />\r\n\t\t\t{/each}\r\n\t\t\t</datalist>\r\n\t\t</div>\r\n{/if}\r\n\t\t<div class=\"pop_ro_title_radio\">\r\n\t\t\t<div class=\"pop_ro_title_left\"><label class=\"custom-control-label\" for=\"defaultUnchecked\">Координаты опорной точки</label></div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro pop_ro_radio_input point\" ref:sn0>\r\n\t\t\t<span class=\"leaflet-gmx-coordFormatChange\" title=\"Сменить формат координат\" on:click=\"coordFormatChange(this)\"></span>\r\n\t\t\t<input name=\"lat\" on:input=\"setPoint(event)\" on:paste=\"fromClipboard(event)\" value=\"{latlng ? latlng[0] : ''}\" class=\"inp_pop_mini lat error\" placeholder=\"lat\" type=\"number\" pattern=\"{paterns.latlng}\" min=\"-90\" max=\"90\" step=\"0.002\" />\r\n\t\t\t<input name=\"lng\" on:input=\"setPoint(event)\" on:paste=\"fromClipboard(event)\" value=\"{latlng ? latlng[1] : ''}\" class=\"inp_pop_mini lng error\" placeholder=\"long\" type=\"number\" pattern=\"{paterns.latlng}\" min=\"-180\" max=\"180\" step=\"0.002\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro pop_ro_radio_input latlngPoint\" ref:sn00>\r\n\t\t\t<input name=\"latlng\" on:input=\"setLatlngPoint(event)\" disabled value=\"{latlngPoint ? latlngPoint : ''}\" class=\"inp_pop_mini {latlngPoint ? '' : 'error'}\" />\r\n\t\t</div>\r\n\t\t<div class=\"p_block snap\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Привязочный ход</div>\r\n\r\n\t\t{#each snapArr as it, i}\r\n\t\t\t<div class=\"pop_ro snap\">\r\n\t\t\t\t<div class=\"pop_ro_title_left\">{i}-{i + 1}</div>\r\n\t\t\t\t<input name=\"snap{i}_a\" value=\"{it[2] || it[0] || 0}\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" class=\"inp_pop_mini_m\" placeholder=\"Angle\" />\r\n\t\t\t\t-\r\n\t\t\t\t<input name=\"snap{i}_d\" value=\"{Math.round(it[1] || 0)}\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" class=\"inp_pop_mini_m\" placeholder=\"Distance\" type=\"number\" min=\"0\" step=\"1\" size=\"6\" />\r\n\t\t\t\t<div class=\"pop_ro_right_dotted\">\r\n\t\t\t\t\t<span on:click=\"nextPoint(this)\" class=\"add_thin_ic addNext\" title=\"Добавить строку\"></span>\r\n\t\t\t\t\t<span on:click=\"delPoint(this)\" class=\"dotted_ic delItem\" title=\"Удалить строку\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/each}\r\n\t\t</div>\r\n\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Контур делянки</div>\r\n\t\t</div>\r\n\r\n\t\t{#each ringArr || [[]] as it, i}\r\n\t\t<div class=\"pop_ro ring ring{i}\">\r\n\t\t\t<div class=\"pop_ro_title_left\">{i + (snapArr ? snapArr.length : 0)}-{i === ringArr.length - 1 ? (snapArr ? snapArr.length : 0) : (snapArr ? snapArr.length : 0) + i + 1}</div>\r\n\t\t\t<input name=\"ring{i}_a\" value=\"{it[2] || it[0] || 0}\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" class=\"inp_pop_mini_m\" />\r\n\t\t\t-\r\n\t\t\t<input name=\"ring{i}_d\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" value=\"{Math.round(it[1] || 0)}\" class=\"inp_pop_mini_m\" placeholder=\"Distance\" type=\"number\" min=\"0\" step=\"1\" />\r\n\t\t\t<div class=\"pop_ro_right_dotted\">\r\n\t\t\t\t<span on:click=\"nextPoint(this)\" class=\"add_thin_ic addNext\" title=\"Добавить строку\"></span>\r\n\t\t\t\t<span on:click=\"delPoint(this)\" class=\"dotted_ic delItem\" title=\"Удалить строку\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t{/each}\r\n\t</div>\r\n\t<div class=\"pop_bottom\">\r\n\t\t<div class=\"pop_bottom_left\" on:click=\"cancelMe()\">Отмена</div>\r\n\t\t<div class=\"pop_bottom_right\" on:click=\"nextStep()\">Далее</div>\r\n\t</div>\r\n{:else}\r\n\t<div class=\"scrollbar\" ref:scroll>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_big\">Шаг 2. Информация</div>\r\n\t\t\t<div class=\"info\">Важно!\r\n\t\t\t\t<div class=\"main_pop_cont_4_Imp\">\r\n\t\t\t\t\t<div class=\"main_pop_cont_4_Imp_text \">\r\n\t\t\t\t\t   на основе этой информации Вы будете создавать отчет, поэтому мы бы рекомендовали заполнить ее сразу, в процессе добавления делянки\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n{#each Object.keys(hashCols) as k}\r\n\t{#if\r\n\t\t(k !== 'geomixergeojson' &&  k !== 'gmx_id' &&  k !== 'FRSTAT' &&  k !== 'snap') &&\r\n\t\t(\r\n\t\t\t(reportType === 'ИЛ' && k !== 'reforest_t') ||\r\n\t\t\t(reportType === 'ВЛ' && k !== 'form_rub' && k !== 'type_rub')\r\n\t\t)\r\n\t}\r\n\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">{isForestCols && fieldsConf[k] ? fieldsConf[k].title : k}</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t{#if isForestCols && k === 'report_t'}\r\n\t\t\t<select on:change=\"set({reportType: this.options[this.selectedIndex].value})\" name=\"{k}\" ref:reportType class=\"reportType gmx-sidebar-select-large\">\r\n\t\t\t\t{#each Object.keys(fieldsConf[k].onValue) as kk}\r\n\t\t\t\t<option value=\"{kk}\">{fieldsConf[k].onValue[kk].title}</option>\r\n\t\t\t\t{/each}\r\n\t\t\t</select>\r\n\t\t{:else}\r\n\t\t\t<input name=\"{k}\" class=\"inp_pop\" value=\"{_lastProps[k] || ''}\" placeholder=\"{isForestCols && fieldsConf[k] ? fieldsConf[k].title : _lastProps[k] || ''}\" />\r\n\t\t{/if}\r\n\t\t</div>\r\n\t{/if}\r\n{/each}\r\n\r\n\t\t<!-- div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Участковое лестничество</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"sectionForestry\" class=\"inp_pop\" value=\"\" placeholder=\"Участковое лестничество\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Дача/Урочище</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"dacha\" class=\"inp_pop\"  placeholder=\"Дача/Урочище\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Квартал</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"quadrant\" class=\"inp_pop\"  placeholder=\"Квартал\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Выдел(ы)</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"stratum\" class=\"inp_pop\"  placeholder=\"Выдел(ы)\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Делянка</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"site\" class=\"inp_pop\"  placeholder=\"Делянка\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Площадь</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"siteArea\" class=\"inp_pop\"  placeholder=\"Площадь\" />\r\n\t\t</div>\r\n\t{#if isReqTypeReport}\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Тип лесовосстановительного мероприятия</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"recoveryEventType\" class=\"inp_pop\"  placeholder=\"\" />\r\n\t\t</div>\r\n\t{:else}\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Форма рубки</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"fellingForm\" class=\"inp_pop\"  placeholder=\"сплошная/выборочная\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Тип рубки</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"fellingType\" class=\"inp_pop\"  placeholder=\"\" />\r\n\t\t</div>\r\n\t{/if}\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Год</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"Год\" class=\"inp_pop\"  placeholder=\"\" />\r\n\t\t</div -->\r\n\t</div>\r\n\t<div class=\"pop_bottom\">\r\n\t\t<div class=\"pop_bottom_left\" on:click=\"cancelMe()\">Отмена</div>\r\n\t\t<div class=\"pop_bottom_right\" on:click=\"nextStep()\">Создать</div>\r\n\t</div>\r\n{/if}\r\n</div>\r\n\r\n<style>\r\n* {\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n:global(.gmxControlPopup.leaflet-control .closeButton) {\r\n    top: 12px;\r\n    right: 12px;\r\n    z-index: 2;\r\n}\r\n\r\n.pop_title {\r\n    position: relative;\r\n    top: 0px;\r\n    left: 0;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    font-family: IBM Plex Sans;\r\n    min-height: 30px;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    padding-left: 17px;\r\n}\r\n\r\nlabel.custom-control-label {\r\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n}\r\n\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: 0;\r\n    bottom: 4px;\r\n    position: relative;\r\n    align-items: center;\r\n}\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 5px 15px;\r\n    margin-bottom: 6px;\r\n    align-items: center;\r\n}\r\n\r\n.pop_ro.snap {\r\n    align-items: center;\r\n}\r\n\r\n.pop_ro.ring.ring0 {\r\n    align-items: center;\r\n}\r\n\r\n.pop_bottom {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 40px;\r\n    border-top: 1px solid #D8E1E8;\r\n    align-items: center;\r\n    margin-top: 23px;\r\n}\r\n\r\n.pop_bottom_right {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #318CFE;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n.pop_bottom_left {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-right: 1px solid #D8E1E8;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.main_pop_cont_2 {\r\n    display: block;\r\n    width: 287px;\r\n    height: 460px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: left;\r\n}\r\n.main_pop_cont_2 div {\r\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n}\r\n.scrollbar {\r\n    height: 100vh;\r\n    width: 100%;\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n}\r\n.pop_ro_title_big {\r\n    font-style: normal;\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    color: #394B59;\r\n    display: block;\r\n}\r\n.pop_ro_title_radio {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-bottom: -12px;\r\n    margin-top: -5px;\r\n}\r\n.custom-control-input {\r\n    position: relative;\r\n    z-index: 1;\r\n    opacity: 1;\r\n    margin-right: 10px;\r\n    top: 2px;\r\n}\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    display: block;\r\n}\r\n\r\n.leaflet-gmx-coordFormatChange {\r\n    margin-left: 2px;\r\n    margin-right: 8px;\r\n    margin-top: 11px;\r\n    display: none;\r\n}\r\n\r\ninput.inp_pop {\r\n    width: 100%;\r\n    text-align: left;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini {\r\n    width: 48%;\r\n    text-align: left;\r\n    /* background: transparent;*/\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini_m {\r\n    width: 60px;\r\n    text-align: left;\r\n/*    background: transparent;*/\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\n.latlngPoint {\r\n\ttext-align: right;\r\n}\r\n.latlngPoint input {\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n}\r\n\r\n.pop_ro_right_dotted span {\r\n    cursor: pointer;\r\n}\r\n.add_thin_ic {\r\n    content: url(./img/add_thin_ic.svg);\r\n}\r\n.dotted_ic {\r\n    content: url(./img/remove_thin_ic.svg);\r\n}\r\n.main_pop_cont_4_Imp {\r\n\tposition: absolute;\r\n    display: block;\r\n    /* background: #FFFFFF; */\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 218px;\r\n    height: 118px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 15px;\r\n}\r\n.info {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: right;\r\n    text-decoration-line: underline;\r\n    cursor: pointer;\r\n    color: #318CFE;\r\n}\r\n.main_pop_cont_4_Imp_text {\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    text-align: left;\r\n    line-height: 18px;\r\n    color: #10161A;\r\n    display: block;\r\n}\r\n.pop_ro_title .main_pop_cont_4_Imp {\r\n\tdisplay: none;\r\n}\r\n.pop_ro_title .info:hover .main_pop_cont_4_Imp {\r\n\tdisplay: block;\r\n}\r\n\r\n.error {\r\n\tbackground-color: lightcoral;\r\n}\r\n.disabled {\r\n    display: none;\r\n}\r\n\r\n.pop_ro_title select {\r\n    width: 100%;\r\n\t\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n\t\r\n}\r\n\r\ninput[name=\"kvartal\"] {\r\n    width: 100%;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n \r\ninput[name=\"kvartal\"]::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    background: #FFF;\r\n}\r\n\r\nspan.pop_upload {\r\n    content: url(./img/upload.svg);\r\n\tcursor: pointer;\r\n    left: 10px;\r\n    position: relative;\r\n}\r\n.p_block .pop_ro_title_left {\r\n    padding: 13px 26px 5px 15px;\r\n}\r\n\r\n.gmx-sidebar-select-large {\r\n\tbox-sizing:border-box;\r\n\twidth:100%;\r\n\theight:33px;\r\n\tpadding:0 8px;\r\n\tborder-radius:3px;\r\n\tbackground: transparent;\r\n\tborder:1px solid #d7e1e7;\r\n\tfont-family:Arial;\r\n\tfont-size:13px;\r\n\tfont-weight:400;\r\n\tcolor:#5b7284;\r\n}\r\n\r\n</style>\r\n",
    "<script>\r\nimport * as Requests from './Requests.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\teditFlag: false,\r\n\t\t\tparentComp: null,\r\n\t\t\tsortType: 'desc',\r\n\t\t\tsortKey: 'gmx_id',\r\n\t\t\treverse: false,\r\n\t\t\tpageCurr: 1,\r\n\t\t\tpagesize: 15,\r\n\t\t\tpageFrom: 0,\r\n\t\t\ttableItems: [],\r\n\t\t\titems: [],\r\n\t\t\titem: null,\r\n\t\t\t// checked: {},\r\n\t\t\thashCols: []\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsort(key) {\r\n\t\t\tconst { sortType } = this.get();\r\n\t\t\t// console.log('sort', sortType);\r\n\t\t\tthis.set({sortType: sortType === 'desc' ? 'asc' : 'desc', sortKey: key});\r\n\t\t\tthis.setCurrPage(1);\r\n\t\t},\r\n\t\tcheckReverse(ev) {\r\n\t\t\t console.log('checkReverse', ev.ctrlKey);\r\n\r\n\t\t\tlet nChecked = {};\r\n\t\t\tlet ctrlKey = ev.ctrlKey;\r\n\t\t\tlet isChecked = ev.target.checked;\r\n\t\t\t\r\n\t\t\tif (ctrlKey || isChecked) {\r\n\t\t\t\tconst { items, hashCols, checked } = this.get();\r\n\t\t\t\tlet nm = hashCols.gmx_id;\r\n\t\t\t\titems.forEach((it) => {\r\n\t\t\t\t\tlet id = it[nm];\r\n\t\t\t\t\tif (!ctrlKey || !checked[id]) {\r\n\t\t\t\t\t\tnChecked[id] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.set({checked: nChecked, reverse: isChecked});\r\n\t\t\t// this.root.set({checked: nChecked});\r\n\t\t},\r\n\t\tcheckMe(id) {\r\n\t\t\t// console.log('checkMe', id);\r\n\t\t\tconst { checked } = this.get();\r\n\t\t\tif (checked[id]) {\r\n\t\t\t\tdelete checked[id];\r\n\t\t\t} else {\r\n\t\t\t\tchecked[id] = true;\r\n\t\t\t}\r\n\t\t\tthis.set({checked: checked});\r\n\t\t\t// this.root.set({checked: checked});\r\n\t\t},\r\n\t\tsortMe(arr, sortKey, hashCols, sortType) {\r\n\t\t\tlet nm = hashCols[sortKey];\r\n\t\t\treturn arr.sort((a, b) => {\r\n\t\t\t\tlet x = b[nm];\r\n\t\t\t\tlet y = a[nm];\r\n                return (x < y ? -1 : (x > y ? 1 : 0)) * (sortType === 'desc' ? -1 : 1);\r\n\t\t\t});\r\n\t\t},\r\n\t\tpageTo(nm) {\r\n\t\t\tconst { pageFrom } = this.get();\r\n\t\t\tthis.set({pageCurr: nm});\r\n\t\t\tnm = nm < 1 ? 1 : (nm > pageFrom ? pageFrom : nm);\r\n\t\t\tthis.setCurrPage(nm);\r\n\t\t\treturn nm;\r\n\t\t},\r\n\t\tsetItem(id) {\r\n\t\t\tconst { tableItems, hashCols, prnt } = this.get();\r\n\t\t\ttableItems.forEach((it) => {\r\n\t\t\t\tif(it[hashCols.gmx_id] === id) {\r\n\t\t\t\t\t// let snap = it[hashCols.snap] || null;\r\n\t\t// console.log('setItem', id, snap);\r\n\t\t\t\t\tthis.set({item: it});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// this.set({item: snap ? JSON.parse(snap) : {}});\r\n\t\t},\r\n\t\tviewItem(id) {\r\n\t\t\tconst { tableItems, hashCols} = this.get();\r\n\t\t\tthis.root.viewItem(id, tableItems, hashCols);\r\n\t\t},\r\n\t\tdeleteItem(id, ev) {\r\n\t\t\tconst { prnt } = this.get();\r\n\t\t\tprnt.deleteItem(id, ev);\r\n\t\t},\r\n\t\teditItem(id, del) {\r\n\t\t\tconst { tableItems, hashCols, prnt } = this.get();\r\n\r\n\t\t\tthis.root.viewItem(id, tableItems, hashCols);\r\n\t\t\tlet snap = null;\r\n\t\t\ttableItems.forEach((it) => {\r\n\t\t\t\tif(it[hashCols.gmx_id] === id) {\r\n\t\t\t\t\tsnap = it[hashCols.snap];\r\n// console.log('editItem', id, snap);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tprnt.editItem(id, snap, del);\r\n\t\t},\r\n\r\n\t\tsetCurrPage(nm) {\r\n\t\t\t// console.log('setCurrPage', nm);\r\n\t\t\tconst { items, hashCols, pageCurr, pagesize, sortKey, sortType } = this.get();\r\n\t\t\tnm = nm || pageCurr;\r\n\t\t\tconst beg = pagesize * (nm - 1);\r\n\r\n\t\t\tlet arr = (sortKey ? this.sortMe(items, sortKey, hashCols, sortType) : items)\r\n\t\t\t\t.slice(beg, beg + pagesize);\r\n\r\n\t\t\tconst cnt = items.length / pagesize;\r\n\t\t\tconst pf = Math.floor(cnt);\r\n\t\t\t// console.log('setCurrPage1', nm, arr, cnt);\r\n\t\t\tthis.set({tableItems: arr, pageCurr: nm, pageFrom: pf + (cnt > pf ? 1 : 0)});\r\n\t\t}\r\n\t},\r\n\tonstate({ changed, current, previous }) {\r\n // console.log('Table in onstate', changed, current, this.refs.Reverse);\r\n\t\tif (changed.items) {\r\n\t\t\tif (current.items.length) {\r\n\t\t\t\tthis.setCurrPage();\r\n\t\t\t} else {\r\n\t\t\t\tthis.set({tableItems: [], pageCurr: 1, pageFrom: 0});\r\n\t\t\t}\r\n\t\t\tif (this.refs.Reverse) {\r\n\t\t\t\tthis.refs.Reverse.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed.tableItems) {\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<table class=\"tabl_main_cont\">\r\n <tbody>\r\n\t<tr class=\"tabl_main_cont_tr\">\r\n\t\t<th>\r\n\t\t{#if !editFlag}\r\n\t\t\t<input on:click=\"checkReverse(event)\" type=\"checkbox\" ref:Reverse />\r\n\t\t{/if}\r\n\t\tID<span on:click=\"sort('gmx_id')\" class=\"c2 sorting { sortKey === 'gmx_id' ? (sortType === 'desc' ? 'sorting-desc' : 'sorting-asc') : '' }\"></span></th>\r\n\t\t<th on:click=\"sort('FRSTAT')\">Статус<span class=\"c2 sorting { sortKey === 'FRSTAT' ? (sortType === 'desc' ? 'sorting-desc' : 'sorting-asc') : '' }\"></span></th>\r\n\t</tr>\r\n {#each tableItems as it}\r\n\t<tr class=\"item {item && item[hashCols.gmx_id] === it[hashCols.gmx_id] ? 'current' : ''}\">\r\n\t\t<td class=\"c2\">\r\n\t\t{#if !editFlag}\r\n\t\t<input on:change=\"checkMe(it[hashCols.gmx_id])\" checked=\"{checked[it[hashCols.gmx_id]]}\" type=\"checkbox\">\r\n\t\t{/if}\r\n\t\t{it[hashCols.gmx_id]}\r\n\t\t</td>\r\n\t\t<td class=\"c3\">\r\n\t\t\t<div class=\"td_last_edit\">\r\n\t\t\t\t<div class=\"td_round\"><span class=\"{it[hashCols.FRSTAT] > 0 ? 'checked' : ''}\" title=\"Отчет{it[hashCols.FRSTAT] > 0 ? '' : ' не'} создан\"></span></div>\r\n\t\t\t\t<div class=\"td_icons_right\">\r\n\t\t\t\t{#if editFlag}\r\n\t\t\t\t\t<span on:click=\"editItem(it[hashCols.gmx_id])\" class=\"sketch_ic\" title=\"Редактировать\"></span>\r\n\t\t\t\t{/if}\r\n\t\t\t\t\t<span class=\"marker_ic\" on:click=\"viewItem(it[hashCols.gmx_id])\" title=\"Центрировать\"></span>\r\n\t\t\t\t{#if editFlag}\r\n\t\t\t\t\t<span class=\"delete_ic\" on:click=\"deleteItem(it[hashCols.gmx_id], event)\" title=\"Удалить\"></span>\r\n\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</td>\r\n\t</tr>\r\n{/each}\r\n <tr>\r\n\t<td colspan=\"{editFlag ? 2 : 3}\" class=\"no_pad\">\r\n\t   <div class=\"bottom_tabl_block\">\r\n\t\t  <div class=\"bottom_tabl_block_left\"><span on:click=\"pageTo(pageCurr - 1)\" disabled=\"{ pageCurr === 1 }\"></span></div>\r\n\t\t  <div class=\"bottom_tabl_block_middle\"> Страница {pageCurr}/{pageFrom}</div>\r\n\t\t  <div class=\"bottom_tabl_block_right\"><span on:click=\"pageTo(pageCurr + 1)\" disabled=\"{ pageFrom === pageCurr }\"></span></div>\r\n\t   </div>\r\n\t</td>\r\n </tr>\r\n</tbody>\r\n</table>\r\n\r\n<style>\r\n\r\ntable.tabl_main_cont {\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    width: 100%;\r\n    height: auto;\r\n\tborder-collapse: collapse;\r\n}\r\ntable.tabl_main_cont tr.tabl_main_cont_tr {\r\n    background: #EDF4FA;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    height: 38px;\r\n    color: #8A9BA8;\r\n}\r\n\r\ntable.tabl_main_cont tr.tabl_main_cont_tr th {\r\n    width: 50%;\r\n    text-align: left;\r\n    padding: 0 10px 0 10px;\r\n\tcursor: pointer;\r\n}\r\ntable.tabl_main_cont tr {\r\n    box-sizing: border-box;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    min-height: 38px;\r\n    height: 38px;\r\n    color: #666;\r\n}\r\ntable.tabl_main_cont tr td {\r\n    width: 50%;\r\n    text-align: left;\r\n    padding: 0 10px 0 10px;\r\n}\r\n.td_last_edit {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.td_icons_right {\r\n    display: flex;\r\n    width: 80px;\r\n    justify-content: space-between;\r\n}\r\ntable.tabl_main_cont tr td.no_pad {\r\n    padding: 0;\r\n}\r\n.bottom_tabl_block {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 50px;\r\n    border-top: 1px solid #D8E1E8;\r\n}\r\n.bottom_tabl_block_left {\r\n    background: #EDF4FA;\r\n    border-right: 1px solid #D8E1E8;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    width: 70px;\r\n    height: 50px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.bottom_tabl_block_middle {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: center;\r\n    color: #8A9BA8;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.bottom_tabl_block_right {\r\n    background: #EDF4FA;\r\n    border-left: 1px solid #D8E1E8;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    width: 70px;\r\n    height: 50px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.bottom_tabl_block_left span {\r\n    content: url(./img/left_ic.svg);\r\n}\r\n.bottom_tabl_block_right span {\r\n    content: url(./img/right_ic.svg);\r\n}\r\n.td_round span {\r\n    content: url(./img/red_ic.svg);\r\n}\r\n.td_round span.checked {\r\n    content: url(./img/green_ic.svg);\r\n}\r\n\r\n.td_icons_right span {\r\n    cursor: pointer;\r\n}\r\n.td_icons_right span.sketch_ic {\r\n    content: url(./img/sketch_ic.svg);\r\n}\r\n.td_icons_right span.delete_ic {\r\n    content: url(./img/delete_ic.svg);\r\n}\r\n.td_icons_right span.marker_ic {\r\n    content: url(./img/marker_ic.svg);\r\n}\r\n\r\nth span.sorting-desc {\r\n\tcontent: url(./img/ar_down.svg);\r\n\tmargin-left: 4px;\r\n\twidth: 8px;\r\n\theight: 6px;\r\n}\r\nth span.sorting-asc {\r\n\tcontent: url(./img/ar_down.svg);\r\n\ttransform: rotate(180deg);\r\n\tmargin-left: 4px;\r\n\twidth: 8px;\r\n\theight: 6px;\r\n}\r\n\r\n</style>\r\n",
    "\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tkey: '',\r\n\t\t\tprnt: null,\r\n\t\t\tcols: []\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tvalue: ({ key, changedParams }) => {\r\n\t\t\tlet it = changedParams ? changedParams[key] : {};\r\n\t\t\treturn it && it.value || '';\r\n\t\t},\r\n\t\tcolName: ({ key, changedParams }) => {\r\n\t\t\tlet it = changedParams ? changedParams[key] : {};\r\n\t\t\treturn it && it.field || '';\r\n\t\t},\r\n\t\tisClicked: ({ key, changedParams }) => {\r\n\t\t\tlet it = changedParams ? changedParams[key] : {};\r\n\t\t\treturn it && it.field || false;\r\n\t\t},\r\n\t\tselect: ({ key, params }) => { let it = params[key]; return it.select; },\r\n\t\tlist: ({ key, params }) => { let it = params[key]; return it.list; },\r\n\t\ttitle: ({ key, params }) => { let it = params[key]; return it.title || it.value; }\r\n\t},\r\n\tmethods: {\r\n\t\tsetSelection(val) {\r\n\t\t\tconst { key, changedParams, prnt } = this.get();\r\n // console.log(`___ setSelection ______`, key, prnt, this.props.prnt);\r\n\t\t\tchangedParams[key] = {value: '', field: val};\r\n\t\t\t// resetButton1();\r\n\t\t\tthis.set({changedParams: changedParams, recheckFlag: 1});\r\n\t\t},\r\n\t\tsetValue(val, fieldFlag) {\r\n\t\t\tconst { key, changedParams, meta, params, prnt } = this.get();\r\n // console.log(`___ setValue ______`, key, prnt);\r\n\t\t\t// let it = params[key],\r\n\t\t\t\t// meta[params[key].title]\r\n \r\n\t\t\tchangedParams[key] = {value: !fieldFlag ? val : '', field: fieldFlag ? val : ''};\r\n\t\t\tthis.set({changedParams: changedParams, recheckFlag: 1});\r\n\t\t\t// resetButton1();\r\n\t\t}\r\n\t},\r\n\tonstate({ changed, current, previous }) {\r\n// console.log('select onstate', changed, current);\r\n\t\tif (changed.meta) {\r\n\t\t// if (changed.meta && !current.changedParams[current.key] && current.meta[current.key]) {\r\n\t\t\tlet key = current.key,\r\n\t\t\t\tval = current.params[key].fieldName;\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.setSelection(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed.changedParams) {\r\n// console.log('changedParams', this.refs.submitButton)\r\n\t\t\t//\tif (this.refs.submitButton && this.refs.submitButton.textContent !== 'Создать отчеты') {\r\n\t\t}\r\n\r\n\t}\r\n};\r\n</script>\r\n\r\n<div class=\"gmx-sidebar-labeled-block\">\r\n\t<div class=\"gmx-sidebar-label\">{title}</div>\r\n\t<div>\r\n\t\t<div>\r\n\t\t\t{#if isClicked}\r\n\t\t\t\t<select on:change=\"setSelection(event.target.options[event.target.selectedIndex].value)\" ref:sel class=\"gmx-sidebar-select-with-addon\">\r\n\t\t\t\t\t{#each cols as it}\r\n\t\t\t\t\t\t<option value=\"{it}\" selected=\"{colName === it}\">{it}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\t\t\t\t<button on:click=\"setValue('')\" class=\"gmx-addon-button\" title=\"выбрать из таблицы атрибутов\"></button>\r\n\t\t\t{:elseif select}\r\n\t\t\t\t<select on:change=\"setValue(event.target.options[event.target.selectedIndex].value)\" ref:sel1 class=\"gmx-sidebar-select-with-addon\">\r\n\t\t\t\t\t{#each select as it}\r\n\t\t\t\t\t\t<option value=\"{it}\" selected=\"{value === it}\">{it}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\t\t\t\t<button on:click=\"setValue(cols[0], true)\" class=\"gmx-addon-button\" title=\"выбрать из таблицы атрибутов\"></button>\r\n\t\t\t{:else}\r\n\t\t\t\t<input on:change=\"setValue(event.target.value)\" type=\"text\" ref:inp class=\"gmx-sidebar-input-with-addon\" value=\"{value}\" list=\"{list ? title : ''}\">\r\n\t\t\t\t{#if list}\r\n\t\t\t\t\t<datalist id=\"{title}\">\r\n\t\t\t\t\t{#each list as it}\r\n\t\t\t\t\t\t<option value=\"{it}\" />\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t\t</datalist>\r\n\t\t\t\t{/if}\r\n\t\t\t\t<button on:click=\"setValue(cols[0], true)\" class=\"gmx-addon-button\" title=\"выбрать из таблицы атрибутов\"></button>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\r\n.gmx-sidebar-labeled-block {margin-top:4px;padding:0 10px;width:auto;display:grid;text-align:left}\r\n.gmx-sidebar-label {font-size:13px;line-height:31px;font-family:\"Arial\";padding-left:0px;color:#777f85}\r\n.gmx-sidebar-select ,.gmx-sidebar-select-with-addon {box-sizing:border-box;width:100px;height:33px;padding:0 8px;border-radius:3px;background-color:#f7fbff;border:1px solid #d7e1e7}\r\n.gmx-sidebar-select-with-addon {display:table-cell;float:left;width:85%;border-top-right-radius:0;border-bottom-right-radius:0;font-family:Arial;color:#5b7284;font-size:13px;font-weight:400}\r\n.gmx-sidebar-input ,.gmx-sidebar-input-with-addon {box-sizing:border-box;width:100px;height:33px;padding:0 8px;border-radius:3px;background:#FFF;border:1px solid rgba(27, 68, 97, 0.3);font-family:Arial;color:#5b7284;font-size:13px;font-weight:400}\r\n.gmx-sidebar-input-with-addon {display:table-cell;float:left;width:85%;border-top-right-radius:0;border-bottom-right-radius:0}\r\n.gmx-addon-button {padding:0 6px;box-sizing:border-box;width:15%;height:33px;display:table-cell;vertical-align:middle;background-color:#d7e1e7;border:none;border-radius:0 3px 3px 0;cursor:pointer;background:url(./list.png) no-repeat right #d8e1e8;background-position-x:50%;border-right:1px solid rgba(27, 68, 97, 0.3);border-top:1px solid rgba(27, 68, 97, 0.3);border-bottom:1px solid rgba(27, 68, 97, 0.3)}\r\n.gmx-addon-button :focus{outline:none}\r\n\r\n</style>\r\n"
  ],
  "names": [],
  "mappings": "AAgGA,wBAAwB,eAAC,CAAC,AACtB,UAAU,CAAE,OAAO,CACnB,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,SAAS,AACrC,CAAC,AACD,uCAAwB,CAAC,CAAC,eAAC,CAAC,AAC3B,WAAW,CAAE,aAAa,CAAC,CAAC,SAAS,CAAC,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,CAClH,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,AACjB,CAAC,AAED,IAAI,eAAC,CAAC,AACL,OAAO,CAAE,WAAW,CACpB,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,WAAW,CACpB,OAAO,CAAE,IAAI,CACb,YAAY,CAAE,CAAC,CACf,aAAa,CAAE,CAAC,CAChB,UAAU,CAAE,IAAI;AACjB,CAAC,AAED,SAAS,eAAC,CAAC,AACV,OAAO,CAAE,KAAK,CACd,OAAO,CAAE,IAAI,CAAC,GAAG;AAClB,CAAC,AAED,wBAAS,MAAM,CACf,wBAAS,MAAM,AAAC,CAAC,AAChB,eAAe,CAAE,IAAI;AACtB,CAAC,AAED,SAAS,SAAS,eAAC,CAAC,AACnB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,WAAW;AACpB,CAAC,AAED,SAAS,eAAC,CAAC,AACV,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI;AAC9B,CAAC,AAED,wBAAS,CAAC,SAAS,eAAC,CAAC,AAEpB,KAAK,CAAE,GAAG,CACP,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,OAAO,CACnB,WAAW,CAAE,GAAG,CAAC,KAAK,CAAC,SAAS,AACpC,CAAC,AAED,wBAAS,CAAC,SAAS,eAAC,CAAC,AAIrB,CAAC,AAED,wBAAS,CAAC,wBAAS,MAAM,CACzB,wBAAS,CAAC,wBAAS,MAAM,AAAC,CAAC,AAE3B,CAAC,AAED,wBAAS,CAAC,SAAS,SAAS,eAAC,CAAC,AAC7B,KAAK,CAAE,OAAO,CACd,gBAAgB,CAAE,WAAW,CAC7B,YAAY,CAAE,WAAW;AAC1B,CAAC,AAGD,wBAAS,CAAC,SAAS,OAAO,eAAC,CAAC,AAC3B,KAAK,CAAE,OAAO,CACd,gBAAgB,CAAE,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACxC,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACjC,CAAC,AAED,wBAAS,CAAC,cAAc,eAAC,CAAC,AACzB,UAAU,CAAE,IAAI,CAChB,uBAAuB,CAAE,CAAC,CAC1B,sBAAsB,CAAE,CAAC;AAC1B,CAAC,AAED,CAAC,SAAS,eAAC,CAAC,AACR,KAAK,CAAE,OAAO,CACjB,eAAe,CAAE,IAAI,AACtB,CAAC,AAGD,EAAE,IAAI,wBAAS,CAAC,EAAE,YAAY,SAAS,CAAC,CAAC,wBAAS,OAAO,AAAC,CAAC,AACvD,OAAO,CAAE,IAAI,gBAAgB,CAAC,CAC9B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,MAAM,CACd,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,GAAG,CACZ,YAAY,CAAE,GAAG,AACrB,CAAC,AAED,EAAE,IAAI,wBAAS,CAAC,EAAE,YAAY,SAAS,CAAC,CAAC,SAAS,sBAAO,OAAO,AAAC,CAAC,AAC9D,OAAO,CAAE,IAAI,oBAAoB,CAAC,CAClC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,MAAM,CACd,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,GAAG,CACZ,YAAY,CAAE,GAAG,AACrB,CAAC,AAED,EAAE,IAAI,wBAAS,CAAC,EAAE,WAAW,SAAS,CAAC,CAAC,wBAAS,OAAO,AAAC,CAAC,AACtD,OAAO,CAAE,IAAI,iBAAiB,CAAC,CAC/B,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,MAAM,CACd,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,GAAG,CACZ,YAAY,CAAE,GAAG,AACrB,CAAC,AAED,EAAE,IAAI,wBAAS,CAAC,EAAE,WAAW,SAAS,CAAC,CAAC,SAAS,sBAAO,OAAO,AAAC,CAAC,AAC7D,OAAO,CAAE,IAAI,qBAAqB,CAAC,CACnC,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,MAAM,CACd,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,GAAG,CACZ,YAAY,CAAE,GAAG,AACrB,CAAC;AC6MD,kBAAkB,cAAC,CAAC,AAChB,QAAQ,CAAE,QAAQ,CACrB,OAAO,CAAE,KAAK,CACX,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC3C,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,uBAAuB,cAAC,CAAC,AACrB,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,uBAAuB,cAAC,CAAC,AACrB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,AACvB,CAAC,AACD,QAAQ,cAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,IAAI,CACX,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,CACf,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,AACnB,CAAC,AACD,WAAW,cAAC,CAAC,AACT,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,AACnB,CAAC,AAID,cAAE,CAAC,AACC,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,AAC9B,CAAC,AAED,0BAA0B,cAAC,CAAC,AACxB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,AAC9B,CAAC,AAED,yCAA2B,CAAC,IAAI,cAAC,CAAC,AACjC,MAAM,CAAE,OAAO,CACf,eAAe,CAAE,IAAI,CAClB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAC1B,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,AAC9B,CAAC,AAED,MAAM,OAAO,cAAC,CAAC,AACX,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,MAAM,cAAC,CAAC,AACJ,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,AAC9B,CAAC,AASD,MAAM,cAAC,CAAC,AACJ,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,AAChC,CAAC,AACD,MAAM,cAAC,CAAC,AACJ,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,SAAS,cAAC,CAAC,AACP,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,uBAAS,CAAC,MAAM,cAAC,CAAC,AACd,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,AACpB,CAAC,AAEO,iDAAiD,AAAE,CAAC,AAC3D,MAAM,CAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,AACnB,CAAC,AAEO,gCAAgC,AAAE,CAAC,AACvC,GAAG,CAAE,MAAM,CACX,aAAa,CAAE,GAAG,CACrB,MAAM,CAAE,CAAC,AACV,CAAC,AACD,SAAS,cAAC,CAAC,AACV,OAAO,CAAE,IAAI,AACd,CAAC,AACD,UAAU,cAAC,CAAC,AACR,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,KAAK,CAClB,YAAY,CAAE,KAAK,CACnB,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,gBAAgB,cAAC,CAAC,AACd,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC3C,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,IAAI,AACf,CAAC,AACD,8BAAgB,CAAC,GAAG,cAAC,CAAC,AACrB,WAAW,CAAE,aAAa,CAAC,CAAC,SAAS,CAAC,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,CAC/G,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,IAAI,CACf,MAAM,CAAE,OAAO,AAChB,CAAC,AACD,KAAK,cAAC,CAAC,AACH,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,kCAAoB,CAAC,KAAK,cAAC,CAAC,AAC3B,GAAG,CAAE,KAAK,CACP,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,8BAAgB,CAAC,iBAAG,MAAM,AAAC,CAAC,AAC3B,KAAK,CAAE,OAAO,AACf,CAAC,AAED,8BAAgB,CAAC,YAAY,cAAC,CAAC,AAC3B,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,UAAU,CAC3C,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,OAAO,CACd,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,8BAAgB,CAAC,GAAG,cAAC,CAAC,AAClB,KAAK,CAAE,OAAO,AAElB,CAAC,AACD,8BAAgB,CAAC,iBAAG,OAAO,AAAC,CAAC,AACzB,KAAK,CAAE,MAAM,CACb,YAAY,CAAE,GAAG,CACjB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,AACZ,CAAC,AAED,qCAAuB,OAAO,AAAC,CAAC,AAC5B,OAAO,CAAE,IAAI,kBAAkB,CAAC,AACpC,CAAC,AACD,qCAAuB,MAAM,OAAO,AAAC,CAAC,AAClC,OAAO,CAAE,IAAI,sBAAsB,CAAC,AACxC,CAAC,AAOD,kCAAoB,OAAO,AAAC,CAAC,AACzB,OAAO,CAAE,IAAI,kBAAkB,CAAC,AACpC,CAAC,AACD,kCAAoB,MAAM,OAAO,AAAC,CAAC,AAClC,OAAO,CAAE,IAAI,sBAAsB,CAAC,AACrC,CAAC,AAED,QAAQ,cAAC,CAAC,AACT,MAAM,CAAE,OAAO,CACZ,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,sBAAQ,OAAO,AAAC,CAAC,AACb,OAAO,CAAE,IAAI,gBAAgB,CAAC,CAC9B,YAAY,CAAE,GAAG,CACjB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AAC9B,CAAC,AAMD,IAAI,cAAC,CAAC,AACL,KAAK,CAAE,GAAG,AACX,CAAC;ACvQD,0BAAY,CAAE,MAAM,cAAC,CAAC,AAClB,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,cAAc,cAAC,CAAC,AACZ,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,4BAAc,CAAC,IAAI,cAAC,CAAC,AACpB,MAAM,CAAE,GAAG,AACZ,CAAC,AACD,UAAU,cAAC,CAAC,AACR,SAAS,CAAE,OAAO,KAAK,CAAC,CACxB,KAAK,CAAE,IAAI,CACX,QAAQ,CAAE,QAAQ,CACrB,MAAM,CAAE,OAAO,AAChB,CAAC,AACD,wBAAU,MAAM,AAAC,CAAC,AACjB,OAAO,CAAE,SAAS,AACnB,CAAC,AACD,SAAS,cAAC,CAAC,AACV,cAAc,CAAE,IAAI,CACpB,MAAM,OAAO,CACb,OAAO,OAAO;AACf,CAAC,AAED,WAAW,cAAC,CAAC,AACT,KAAK,CAAE,IAAI,CACX,QAAQ,CAAE,QAAQ,CACrB,MAAM,CAAE,OAAO,AAChB,CAAC,AACD,yBAAW,MAAM,AAAC,CAAC,AAClB,OAAO,CAAE,QAAQ,AAClB,CAAC,AACD,eAAe,cAAC,CAAC,AAChB,WAAW,CAAE,gBAAgB,CAC1B,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,CACf,cAAc,CAAE,MAAM,CACtB,cAAc,CAAE,IAAI,CACpB,OAAO,CAAE,YAAY,CACrB,WAAW,CAAE,MAAM,CACnB,SAAS,CAAE,MAAM,CACjB,SAAS,CAAE,GAAG,CACd,sBAAsB,CAAE,WAAW,AACvC,CAAC,AAED,WAAW,cAAC,CAAC,AACT,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,IAAI,CACjB,WAAW,CAAE,OAAO,CACpB,KAAK,CAAE,OAAO,AAClB,CAAC,AAMD,qBAAqB,cAAC,CAAC,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,IAAI,CAAC,CAAC,CAAC,AAC5D,mCAAqB,CAAE,MAAM,cAAC,CAAC,QAAQ,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,AAE3D,wCAA0B,CAC1B,yBAAyB,cAAC,CAAC,AAC1B,WAAW,UAAU,CACrB,MAAM,KAAK,CACX,OAAO,IAAI,CACX,QAAQ,CAAC,CAAC,GAAG,CACb,cAAc,GAAG,CACjB,iBAAiB,OAAO,CACxB,OAAO,GAAG,CAAC,KAAK,CAAC,OAAO,CACxB,YAAY,KAAK,CACjB,UAAU,IAAI,CACd,YAAY,GAAG,CACf,MAAM,OAAO,AACd,CAAC,AAED,0BAA0B,cAAC,CAAC,AAC3B,MAAM,KAAK,CACX,OAAO,IAAI,CACX,MAAM,KAAK,CACX,aAAa,IAAI,CACjB,WAAW,GAAG,CAEd,WAAW,IAAI,CACf,cAAc,IAAI,CAClB,SAAS,MAAM,CACf,cAAc,QAAQ;AACvB,CAAC,AACD,yBAAyB,cAAC,CAAC,AAC1B,MAAM,IAAI,AACX,CAAC,AAED,2BAA2B,cAAC,CAAC,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,iBAAiB,OAAO,CAAC,cAAc,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,AAC1G,kCAAkC,cAAC,CAAC,MAAM,GAAG,CAAC,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,YAAY,IAAI,CAAC,MAAM,OAAO,CAAC,YAAY,KAAK,CAAC,MAAM,OAAO,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,YAAY,IAAI,CAAC,WAAW,IAAI,CAAC,AAEvO,wBAAwB,cAAC,CAAC,YAAY,QAAQ,CAAC,gBAAgB,QAAQ,CAAC,eAAe,IAAI,CAAC,AAC5F,qBAAqB,cAAC,CAAC,OAAO,IAAI,CAAC,YAAY,IAAI,CAAC,aAAa,IAAI,CAAC,iBAAiB,OAAO,CAAC,UAAU,IAAI,CAAC,YAAY,IAAI,CAAC,MAAM,OAAO,CAAC,YAAY,KAAK,CAAC,MAAM,OAAO,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,WAAW,IAAI,CAAC,cAAc,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,AACzP,0BAA0B,cAAC,CAAC,WAAW,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ,IAAI,CAAC,WAAW,IAAI,CAAC,AAClG,sBAAsB,cAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,AACvC,sBAAsB,cAAC,CAAC,MAAM,IAAI,CAAC,OAAO,GAAG,CAAC,iBAAiB,OAAO,CAAC,SAAS,MAAM,CAAC,AAEvF,sCAAwB,CAAE,MAAM,cAAC,CAAC,AACjC,OAAO,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CACtC,QAAQ,GAAG,CAAC,gBAAgB,IAAI,CAChC,mBAAmB,IAAI,CAAC,WAAW,IAAI,CACvC,WAAW,IAAI,eAAe,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CACpD,sBAAsB,GAAG;AAC1B,CAAC,AACD,sCAAwB,CAAE,MAAM,CAAC,eAAe,CAAC,MAAM,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AAG1F,8BAA8B,cAAC,CAAC,MAAM,IAAI,CAAC,OAAO,IAAI,CAAC,AACvD,4CAA8B,CAAE,MAAM,cAAC,CAAC,QAAQ,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,WAAW,IAAI,CAAC,YAAY,KAAK,CAAC,MAAM,OAAO,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,YAAY,QAAQ,CAAC,WAAW,MAAM,CAAC,OAAO,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,IAAI,iBAAiB,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,oBAAoB,EAAE,CAAC,aAAa,IAAI,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,AAEnW,wBAAwB,cAAC,CAAC,AACzB,MAAM,IAAI,CACV,WAAW,IAAI,CACf,OAAO,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CACtC,YAAY,KAAK,CACjB,MAAM,OAAO,CACb,UAAU,IAAI,CACd,YAAY,GAAG,CACf,YAAY,QAAQ,CACpB,WAAW,IAAI;AAChB,CAAC,AACD,gCAAkB,CAAE,uCAAyB,CAAE,wBAAwB,cAAC,CAAC,UAAU,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,OAAO,CAAC,aAAa,GAAG,CAAC,MAAM,OAAO,CAAC,AAC5J,yBAAyB,cAAC,CAAC,UAAU,IAAI,CAAC,YAAY,KAAK,CAAC,MAAM,OAAO,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,YAAY,QAAQ,CAAC,WAAW,IAAI,CAAC,IAAI,IAAI,CAAC,SAAS,QAAQ,CAAC,eAAe,IAAI,CAAC,aAAa,IAAI,CAAC,AAC/M,wBAAwB,cAAC,CAAC,UAAU,IAAI,CAAC,AAEzC,iCAAmB,CAAE,yCAA2B,CAAE,uCAAyB,CAAE,4BAA4B,cAAC,CAAC,cAAc,GAAG,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,OAAO,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,OAAO,CAAC,iBAAiB,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,IAAI,CAAC,MAAM,IAAI,CAAC,YAAY,KAAK,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,AAC9R,iCAAmB,CAAC,MAAM,CAAqE,0CAA4B,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,AAChJ,2BAA2B,cAAC,CAAC,WAAW,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,AAC/E,yBAAyB,cAAC,CAAC,MAAM,GAAG,CAAC,AACrC,4BAA4B,cAAC,CAAC,eAAe,IAAI,CAAC,iBAAiB,OAAO,CAAC,OAAO,OAAO,CAAC;AC/c1F,gBAAgB,cAAC,CAAC,AACd,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC3C,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,UAAU,CAC3B,WAAW,CAAE,IAAI,AACrB,CAAC,AACD,8BAAgB,CAAC,GAAG,cAAC,CAAC,AAClB,WAAW,CAAE,aAAa,CAAC,CAAC,SAAS,CAAC,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,AACtH,CAAC,AACD,8BAAgB,CAAC,GAAG,CAAC,MAAM,cAAC,CAAC,AACzB,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,UAAU,cAAC,CAAC,AACR,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,aAAa,cAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC3B,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,iBAAiB,cAAC,CAAC,AACf,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,AAClB,CAAC,AACD,mBAAmB,cAAC,CAAC,AACjB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,UAAU,CAC3B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC3B,aAAa,CAAE,KAAK,CACpB,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,qBAAqB,cAAC,CAAC,AACnB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,CAAC,CACV,OAAO,CAAE,CAAC,CACV,YAAY,CAAE,IAAI,CAClB,GAAG,CAAE,GAAG,AACZ,CAAC,AACD,kBAAkB,cAAC,CAAC,AAChB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,AAClB,CAAC,AACD,OAAO,mBAAmB,cAAC,CAAC,AACxB,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,OAAO,cAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,AAC9B,CAAC,AAgBD,KAAK,aAAa,cAAC,CAAC,AAChB,KAAK,CAAE,GAAG,CACV,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,KAAK,eAAe,cAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,KAAK,CAAE,OAAO,AAClB,CAAC,AAID,YAAY,cAAC,CAAC,AACV,OAAO,CAAE,IAAI,qBAAqB,CAAC,AACvC,CAAC,AACD,UAAU,cAAC,CAAC,AACR,OAAO,CAAE,IAAI,wBAAwB,CAAC,AAC1C,CAAC,AACD,WAAW,cAAC,CAAC,AACT,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC7B,WAAW,CAAE,MAAM,AACvB,CAAC,AACD,gBAAgB,cAAC,CAAC,AACd,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,GAAG,CACnB,KAAK,CAAE,GAAG,CACV,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC/B,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,iBAAiB,cAAC,CAAC,AACf,KAAK,CAAE,OAAO,CACd,KAAK,CAAE,GAAG,CACV,eAAe,CAAE,MAAM,CACvB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,oBAAoB,cAAC,CAAC,AACrB,QAAQ,CAAE,QAAQ,CACf,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC3C,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,KAAK,cAAC,CAAC,AACH,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,KAAK,CACjB,oBAAoB,CAAE,SAAS,CAC/B,MAAM,CAAE,OAAO,CACf,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,yBAAyB,cAAC,CAAC,AACvB,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,AAClB,CAAC,AACD,2BAAa,CAAC,oBAAoB,cAAC,CAAC,AACnC,OAAO,CAAE,IAAI,AACd,CAAC,AAKD,MAAM,cAAC,CAAC,AACP,gBAAgB,CAAE,UAAU,AAC7B,CAAC,AACD,SAAS,cAAC,CAAC,AACP,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,SAAS,cAAC,CAAC,AACP,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AACjC,CAAC,AAED,IAAI,cAAC,CAAC,AACF,OAAO,CAAE,WAAW,CACpB,OAAO,CAAE,YAAY,CACrB,OAAO,CAAE,WAAW,CACpB,OAAO,CAAE,IAAI,CACb,YAAY,CAAE,CAAC,CACf,aAAa,CAAE,CAAC,CAChB,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,uBAAS,CAAC,SAAS,cAAC,CAAC,AACjB,KAAK,CAAE,GAAG,CACV,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,OAAO,CACnB,WAAW,CAAE,GAAG,CAAC,KAAK,CAAC,SAAS,AACpC,CAAC,AAQD,EAAE,SAAS,KAAK,cAAC,CAAC,AACjB,SAAS,CAAE,IAAI,AAChB,CAAC,AAED,SAAS,cAAC,CAAC,AACP,OAAO,CAAE,KAAK,CACd,OAAO,CAAE,IAAI,CAAC,GAAG,AACrB,CAAC,AAED,CAAC,SAAS,GAAG,cAAC,CAAC,AACX,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,IAAI,AACrB,CAAC,AAOO,+DAA+D,AAAE,CAAC,AACtE,QAAQ,CAAE,MAAM,CAChB,SAAS,CAAE,KAAK,AACpB,CAAC,AAED,sBAAsB,cAAC,CAAC,AACpB,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,IAAI,CAAC,IAAI,AACrB,CAAC,AAED,CAAC,SAAS,GAAG,cAAC,CAAC,AACX,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,IAAI,CACjB,eAAe,CAAE,IAAI,CACrB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,CAAC,SAAS,GAAG,OAAO,cAAC,CAAC,AAClB,KAAK,CAAE,OAAO,CACd,gBAAgB,CAAE,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACxC,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACpC,CAAC,AAED,GAAG,OAAO,cAAC,CAAC,AACR,gBAAgB,CAAE,WAAW,CAC7B,OAAO,CAAE,IAAI,CAAC,GAAG,AACrB,CAAC,AAED,aAAa,cAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC3B,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,OAAO,cAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAC3B,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,GAAG,AACnB,CAAC,AAED,MAAM,mBAAmB,cAAC,CAAC,AACvB,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,CAAC,CAAC,KAAK,CAAC,SAAS,CACzB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,QAAQ,CAAE,MAAM,CAChB,aAAa,CAAE,QAAQ,CACvB,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,UAAU,CAAE,OAAO,CACnB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,IAAI,CACX,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,aAAa,CAAE,QAAQ,CACvB,QAAQ,CAAE,MAAM,CAChB,QAAQ,CAAE,QAAQ,CAClB,IAAI,CAAE,GAAG,AACb,CAAC,AAED,KAAK,eAAe,cAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,IAAI,CAAE,GAAG,CACT,QAAQ,CAAE,QAAQ,CAClB,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,kBAAkB,cAAC,CAAC,AAChB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,GAAG,QAAQ,cAAC,CAAC,AACT,OAAO,CAAE,IAAI,CAAC,IAAI,AACtB,CAAC;AC1TD,KAAK,QAAQ,cAAC,CAAC,AACX,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,KAAK,CAAE,OAAO,CACd,YAAY,CAAE,GAAG,AACrB,CAAC,AAED,MAAM,OAAO,cAAC,CAAC,AACX,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,KAAK,CAAE,OAAO,AAClB,CAAC,AAGD,IAAI,WAAW,cAAC,CAAC,AACb,OAAO,CAAE,IAAI,gBAAgB,CAAC,CACjC,MAAM,CAAE,OAAO,CACZ,IAAI,CAAE,IAAI,CACV,QAAQ,CAAE,QAAQ,AACtB,CAAC,AAED,mBAAmB,cAAC,CAAC,AACjB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,MAAM,CACnB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,KAAK,CACjB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,CACd,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,AAC9B,CAAC,AAED,kBAAkB,cAAC,CAAC,AAChB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,CACd,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,AAC9B,CAAC,AAGD,gBAAgB,cAAC,CAAC,AACd,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC3C,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,UAAU,CAC3B,WAAW,CAAE,UAAU,AAC3B,CAAC,AAED,gBAAgB,cAAC,CAAC,AACd,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,GAAG,CACnB,KAAK,CAAE,GAAG,CACV,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC/B,MAAM,CAAE,OAAO,CACf,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,WAAW,CAAE,GAAG,AACpB,CAAC,AAED,iBAAiB,cAAC,CAAC,AACf,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,KAAK,CAAE,GAAG,CACV,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,OAAO,CACf,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,WAAW,CAAE,GAAG,AACpB,CAAC,AAGD,WAAW,cAAC,CAAC,AACT,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC7B,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,IAAI,AACpB,CAAC,AASD,UAAU,cAAC,CAAC,AACR,cAAc,CAAE,IAAI,CACpB,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,CAAC,CACP,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,YAAY,CAAE,IAAI,AACtB,CAAC,AAoCD,OAAO,cAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,AAC9B,CAAC,AACD,qBAAO,CAAC,oBAAM,CAAE,qBAAO,CAAC,KAAK,cAAC,CAAC,AAC3B,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,aAAa,cAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAE9B,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC3B,UAAU,CAAE,IAAI,AACpB,CAAC;ACswBD,eAAE,CAAC,AACC,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,AAC9B,CAAC,AAEO,6CAA6C,AAAE,CAAC,AACpD,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,CAAC,AACd,CAAC,AAED,UAAU,eAAC,CAAC,AACR,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,GAAG,CACR,IAAI,CAAE,CAAC,CACP,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,YAAY,CAAE,IAAI,AACtB,CAAC,AAED,KAAK,qBAAqB,eAAC,CAAC,AACxB,WAAW,CAAE,aAAa,CAAC,CAAC,SAAS,CAAC,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,AACtH,CAAC,AAED,aAAa,eAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC3B,UAAU,CAAE,CAAC,CACb,MAAM,CAAE,GAAG,CACX,QAAQ,CAAE,QAAQ,CAClB,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,OAAO,eAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC1B,aAAa,CAAE,GAAG,CAClB,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,OAAO,KAAK,eAAC,CAAC,AACV,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,OAAO,KAAK,MAAM,eAAC,CAAC,AAChB,WAAW,CAAE,MAAM,AACvB,CAAC,AAED,WAAW,eAAC,CAAC,AACT,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,CAC9B,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC7B,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,iBAAiB,eAAC,CAAC,AACf,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,KAAK,CAAE,GAAG,CACV,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,OAAO,CACf,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,WAAW,CAAE,GAAG,AACpB,CAAC,AAED,gBAAgB,eAAC,CAAC,AACd,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,GAAG,CACnB,KAAK,CAAE,GAAG,CACV,eAAe,CAAE,MAAM,CACvB,WAAW,CAAE,MAAM,CACnB,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC/B,MAAM,CAAE,OAAO,CACf,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,WAAW,CAAE,GAAG,AACpB,CAAC,AAUD,gBAAgB,eAAC,CAAC,AACd,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,UAAU,CAC3B,WAAW,CAAE,IAAI,AACrB,CAAC,AACD,+BAAgB,CAAC,GAAG,eAAC,CAAC,AAClB,WAAW,CAAE,aAAa,CAAC,CAAC,SAAS,CAAC,CAAC,kBAAkB,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,CAAC,CAAC,UAAU,AACtH,CAAC,AACD,UAAU,eAAC,CAAC,AACR,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,iBAAiB,eAAC,CAAC,AACf,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,AAClB,CAAC,AACD,mBAAmB,eAAC,CAAC,AACjB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,UAAU,CAC3B,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAC3B,aAAa,CAAE,KAAK,CACpB,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,qBAAqB,eAAC,CAAC,AACnB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,CAAC,CACV,OAAO,CAAE,CAAC,CACV,YAAY,CAAE,IAAI,CAClB,GAAG,CAAE,GAAG,AACZ,CAAC,AACD,kBAAkB,eAAC,CAAC,AAChB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,AAClB,CAAC,AAED,8BAA8B,eAAC,CAAC,AAC5B,WAAW,CAAE,GAAG,CAChB,YAAY,CAAE,GAAG,CACjB,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,KAAK,QAAQ,eAAC,CAAC,AACX,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,KAAK,aAAa,eAAC,CAAC,AAChB,KAAK,CAAE,GAAG,CACV,UAAU,CAAE,IAAI,CAEhB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,KAAK,eAAe,eAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAEhB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,YAAY,CAAE,IAAI,CAClB,WAAW,CAAE,IAAI,CACjB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,WAAW,CAAE,eAAe,CAAC,CAAC,UAAU,CACxC,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,YAAY,eAAC,CAAC,AACb,UAAU,CAAE,KAAK,AAClB,CAAC,AACD,2BAAY,CAAC,KAAK,eAAC,CAAC,AACnB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,MAAM,AACnB,CAAC,AAED,mCAAoB,CAAC,IAAI,eAAC,CAAC,AACvB,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,YAAY,eAAC,CAAC,AACV,OAAO,CAAE,IAAI,qBAAqB,CAAC,AACvC,CAAC,AACD,UAAU,eAAC,CAAC,AACR,OAAO,CAAE,IAAI,wBAAwB,CAAC,AAC1C,CAAC,AACD,oBAAoB,eAAC,CAAC,AACrB,QAAQ,CAAE,QAAQ,CACf,OAAO,CAAE,KAAK,CAEd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAC3C,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,KAAK,eAAC,CAAC,AACH,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,KAAK,CACjB,oBAAoB,CAAE,SAAS,CAC/B,MAAM,CAAE,OAAO,CACf,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,yBAAyB,eAAC,CAAC,AACvB,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,KAAK,AAClB,CAAC,AACD,4BAAa,CAAC,oBAAoB,eAAC,CAAC,AACnC,OAAO,CAAE,IAAI,AACd,CAAC,AACD,4BAAa,CAAC,KAAK,MAAM,CAAC,oBAAoB,eAAC,CAAC,AAC/C,OAAO,CAAE,KAAK,AACf,CAAC,AAED,MAAM,eAAC,CAAC,AACP,gBAAgB,CAAE,UAAU,AAC7B,CAAC,AACD,SAAS,eAAC,CAAC,AACP,OAAO,CAAE,IAAI,AACjB,CAAC,AAED,4BAAa,CAAC,MAAM,eAAC,CAAC,AAClB,KAAK,CAAE,IAAI,CAEX,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,KAAK,CAAE,OAAO,AAElB,CAAC,AAED,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,eAAC,CAAC,AACnB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CAC1B,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,KAAK,CAAC,IAAI,CAAC,SAAS,gBAAC,2BAA2B,AAAC,CAAC,AAC9C,kBAAkB,CAAE,IAAI,CACxB,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,IAAI,WAAW,eAAC,CAAC,AACb,OAAO,CAAE,IAAI,gBAAgB,CAAC,CACjC,MAAM,CAAE,OAAO,CACZ,IAAI,CAAE,IAAI,CACV,QAAQ,CAAE,QAAQ,AACtB,CAAC,AACD,uBAAQ,CAAC,kBAAkB,eAAC,CAAC,AACzB,OAAO,CAAE,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,AAC/B,CAAC,AAED,yBAAyB,eAAC,CAAC,AAC1B,WAAW,UAAU,CACrB,MAAM,IAAI,CACV,OAAO,IAAI,CACX,QAAQ,CAAC,CAAC,GAAG,CACb,cAAc,GAAG,CACjB,UAAU,CAAE,WAAW,CACvB,OAAO,GAAG,CAAC,KAAK,CAAC,OAAO,CACxB,YAAY,KAAK,CACjB,UAAU,IAAI,CACd,YAAY,GAAG,CACf,MAAM,OAAO,AACd,CAAC;ACntCD,KAAK,eAAe,aAAC,CAAC,AAClB,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACf,eAAe,CAAE,QAAQ,AAC1B,CAAC,AACD,KAAK,4BAAe,CAAC,EAAE,kBAAkB,aAAC,CAAC,AACvC,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,KAAK,4BAAe,CAAC,EAAE,kBAAkB,CAAC,EAAE,aAAC,CAAC,AAC1C,KAAK,CAAE,GAAG,CACV,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CACzB,MAAM,CAAE,OAAO,AAChB,CAAC,AACD,KAAK,4BAAe,CAAC,EAAE,aAAC,CAAC,AACrB,UAAU,CAAE,UAAU,CACtB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,IAAI,AACf,CAAC,AACD,KAAK,4BAAe,CAAC,EAAE,CAAC,EAAE,aAAC,CAAC,AACxB,KAAK,CAAE,GAAG,CACV,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,AAC1B,CAAC,AACD,aAAa,aAAC,CAAC,AACX,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,AACvB,CAAC,AACD,eAAe,aAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,IAAI,CACX,eAAe,CAAE,aAAa,AAClC,CAAC,AACD,KAAK,4BAAe,CAAC,EAAE,CAAC,EAAE,OAAO,aAAC,CAAC,AAC/B,OAAO,CAAE,CAAC,AACd,CAAC,AACD,kBAAkB,aAAC,CAAC,AAChB,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,aAAa,CAC9B,WAAW,CAAE,MAAM,CACnB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACjC,CAAC,AACD,uBAAuB,aAAC,CAAC,AACrB,UAAU,CAAE,OAAO,CACnB,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC/B,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,UAAU,CAAE,UAAU,CACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AAC3B,CAAC,AACD,yBAAyB,aAAC,CAAC,AACvB,UAAU,CAAE,MAAM,CAClB,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AAC3B,CAAC,AACD,wBAAwB,aAAC,CAAC,AACtB,UAAU,CAAE,OAAO,CACnB,WAAW,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC9B,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,UAAU,CAAE,UAAU,CACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AAC3B,CAAC,AACD,oCAAuB,CAAC,IAAI,aAAC,CAAC,AAC1B,OAAO,CAAE,IAAI,iBAAiB,CAAC,AACnC,CAAC,AACD,qCAAwB,CAAC,IAAI,aAAC,CAAC,AAC3B,OAAO,CAAE,IAAI,kBAAkB,CAAC,AACpC,CAAC,AACD,sBAAS,CAAC,IAAI,aAAC,CAAC,AACZ,OAAO,CAAE,IAAI,gBAAgB,CAAC,AAClC,CAAC,AACD,sBAAS,CAAC,IAAI,QAAQ,aAAC,CAAC,AACpB,OAAO,CAAE,IAAI,kBAAkB,CAAC,AACpC,CAAC,AAED,4BAAe,CAAC,IAAI,aAAC,CAAC,AAClB,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,4BAAe,CAAC,IAAI,UAAU,aAAC,CAAC,AAC5B,OAAO,CAAE,IAAI,mBAAmB,CAAC,AACrC,CAAC,AACD,4BAAe,CAAC,IAAI,UAAU,aAAC,CAAC,AAC5B,OAAO,CAAE,IAAI,mBAAmB,CAAC,AACrC,CAAC,AACD,4BAAe,CAAC,IAAI,UAAU,aAAC,CAAC,AAC5B,OAAO,CAAE,IAAI,mBAAmB,CAAC,AACrC,CAAC,AAED,eAAE,CAAC,IAAI,aAAa,aAAC,CAAC,AACrB,OAAO,CAAE,IAAI,iBAAiB,CAAC,CAC/B,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,GAAG,AACZ,CAAC,AACD,eAAE,CAAC,IAAI,YAAY,aAAC,CAAC,AACpB,OAAO,CAAE,IAAI,iBAAiB,CAAC,CAC/B,SAAS,CAAE,OAAO,MAAM,CAAC,CACzB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,GAAG,AACZ,CAAC;AClOD,0BAA0B,cAAC,CAAC,WAAW,GAAG,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,QAAQ,IAAI,CAAC,WAAW,IAAI,CAAC,AAClG,kBAAkB,cAAC,CAAC,UAAU,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,OAAO,CAAC,aAAa,GAAG,CAAC,MAAM,OAAO,CAAC,AACvG,iCAAmB,CAAE,8BAA8B,cAAC,CAAC,WAAW,UAAU,CAAC,MAAM,KAAK,CAAC,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,cAAc,GAAG,CAAC,iBAAiB,OAAO,CAAC,OAAO,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,AACrL,8BAA8B,cAAC,CAAC,QAAQ,UAAU,CAAC,MAAM,IAAI,CAAC,MAAM,GAAG,CAAC,wBAAwB,CAAC,CAAC,2BAA2B,CAAC,CAAC,YAAY,KAAK,CAAC,MAAM,OAAO,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,AAC9L,gCAAkB,CAAE,6BAA6B,cAAC,CAAC,WAAW,UAAU,CAAC,MAAM,KAAK,CAAC,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,cAAc,GAAG,CAAC,WAAW,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,YAAY,KAAK,CAAC,MAAM,OAAO,CAAC,UAAU,IAAI,CAAC,YAAY,GAAG,CAAC,AACvP,6BAA6B,cAAC,CAAC,QAAQ,UAAU,CAAC,MAAM,IAAI,CAAC,MAAM,GAAG,CAAC,wBAAwB,CAAC,CAAC,2BAA2B,CAAC,CAAC,AAC9H,iBAAiB,cAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,WAAW,UAAU,CAAC,MAAM,GAAG,CAAC,OAAO,IAAI,CAAC,QAAQ,UAAU,CAAC,eAAe,MAAM,CAAC,iBAAiB,OAAO,CAAC,OAAO,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,OAAO,CAAC,WAAW,IAAI,UAAU,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,sBAAsB,GAAG,CAAC,aAAa,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC"
}