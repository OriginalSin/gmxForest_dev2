{"version":3,"file":"gmxForest_dev2.js","sources":["../node_modules/svelte/shared.js","../src/Config.js","../src/EditorLib.js","../src/Popup.html","../src/Requests.js","../src/CreateSite.html","../src/Snapping.html","../src/Table.html","../src/Sites.html","../src/SelectInput.html","../src/Report.html","../src/App.html"],"sourcesContent":["function noop() {}\n\nfunction assign(tar, src) {\n\tfor (var k in src) tar[k] = src[k];\n\treturn tar;\n}\n\nfunction assignTrue(tar, src) {\n\tfor (var k in src) tar[k] = 1;\n\treturn tar;\n}\n\nfunction isPromise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nfunction callAfter(fn, i) {\n\tif (i === 0) fn();\n\treturn () => {\n\t\tif (!--i) fn();\n\t};\n}\n\nfunction addLoc(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nfunction exclude(src, prop) {\n\tconst tar = {};\n\tfor (const k in src) k === prop || (tar[k] = src[k]);\n\treturn tar;\n}\n\nfunction run(fn) {\n\tfn();\n}\n\nfunction append(target, node) {\n\ttarget.appendChild(node);\n}\n\nfunction insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detachNode(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detachBetween(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detachBefore(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detachAfter(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction reinsertBetween(before, after, target) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\ttarget.appendChild(before.parentNode.removeChild(before.nextSibling));\n\t}\n}\n\nfunction reinsertChildren(parent, target) {\n\twhile (parent.firstChild) target.appendChild(parent.firstChild);\n}\n\nfunction reinsertAfter(before, target) {\n\twhile (before.nextSibling) target.appendChild(before.nextSibling);\n}\n\nfunction reinsertBefore(after, target) {\n\tvar parent = after.parentNode;\n\twhile (parent.firstChild !== after) target.appendChild(parent.firstChild);\n}\n\nfunction destroyEach(iterations, detach) {\n\tfor (var i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detach);\n\t}\n}\n\nfunction createFragment() {\n\treturn document.createDocumentFragment();\n}\n\nfunction createElement(name) {\n\treturn document.createElement(name);\n}\n\nfunction createSvgElement(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction createText(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction createComment() {\n\treturn document.createComment('');\n}\n\nfunction addListener(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n}\n\nfunction removeListener(node, event, handler, options) {\n\tnode.removeEventListener(event, handler, options);\n}\n\nfunction setAttribute(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse node.setAttribute(attribute, value);\n}\n\nfunction setAttributes(node, attributes) {\n\tfor (var key in attributes) {\n\t\tif (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key in node) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tsetAttribute(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\nfunction setCustomElementData(node, prop, value) {\n\tif (prop in node) {\n\t\tnode[prop] = value;\n\t} else {\n\t\tsetAttribute(node, prop, value);\n\t}\n}\n\nfunction setXlinkAttribute(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction getBindingGroupValue(group) {\n\tvar value = [];\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction toNumber(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction timeRangesToArray(ranges) {\n\tvar array = [];\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children (element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claimElement (nodes, name, attributes, svg) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (var j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tvar attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? createSvgElement(name) : createElement(name);\n}\n\nfunction claimText (nodes, data) {\n\tfor (var i = 0; i < nodes.length; i += 1) {\n\t\tvar node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn createText(data);\n}\n\nfunction setData(text, data) {\n\ttext.data = '' + data;\n}\n\nfunction setInputType(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {}\n}\n\nfunction setStyle(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction selectOption(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction selectOptions(select, value) {\n\tfor (var i = 0; i < select.options.length; i += 1) {\n\t\tvar option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction selectValue(select) {\n\tvar selectedOption = select.querySelector(':checked') || select.options[0];\n\treturn selectedOption && selectedOption.__value;\n}\n\nfunction selectMultipleValue(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), function(option) {\n\t\treturn option.__value;\n\t});\n}\n\nfunction addResizeListener(element, fn) {\n\tif (getComputedStyle(element).position === 'static') {\n\t\telement.style.position = 'relative';\n\t}\n\n\tconst object = document.createElement('object');\n\tobject.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n\tobject.type = 'text/html';\n\n\tlet win;\n\n\tobject.onload = () => {\n\t\twin = object.contentDocument.defaultView;\n\t\twin.addEventListener('resize', fn);\n\t};\n\n\tif (/Trident/.test(navigator.userAgent)) {\n\t\telement.appendChild(object);\n\t\tobject.data = 'about:blank';\n\t} else {\n\t\tobject.data = 'about:blank';\n\t\telement.appendChild(object);\n\t}\n\n\treturn {\n\t\tcancel: () => {\n\t\t\twin && win.removeEventListener && win.removeEventListener('resize', fn);\n\t\t\telement.removeChild(object);\n\t\t}\n\t};\n}\n\nfunction toggleClass(element, name, toggle) {\n\telement.classList[toggle ? 'add' : 'remove'](name);\n}\n\nfunction linear(t) {\n\treturn t;\n}\n\nfunction generateRule({ a, b, delta, duration }, ease, fn) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + delta * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\n\treturn keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n}\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction wrapTransition(component, node, fn, params, intro) {\n\tlet obj = fn.call(component, node, params);\n\tlet duration;\n\tlet ease;\n\tlet cssText;\n\n\tlet initialised = false;\n\n\treturn {\n\t\tt: intro ? 0 : 1,\n\t\trunning: false,\n\t\tprogram: null,\n\t\tpending: null,\n\n\t\trun(b, callback) {\n\t\t\tif (typeof obj === 'function') {\n\t\t\t\ttransitionManager.wait().then(() => {\n\t\t\t\t\tobj = obj();\n\t\t\t\t\tthis._run(b, callback);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis._run(b, callback);\n\t\t\t}\n\t\t},\n\n\t\t_run(b, callback) {\n\t\t\tduration = obj.duration || 300;\n\t\t\tease = obj.easing || linear;\n\n\t\t\tconst program = {\n\t\t\t\tstart: window.performance.now() + (obj.delay || 0),\n\t\t\t\tb,\n\t\t\t\tcallback: callback || noop\n\t\t\t};\n\n\t\t\tif (intro && !initialised) {\n\t\t\t\tif (obj.css && obj.delay) {\n\t\t\t\t\tcssText = node.style.cssText;\n\t\t\t\t\tnode.style.cssText += obj.css(0, 1);\n\t\t\t\t}\n\n\t\t\t\tif (obj.tick) obj.tick(0, 1);\n\t\t\t\tinitialised = true;\n\t\t\t}\n\n\t\t\tif (!b) {\n\t\t\t\tprogram.group = outros.current;\n\t\t\t\toutros.current.remaining += 1;\n\t\t\t}\n\n\t\t\tif (obj.delay) {\n\t\t\t\tthis.pending = program;\n\t\t\t} else {\n\t\t\t\tthis.start(program);\n\t\t\t}\n\n\t\t\tif (!this.running) {\n\t\t\t\tthis.running = true;\n\t\t\t\ttransitionManager.add(this);\n\t\t\t}\n\t\t},\n\n\t\tstart(program) {\n\t\t\tcomponent.fire(`${program.b ? 'intro' : 'outro'}.start`, { node });\n\n\t\t\tprogram.a = this.t;\n\t\t\tprogram.delta = program.b - program.a;\n\t\t\tprogram.duration = duration * Math.abs(program.b - program.a);\n\t\t\tprogram.end = program.start + program.duration;\n\n\t\t\tif (obj.css) {\n\t\t\t\tif (obj.delay) node.style.cssText = cssText;\n\n\t\t\t\tconst rule = generateRule(program, ease, obj.css);\n\t\t\t\ttransitionManager.addRule(rule, program.name = '__svelte_' + hash(rule));\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))\n\t\t\t\t\t.concat(`${program.name} ${program.duration}ms linear 1 forwards`)\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tthis.program = program;\n\t\t\tthis.pending = null;\n\t\t},\n\n\t\tupdate(now) {\n\t\t\tconst program = this.program;\n\t\t\tif (!program) return;\n\n\t\t\tconst p = now - program.start;\n\t\t\tthis.t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (obj.tick) obj.tick(this.t, 1 - this.t);\n\t\t},\n\n\t\tdone() {\n\t\t\tconst program = this.program;\n\t\t\tthis.t = program.b;\n\n\t\t\tif (obj.tick) obj.tick(this.t, 1 - this.t);\n\n\t\t\tcomponent.fire(`${program.b ? 'intro' : 'outro'}.end`, { node });\n\n\t\t\tif (!program.b && !program.invalidated) {\n\t\t\t\tprogram.group.callbacks.push(() => {\n\t\t\t\t\tprogram.callback();\n\t\t\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\t\t});\n\n\t\t\t\tif (--program.group.remaining === 0) {\n\t\t\t\t\tprogram.group.callbacks.forEach(run);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (obj.css) transitionManager.deleteRule(node, program.name);\n\t\t\t}\n\n\t\t\tthis.running = !!this.pending;\n\t\t},\n\n\t\tabort(reset) {\n\t\t\tif (this.program) {\n\t\t\t\tif (reset && obj.tick) obj.tick(1, 0);\n\t\t\t\tif (obj.css) transitionManager.deleteRule(node, this.program.name);\n\t\t\t\tthis.program = this.pending = null;\n\t\t\t\tthis.running = false;\n\t\t\t}\n\t\t},\n\n\t\tinvalidate() {\n\t\t\tif (this.program) {\n\t\t\t\tthis.program.invalidated = true;\n\t\t\t}\n\t\t}\n\t};\n}\n\nlet outros = {};\n\nfunction groupOutros() {\n\toutros.current = {\n\t\tremaining: 0,\n\t\tcallbacks: []\n\t};\n}\n\nvar transitionManager = {\n\trunning: false,\n\ttransitions: [],\n\tbound: null,\n\tstylesheet: null,\n\tactiveRules: {},\n\tpromise: null,\n\n\tadd(transition) {\n\t\tthis.transitions.push(transition);\n\n\t\tif (!this.running) {\n\t\t\tthis.running = true;\n\t\t\trequestAnimationFrame(this.bound || (this.bound = this.next.bind(this)));\n\t\t}\n\t},\n\n\taddRule(rule, name) {\n\t\tif (!this.stylesheet) {\n\t\t\tconst style = createElement('style');\n\t\t\tdocument.head.appendChild(style);\n\t\t\ttransitionManager.stylesheet = style.sheet;\n\t\t}\n\n\t\tif (!this.activeRules[name]) {\n\t\t\tthis.activeRules[name] = true;\n\t\t\tthis.stylesheet.insertRule(`@keyframes ${name} ${rule}`, this.stylesheet.cssRules.length);\n\t\t}\n\t},\n\n\tnext() {\n\t\tthis.running = false;\n\n\t\tconst now = window.performance.now();\n\t\tlet i = this.transitions.length;\n\n\t\twhile (i--) {\n\t\t\tconst transition = this.transitions[i];\n\n\t\t\tif (transition.program && now >= transition.program.end) {\n\t\t\t\ttransition.done();\n\t\t\t}\n\n\t\t\tif (transition.pending && now >= transition.pending.start) {\n\t\t\t\ttransition.start(transition.pending);\n\t\t\t}\n\n\t\t\tif (transition.running) {\n\t\t\t\ttransition.update(now);\n\t\t\t\tthis.running = true;\n\t\t\t} else if (!transition.pending) {\n\t\t\t\tthis.transitions.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.running) {\n\t\t\trequestAnimationFrame(this.bound);\n\t\t} else if (this.stylesheet) {\n\t\t\tlet i = this.stylesheet.cssRules.length;\n\t\t\twhile (i--) this.stylesheet.deleteRule(i);\n\t\t\tthis.activeRules = {};\n\t\t}\n\t},\n\n\tdeleteRule(node, name) {\n\t\tnode.style.animation = node.style.animation\n\t\t\t.split(', ')\n\t\t\t.filter(anim => anim && anim.indexOf(name) === -1)\n\t\t\t.join(', ');\n\t},\n\n\twait() {\n\t\tif (!transitionManager.promise) {\n\t\t\ttransitionManager.promise = Promise.resolve();\n\t\t\ttransitionManager.promise.then(() => {\n\t\t\t\ttransitionManager.promise = null;\n\t\t\t});\n\t\t}\n\n\t\treturn transitionManager.promise;\n\t}\n};\n\nfunction wrapAnimation(node, from, fn, params) {\n\tif (!from) return;\n\n\tconst to = node.getBoundingClientRect();\n\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) return;\n\n\tconst info = fn(node, { from, to }, params);\n\n\tconst duration = 'duration' in info ? info.duration : 300;\n\tconst delay = 'delay' in info ? info.delay : 0;\n\tconst ease = info.easing || linear;\n\tconst start = window.performance.now() + delay;\n\tconst end = start + duration;\n\n\tconst program = {\n\t\ta: 0,\n\t\tt: 0,\n\t\tb: 1,\n\t\tdelta: 1,\n\t\tduration,\n\t\tstart,\n\t\tend\n\t};\n\n\tconst cssText = node.style.cssText;\n\n\tconst animation = {\n\t\tpending: delay ? program : null,\n\t\tprogram: delay ? null : program,\n\t\trunning: true,\n\n\t\tstart() {\n\t\t\tif (info.css) {\n\t\t\t\tif (delay) node.style.cssText = cssText;\n\n\t\t\t\tconst rule = generateRule(program, ease, info.css);\n\t\t\t\tprogram.name = `__svelte_${hash(rule)}`;\n\n\t\t\t\ttransitionManager.addRule(rule, program.name);\n\n\t\t\t\tnode.style.animation = (node.style.animation || '')\n\t\t\t\t\t.split(', ')\n\t\t\t\t\t.filter(anim => anim && (program.delta < 0 || !/__svelte/.test(anim)))\n\t\t\t\t\t.concat(`${program.name} ${program.duration}ms linear 1 forwards`)\n\t\t\t\t\t.join(', ');\n\t\t\t}\n\n\t\t\tanimation.program = program;\n\t\t\tanimation.pending = null;\n\t\t},\n\n\t\tupdate: now => {\n\t\t\tconst p = now - program.start;\n\t\t\tconst t = program.a + program.delta * ease(p / program.duration);\n\t\t\tif (info.tick) info.tick(t, 1 - t);\n\t\t},\n\n\t\tdone() {\n\t\t\tif (info.tick) info.tick(1, 0);\n\t\t\tanimation.stop();\n\t\t},\n\n\t\tstop() {\n\t\t\tif (info.css) transitionManager.deleteRule(node, program.name);\n\t\t\tanimation.running = false;\n\t\t}\n\t};\n\n\ttransitionManager.add(animation);\n\n\tif (info.tick) info.tick(0, 1);\n\n\tif (delay) {\n\t\tif (info.css) node.style.cssText += info.css(0, 1);\n\t} else {\n\t\tanimation.start();\n\t}\n\n\treturn animation;\n}\n\nfunction fixPosition(node) {\n\tconst style = getComputedStyle(node);\n\n\tif (style.position !== 'absolute' && style.position !== 'fixed') {\n\t\tconst { width, height } = style;\n\t\tconst a = node.getBoundingClientRect();\n\t\tnode.style.position = 'absolute';\n\t\tnode.style.width = width;\n\t\tnode.style.height = height;\n\t\tconst b = node.getBoundingClientRect();\n\n\t\tif (a.left !== b.left || a.top !== b.top) {\n\t\t\tconst style = getComputedStyle(node);\n\t\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\n\t\t\tnode.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n\t\t}\n\t}\n}\n\nfunction handlePromise(promise, info) {\n\tvar token = info.token = {};\n\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\n\t\tinfo.resolved = key && { [key]: value };\n\n\t\tconst child_ctx = assign(assign({}, info.ctx), info.resolved);\n\t\tconst block = type && (info.current = type)(info.component, child_ctx);\n\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroupOutros();\n\t\t\t\t\t\tblock.o(() => {\n\t\t\t\t\t\t\tblock.d(1);\n\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\n\t\t\tblock.c();\n\t\t\tblock[block.i ? 'i' : 'm'](info.mount(), info.anchor);\n\n\t\t\tinfo.component.root.set({}); // flush any handlers that were created\n\t\t}\n\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t}\n\n\tif (isPromise(promise)) {\n\t\tpromise.then(value => {\n\t\t\tupdate(info.then, 1, info.value, value);\n\t\t}, error => {\n\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t});\n\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\n\t\tinfo.resolved = { [info.value]: promise };\n\t}\n}\n\nfunction destroyBlock(block, lookup) {\n\tblock.d(1);\n\tlookup[block.key] = null;\n}\n\nfunction outroAndDestroyBlock(block, lookup) {\n\tblock.o(function() {\n\t\tdestroyBlock(block, lookup);\n\t});\n}\n\nfunction fixAndOutroAndDestroyBlock(block, lookup) {\n\tblock.f();\n\toutroAndDestroyBlock(block, lookup);\n}\n\nfunction updateKeyedEach(old_blocks, component, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, intro_method, next, get_context) {\n\tvar o = old_blocks.length;\n\tvar n = list.length;\n\n\tvar i = o;\n\tvar old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\n\tvar new_blocks = [];\n\tvar new_lookup = {};\n\tvar deltas = {};\n\n\tvar i = n;\n\twhile (i--) {\n\t\tvar child_ctx = get_context(ctx, list, i);\n\t\tvar key = get_key(child_ctx);\n\t\tvar block = lookup[key];\n\n\t\tif (!block) {\n\t\t\tblock = create_each_block(component, key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\tblock.p(changed, child_ctx);\n\t\t}\n\n\t\tnew_blocks[i] = new_lookup[key] = block;\n\n\t\tif (key in old_indexes) deltas[key] = Math.abs(i - old_indexes[key]);\n\t}\n\n\tvar will_move = {};\n\tvar did_move = {};\n\n\tfunction insert(block) {\n\t\tblock[intro_method](node, next);\n\t\tlookup[block.key] = block;\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\n\twhile (o && n) {\n\t\tvar new_block = new_blocks[n - 1];\n\t\tvar old_block = old_blocks[o - 1];\n\t\tvar new_key = new_block.key;\n\t\tvar old_key = old_block.key;\n\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t}\n\n\t\telse if (!new_lookup[old_key]) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t}\n\n\t\telse if (!lookup[new_key] || will_move[new_key]) {\n\t\t\tinsert(new_block);\n\t\t}\n\n\t\telse if (did_move[old_key]) {\n\t\t\to--;\n\n\t\t} else if (deltas[new_key] > deltas[old_key]) {\n\t\t\tdid_move[new_key] = true;\n\t\t\tinsert(new_block);\n\n\t\t} else {\n\t\t\twill_move[old_key] = true;\n\t\t\to--;\n\t\t}\n\t}\n\n\twhile (o--) {\n\t\tvar old_block = old_blocks[o];\n\t\tif (!new_lookup[old_block.key]) destroy(old_block, lookup);\n\t}\n\n\twhile (n) insert(new_blocks[n - 1]);\n\n\treturn new_blocks;\n}\n\nfunction measure(blocks) {\n\tconst rects = {};\n\tlet i = blocks.length;\n\twhile (i--) rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n\treturn rects;\n}\n\nfunction animate(blocks, rects, fn, params) {\n\tlet i = blocks.length;\n\twhile (i--) {\n\t\tconst block = blocks[i];\n\t\tconst from = rects[block.key];\n\n\t\tif (!from) continue;\n\t\tconst to = block.node.getBoundingClientRect();\n\n\t\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) continue;\n\n\n\t}\n}\n\nfunction getSpreadUpdate(levels, updates) {\n\tvar update = {};\n\n\tvar to_null_out = {};\n\tvar accounted_for = {};\n\n\tvar i = levels.length;\n\twhile (i--) {\n\t\tvar o = levels[i];\n\t\tvar n = updates[i];\n\n\t\tif (n) {\n\t\t\tfor (var key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\n\t\t\tfor (var key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (var key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (var key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\n\treturn update;\n}\n\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nconst invalidAttributeNameCharacter = /[\\s'\">\\/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n\nfunction spread(args) {\n\tconst attributes = Object.assign({}, ...args);\n\tlet str = '';\n\n\tObject.keys(attributes).forEach(name => {\n\t\tif (invalidAttributeNameCharacter.test(name)) return;\n\n\t\tconst value = attributes[name];\n\t\tif (value === undefined) return;\n\t\tif (value === true) str += \" \" + name;\n\n\t\tconst escaped = String(value)\n\t\t\t.replace(/\"/g, '&#34;')\n\t\t\t.replace(/'/g, '&#39;');\n\n\t\tstr += \" \" + name + \"=\" + JSON.stringify(escaped);\n\t});\n\n\treturn str;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t\"'\": '&#39;',\n\t'&': '&amp;',\n\t'<': '&lt;',\n\t'>': '&gt;'\n};\n\nfunction escape(html) {\n\treturn String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\n\nfunction each(items, assign, fn) {\n\tlet str = '';\n\tfor (let i = 0; i < items.length; i += 1) {\n\t\tstr += fn(assign(items[i], i));\n\t}\n\treturn str;\n}\n\nconst missingComponent = {\n\t_render: () => ''\n};\n\nfunction validateSsrComponent(component, name) {\n\tif (!component || !component._render) {\n\t\tif (name === 'svelte:component') name += ' this={...}';\n\t\tthrow new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n\t}\n\n\treturn component;\n}\n\nfunction debug(file, line, column, values) {\n\tconsole.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`);\n\tconsole.log(values);\n\treturn '';\n}\n\nfunction blankObject() {\n\treturn Object.create(null);\n}\n\nfunction destroy(detach) {\n\tthis.destroy = noop;\n\tthis.fire('destroy');\n\tthis.set = noop;\n\n\tthis._fragment.d(detach !== false);\n\tthis._fragment = null;\n\tthis._state = {};\n}\n\nfunction destroyDev(detach) {\n\tdestroy.call(this, detach);\n\tthis.destroy = function() {\n\t\tconsole.warn('Component was already destroyed');\n\t};\n}\n\nfunction _differs(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction _differsImmutable(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\nfunction fire(eventName, data) {\n\tvar handlers =\n\t\teventName in this._handlers && this._handlers[eventName].slice();\n\tif (!handlers) return;\n\n\tfor (var i = 0; i < handlers.length; i += 1) {\n\t\tvar handler = handlers[i];\n\n\t\tif (!handler.__calling) {\n\t\t\ttry {\n\t\t\t\thandler.__calling = true;\n\t\t\t\thandler.call(this, data);\n\t\t\t} finally {\n\t\t\t\thandler.__calling = false;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction flush(component) {\n\tcomponent._lock = true;\n\tcallAll(component._beforecreate);\n\tcallAll(component._oncreate);\n\tcallAll(component._aftercreate);\n\tcomponent._lock = false;\n}\n\nfunction get() {\n\treturn this._state;\n}\n\nfunction init(component, options) {\n\tcomponent._handlers = blankObject();\n\tcomponent._slots = blankObject();\n\tcomponent._bind = options._bind;\n\tcomponent._staged = {};\n\n\tcomponent.options = options;\n\tcomponent.root = options.root || component;\n\tcomponent.store = options.store || component.root.store;\n\n\tif (!options.root) {\n\t\tcomponent._beforecreate = [];\n\t\tcomponent._oncreate = [];\n\t\tcomponent._aftercreate = [];\n\t}\n}\n\nfunction on(eventName, handler) {\n\tvar handlers = this._handlers[eventName] || (this._handlers[eventName] = []);\n\thandlers.push(handler);\n\n\treturn {\n\t\tcancel: function() {\n\t\t\tvar index = handlers.indexOf(handler);\n\t\t\tif (~index) handlers.splice(index, 1);\n\t\t}\n\t};\n}\n\nfunction set(newState) {\n\tthis._set(assign({}, newState));\n\tif (this.root._lock) return;\n\tflush(this.root);\n}\n\nfunction _set(newState) {\n\tvar oldState = this._state,\n\t\tchanged = {},\n\t\tdirty = false;\n\n\tnewState = assign(this._staged, newState);\n\tthis._staged = {};\n\n\tfor (var key in newState) {\n\t\tif (this._differs(newState[key], oldState[key])) changed[key] = dirty = true;\n\t}\n\tif (!dirty) return;\n\n\tthis._state = assign(assign({}, oldState), newState);\n\tthis._recompute(changed, this._state);\n\tif (this._bind) this._bind(changed, this._state);\n\n\tif (this._fragment) {\n\t\tthis.fire(\"state\", { changed: changed, current: this._state, previous: oldState });\n\t\tthis._fragment.p(changed, this._state);\n\t\tthis.fire(\"update\", { changed: changed, current: this._state, previous: oldState });\n\t}\n}\n\nfunction _stage(newState) {\n\tassign(this._staged, newState);\n}\n\nfunction setDev(newState) {\n\tif (typeof newState !== 'object') {\n\t\tthrow new Error(\n\t\t\tthis._debugName + '.set was called without an object of data key-values to update.'\n\t\t);\n\t}\n\n\tthis._checkReadOnly(newState);\n\tset.call(this, newState);\n}\n\nfunction callAll(fns) {\n\twhile (fns && fns.length) fns.shift()();\n}\n\nfunction _mount(target, anchor) {\n\tthis._fragment[this._fragment.i ? 'i' : 'm'](target, anchor || null);\n}\n\nvar PENDING = {};\nvar SUCCESS = {};\nvar FAILURE = {};\n\nfunction removeFromStore() {\n\tthis.store._remove(this);\n}\n\nvar proto = {\n\tdestroy,\n\tget,\n\tfire,\n\ton,\n\tset,\n\t_recompute: noop,\n\t_set,\n\t_stage,\n\t_mount,\n\t_differs\n};\n\nvar protoDev = {\n\tdestroy: destroyDev,\n\tget,\n\tfire,\n\ton,\n\tset: setDev,\n\t_recompute: noop,\n\t_set,\n\t_stage,\n\t_mount,\n\t_differs\n};\n\nexport { blankObject, destroy, destroyDev, _differs, _differsImmutable, fire, flush, get, init, on, set, _set, _stage, setDev, callAll, _mount, PENDING, SUCCESS, FAILURE, removeFromStore, proto, protoDev, wrapAnimation, fixPosition, handlePromise, append, insert, detachNode, detachBetween, detachBefore, detachAfter, reinsertBetween, reinsertChildren, reinsertAfter, reinsertBefore, destroyEach, createFragment, createElement, createSvgElement, createText, createComment, addListener, removeListener, setAttribute, setAttributes, setCustomElementData, setXlinkAttribute, getBindingGroupValue, toNumber, timeRangesToArray, children, claimElement, claimText, setData, setInputType, setStyle, selectOption, selectOptions, selectValue, selectMultipleValue, addResizeListener, toggleClass, destroyBlock, outroAndDestroyBlock, fixAndOutroAndDestroyBlock, updateKeyedEach, measure, animate, getSpreadUpdate, invalidAttributeNameCharacter, spread, escaped, escape, each, missingComponent, validateSsrComponent, debug, linear, generateRule, hash, wrapTransition, outros, groupOutros, transitionManager, noop, assign, assignTrue, isPromise, callAfter, addLoc, exclude, run };\n","const\tserverBase = window.serverBase || '//maps.kosmosnimki.ru/',\r\n\t\tserverProxy = serverBase + 'Plugins/ForestReport/proxy',\r\n\t\tfields = {\r\n\t\t\treport_t:\t{ Name: 'report_t', ColumnSimpleType: 'String', title: 'Тип отчета', save: true, onValue: {\r\n\t\t\t\t'ИЛ':\t{ show: ['form_rub', 'type_rub'], hide: ['reforest_t'], title: 'об использовании лесов' },\r\n\t\t\t\t'ВЛ':\t{ hide: ['form_rub', 'type_rub'], show: ['reforest_t'], title: 'о воспроизводстве лесов' }\r\n\t\t\t}},\r\n\t\t\tcompany:\t\t{ Name: 'company', ColumnSimpleType: 'String', save: true, title: 'Наименование организации'},\r\n\t\t\tregion:\t\t\t{ Name: 'region', ColumnSimpleType: 'String', save: true, title: 'Субъект Российской Федерации'},\r\n\t\t\tforestr:\t\t{ Name: 'forestr', ColumnSimpleType: 'String', save: true, title: 'Лесничество'},\r\n\t\t\tsubforest:\t\t{ Name: 'subforest', ColumnSimpleType: 'String', save: true, title: 'Участковое Лесничество'},\r\n\t\t\tdacha:\t\t\t{ Name: 'dacha', ColumnSimpleType: 'String', title: 'Дача'},\r\n\t\t\tkvartal:\t\t{ Name: 'kvartal', ColumnSimpleType: 'Integer', title: 'Квартал'},\r\n\t\t\tvydel:\t\t\t{ Name: 'vydel', ColumnSimpleType: 'String', title: 'Выделы'},\r\n\t\t\tdelyanka:\t\t{ Name: 'delyanka', ColumnSimpleType: 'String', title: 'Делянка'},\r\n\t\t\tform_rub:\t\t{ Name: 'form_rub', ColumnSimpleType: 'String', save: true, title: 'Форма рубки'},\r\n\t\t\ttype_rub:\t\t{ Name: 'type_rub', ColumnSimpleType: 'String', title: 'Тип рубки'},\r\n\t\t\treforest_t:\t\t{ Name: 'reforest_t', ColumnSimpleType: 'String', title: 'Тип лесовосстановления'},\r\n\t\t\tyear:\t\t\t{ Name: 'year', ColumnSimpleType: 'String', save: true, title: 'Год'},\r\n\t\t\tarea:\t\t\t{ Name: 'area', ColumnSimpleType: 'Float', title: 'Площадь'},\r\n\t\t\tFRSTAT:\t\t\t{ Name: 'FRSTAT', ColumnSimpleType: 'Integer', title: 'Признак отчета'},\r\n\t\t\tsnap:\t\t\t{ Name: 'snap', ColumnSimpleType: 'String', title: 'Привязочный ход'}\r\n\t\t};\r\n// fields = {\r\n// report_t:\t{ Name: 'report_type', ColumnSimpleType: 'String', title: 'Тип отчета', onValue: { reportType\r\n// 'об использовании лесов':\t{ show: ['form_rub', 'type_rub'], hide: ['reforest_type'], value: 'ИЛ' },\r\n// 'о воспроизводстве лесов':\t{ hide: ['form_rub', 'type_rub'], show: ['reforest_type'], value: 'ВЛ' }\r\n// }},\r\n// company:\t{ Name: 'company', ColumnSimpleType: 'String', title: 'Наименование организации'},\r\n// region:\t{ Name: 'region', ColumnSimpleType: 'String', title: 'Субъект Российской Федерации'},\r\n// forest:\t{ Name: 'forestry', ColumnSimpleType: 'String', title: 'Лесничество'}, fprestry\r\n// subforest:\t{ Name: 'subforestry', ColumnSimpleType: 'String', title: 'Участковое Лесничество'}, subforestry\r\n// dacha:\t{ Name: 'dacha', ColumnSimpleType: 'String', title: 'Дача'},\r\n// kvartal:\t{ Name: 'kvartal', ColumnSimpleType: 'Integer', title: 'Квартал'},\r\n// vydel:\t{ Name: 'vydel', ColumnSimpleType: 'String', title: 'Выделы'},\r\n// delyanka:\t{ Name: 'delyanka', ColumnSimpleType: 'String', title: 'Делянка'},\r\n// form_rub:\t{ Name: 'form_rub', ColumnSimpleType: 'String', title: 'Форма рубки'}, fellingForm\r\n// type_rub:\t{ Name: 'type_rub', ColumnSimpleType: 'String', title: 'Тип рубки'}, fellingType\r\n// reforest_t:\t{ Name: 'reforest_type', ColumnSimpleType: 'String', title: 'Тип лесовосстановления'}, reforestType\r\n// year:\t{ Name: 'year', ColumnSimpleType: 'String', title: 'Год'},\r\n// area:\t{ Name: 'area', ColumnSimpleType: 'Float', title: 'Площадь'},\r\n// FRSTAT:\t{ Name: 'FRSTAT', ColumnSimpleType: 'Integer', title: 'Признак отчета'},\r\n// snap:\t{ Name: 'snap', ColumnSimpleType: 'String', title: 'Привязочный ход'}\r\n// };\r\n\t\t// fields = {\r\n\t\t\t// report_type:\t{ Name: 'report_type', ColumnSimpleType: 'String', title: 'Тип отчета', onValue: {\r\n\t\t\t\t// 'об использовании лесов':\t{ show: ['form_rub', 'type_rub'], hide: ['reforest_type'], value: 'ИЛ' },\r\n\t\t\t\t// 'о воспроизводстве лесов':\t{ hide: ['form_rub', 'type_rub'], show: ['reforest_type'], value: 'ВЛ' }\r\n\t\t\t// }},\r\n\t\t\t// company:\t\t{ Name: 'company', ColumnSimpleType: 'String', title: 'Наименование организации'},\r\n\t\t\t// region:\t\t\t{ Name: 'region', ColumnSimpleType: 'String', title: 'Субъект Российской Федерации'},\r\n\t\t\t// forestry:\t\t{ Name: 'forestry', ColumnSimpleType: 'String', title: 'Лесничество'},\r\n\t\t\t// subforestry:\t{ Name: 'subforestry', ColumnSimpleType: 'String', title: 'Участковое Лесничество'},\r\n\t\t\t// dacha:\t\t\t{ Name: 'dacha', ColumnSimpleType: 'String', title: 'Дача'},\r\n\t\t\t// kvartal:\t\t{ Name: 'kvartal', ColumnSimpleType: 'Integer', title: 'Квартал'},\r\n\t\t\t// vydel:\t\t\t{ Name: 'vydel', ColumnSimpleType: 'String', title: 'Выделы'},\r\n\t\t\t// delyanka:\t\t{ Name: 'delyanka', ColumnSimpleType: 'String', title: 'Делянка'},\r\n\t\t\t// form_rub:\t\t{ Name: 'form_rub', ColumnSimpleType: 'String', title: 'Форма рубки'},\r\n\t\t\t// type_rub:\t\t{ Name: 'type_rub', ColumnSimpleType: 'String', title: 'Тип рубки'},\r\n\t\t\t// reforest_type:\t{ Name: 'reforest_type', ColumnSimpleType: 'String', title: 'Тип лесовосстановления'},\r\n\t\t\t// year:\t\t\t{ Name: 'year', ColumnSimpleType: 'String', title: 'Год'},\r\n\t\t\t// area:\t\t\t{ Name: 'area', ColumnSimpleType: 'Float', title: 'Площадь'},\r\n\t\t\t// FRSTAT:\t\t\t{ Name: 'FRSTAT', ColumnSimpleType: 'Integer', title: 'Признак отчета'},\r\n\t\t\t// snap:\t\t\t{ Name: 'snap', ColumnSimpleType: 'String', title: 'Привязочный ход'}\r\n\t\t// };\r\n\r\nconst fieldsConf = fields;\r\nconst colsToHash = arr => {\r\n\treturn arr.reduce((a, v, i) => { a[v] = i; return a; }, {});\r\n};\r\n\r\n/*jslint plusplus:true */\r\nfunction Geomag(model) {\r\n\t'use strict';\r\n\tvar wmm,\r\n\t\tmaxord = 12,\r\n\t\ta = 6378.137,\t\t// WGS 1984 Equatorial axis (km)\r\n\t\tb = 6356.7523142,\t// WGS 1984 Polar axis (km)\r\n\t\tre = 6371.2,\r\n\t\ta2 = a * a,\r\n\t\tb2 = b * b,\r\n\t\tc2 = a2 - b2,\r\n\t\ta4 = a2 * a2,\r\n\t\tb4 = b2 * b2,\r\n\t\tc4 = a4 - b4,\r\n\t\tz = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n\t\tunnormalizedWMM;\r\n\r\n\tfunction parseCof(cof) {\r\n\t\twmm = (function (cof) {\r\n\t\t\tvar modelLines = cof.split('\\n'), wmm = [], i, vals, epoch, model, modelDate;\r\n\t\t\tfor (i in modelLines) {\r\n\t\t\t\tif (modelLines.hasOwnProperty(i)) {\r\n\t\t\t\t\tvals = modelLines[i].replace(/^\\s+|\\s+$/g, \"\").split(/\\s+/);\r\n\t\t\t\t\tif (vals.length === 3) {\r\n\t\t\t\t\t\tepoch = parseFloat(vals[0]);\r\n\t\t\t\t\t\tmodel = vals[1];\r\n\t\t\t\t\t\tmodelDate = vals[2];\r\n\t\t\t\t\t} else if (vals.length === 6) {\r\n\t\t\t\t\t\twmm.push({\r\n\t\t\t\t\t\t\tn: parseInt(vals[0], 10),\r\n\t\t\t\t\t\t\tm: parseInt(vals[1], 10),\r\n\t\t\t\t\t\t\tgnm: parseFloat(vals[2]),\r\n\t\t\t\t\t\t\thnm: parseFloat(vals[3]),\r\n\t\t\t\t\t\t\tdgnm: parseFloat(vals[4]),\r\n\t\t\t\t\t\t\tdhnm: parseFloat(vals[5])\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn {epoch: epoch, model: model, modelDate: modelDate, wmm: wmm};\r\n\t\t}(cof));\r\n\t}\r\n\r\n\tfunction unnormalize(wmm) {\r\n\t\tvar i, j, m, n, D2, flnmj,\r\n\t\t\tc = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tcd = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tk = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tsnorm = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice()],\r\n\t\t\tmodel = wmm.wmm;\r\n\t\tfor (i in model) {\r\n\t\t\tif (model.hasOwnProperty(i)) {\r\n\t\t\t\tif (model[i].m <= model[i].n) {\r\n\t\t\t\t\tc[model[i].m][model[i].n] = model[i].gnm;\r\n\t\t\t\t\tcd[model[i].m][model[i].n] = model[i].dgnm;\r\n\t\t\t\t\tif (model[i].m !== 0) {\r\n\t\t\t\t\t\tc[model[i].n][model[i].m - 1] = model[i].hnm;\r\n\t\t\t\t\t\tcd[model[i].n][model[i].m - 1] = model[i].dhnm;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t/* CONVERT SCHMIDT NORMALIZED GAUSS COEFFICIENTS TO UNNORMALIZED */\r\n\t\tsnorm[0][0] = 1;\r\n\r\n\t\tfor (n = 1; n <= maxord; n++) {\r\n\t\t\tsnorm[0][n] = snorm[0][n - 1] * (2 * n - 1) / n;\r\n\t\t\tj = 2;\r\n\r\n\t\t\tfor (m = 0, D2 = (n - m + 1); D2 > 0; D2--, m++) {\r\n\t\t\t\tk[m][n] = (((n - 1) * (n - 1)) - (m * m)) /\r\n\t\t\t\t\t((2 * n - 1) * (2 * n - 3));\r\n\t\t\t\tif (m > 0) {\r\n\t\t\t\t\tflnmj = ((n - m + 1) * j) / (n + m);\r\n\t\t\t\t\tsnorm[m][n] = snorm[m - 1][n] * Math.sqrt(flnmj);\r\n\t\t\t\t\tj = 1;\r\n\t\t\t\t\tc[n][m - 1] = snorm[m][n] * c[n][m - 1];\r\n\t\t\t\t\tcd[n][m - 1] = snorm[m][n] * cd[n][m - 1];\r\n\t\t\t\t}\r\n\t\t\t\tc[m][n] = snorm[m][n] * c[m][n];\r\n\t\t\t\tcd[m][n] = snorm[m][n] * cd[m][n];\r\n\t\t\t}\r\n\t\t}\r\n\t\tk[1][1] = 0.0;\r\n\r\n\t\tunnormalizedWMM = {epoch: wmm.epoch, k: k, c: c, cd: cd};\r\n\t}\r\n\r\n\tthis.setCof = function (cof) {\r\n\t\tparseCof(cof);\r\n\t\tunnormalize(wmm);\r\n\t};\r\n\tthis.getWmm = function () {\r\n\t\treturn wmm;\r\n\t};\r\n\tthis.setUnnorm = function (val) {\r\n\t\tunnormalizedWMM = val;\r\n\t};\r\n\tthis.getUnnorm = function () {\r\n\t\treturn unnormalizedWMM;\r\n\t};\r\n\tthis.getEpoch = function () {\r\n\t\treturn unnormalizedWMM.epoch;\r\n\t};\r\n\tthis.setEllipsoid = function (e) {\r\n\t\ta = e.a;\r\n\t\tb = e.b;\r\n\t\tre = 6371.2;\r\n\t\ta2 = a * a;\r\n\t\tb2 = b * b;\r\n\t\tc2 = a2 - b2;\r\n\t\ta4 = a2 * a2;\r\n\t\tb4 = b2 * b2;\r\n\t\tc4 = a4 - b4;\r\n\t};\r\n\tthis.getEllipsoid = function () {\r\n\t\treturn {a: a, b: b};\r\n\t};\r\n\tthis.calculate = function (glat, glon, h, date) {\r\n\t\tif (unnormalizedWMM === undefined) {\r\n\t\t\tthrow new Error(\"A World Magnetic Model has not been set.\")\r\n\t\t}\r\n\t\tif (glat === undefined || glon === undefined) {\r\n\t\t\tthrow new Error(\"Latitude and longitude are required arguments.\");\r\n\t\t}\r\n\t\tfunction rad2deg(rad) {\r\n\t\t\treturn rad * (180 / Math.PI);\r\n\t\t}\r\n\t\tfunction deg2rad(deg) {\r\n\t\t\treturn deg * (Math.PI / 180);\r\n\t\t}\r\n\t\tfunction decimalDate(date) {\r\n\t\t\tdate = date || new Date();\r\n\t\t\tvar year = date.getFullYear(),\r\n\t\t\t\tdaysInYear = 365 +\r\n\t\t\t\t\t(((year % 400 === 0) || (year % 4 === 0 && (year % 100 > 0))) ? 1 : 0),\r\n\t\t\t\tmsInYear = daysInYear * 24 * 60 * 60 * 1000;\r\n\r\n\t\t\treturn date.getFullYear() + (date.valueOf() - (new Date(year, 0)).valueOf()) / msInYear;\r\n\t\t}\r\n\r\n\t\tvar epoch = unnormalizedWMM.epoch,\r\n\t\t\tk = unnormalizedWMM.k,\r\n\t\t\tc = unnormalizedWMM.c,\r\n\t\t\tcd = unnormalizedWMM.cd,\r\n\t\t\talt = (h / 3280.8399) || 0, // convert h (in feet) to kilometers (default, 0 km)\r\n\t\t\tdt = decimalDate(date) - epoch,\r\n\t\t\trlat = deg2rad(glat),\r\n\t\t\trlon = deg2rad(glon),\r\n\t\t\tsrlon = Math.sin(rlon),\r\n\t\t\tsrlat = Math.sin(rlat),\r\n\t\t\tcrlon = Math.cos(rlon),\r\n\t\t\tcrlat = Math.cos(rlat),\r\n\t\t\tsrlat2 = srlat * srlat,\r\n\t\t\tcrlat2 = crlat * crlat,\r\n\t\t\tq,\r\n\t\t\tq1,\r\n\t\t\tq2,\r\n\t\t\tct,\r\n\t\t\tst,\r\n\t\t\tr2,\r\n\t\t\tr,\r\n\t\t\td,\r\n\t\t\tca,\r\n\t\t\tsa,\r\n\t\t\taor,\r\n\t\t\tar,\r\n\t\t\tbr = 0.0,\r\n\t\t\tbt = 0.0,\r\n\t\t\tbp = 0.0,\r\n\t\t\tbpp = 0.0,\r\n\t\t\tpar,\r\n\t\t\ttemp1,\r\n\t\t\ttemp2,\r\n\t\t\tparp,\r\n\t\t\tD4,\r\n\t\t\tm,\r\n\t\t\tn,\r\n\t\t\tfn = [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\r\n\t\t\tfm = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],\r\n\t\t\tz = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n\t\t\ttc = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tsp = z.slice(),\r\n\t\t\tcp = z.slice(),\r\n\t\t\tpp = z.slice(),\r\n\t\t\tp = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tdp = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tbx,\r\n\t\t\tby,\r\n\t\t\tbz,\r\n\t\t\tbh,\r\n\t\t\tti,\r\n\t\t\tdec,\r\n\t\t\tdip,\r\n\t\t\tgv;\r\n\t\tsp[0] = 0.0;\r\n\t\tsp[1] = srlon;\r\n\t\tcp[1] = crlon;\r\n\t\ttc[0][0] = 0;\r\n\t\tcp[0] = 1.0;\r\n\t\tpp[0] = 1.0;\r\n\t\tp[0][0] = 1;\r\n\r\n\t\t/* CONVERT FROM GEODETIC COORDS. TO SPHERICAL COORDS. */\r\n\t\tq = Math.sqrt(a2 - c2 * srlat2);\r\n\t\tq1 = alt * q;\r\n\t\tq2 = ((q1 + a2) / (q1 + b2)) * ((q1 + a2) / (q1 + b2));\r\n\t\tct = srlat / Math.sqrt(q2 * crlat2 + srlat2);\r\n\t\tst = Math.sqrt(1.0 - (ct * ct));\r\n\t\tr2 = (alt * alt) + 2.0 * q1 + (a4 - c4 * srlat2) / (q * q);\r\n\t\tr = Math.sqrt(r2);\r\n\t\td = Math.sqrt(a2 * crlat2 + b2 * srlat2);\r\n\t\tca = (alt + d) / r;\r\n\t\tsa = c2 * crlat * srlat / (r * d);\r\n\r\n\t\tfor (m = 2; m <= maxord; m++) {\r\n\t\t\tsp[m] = sp[1] * cp[m - 1] + cp[1] * sp[m - 1];\r\n\t\t\tcp[m] = cp[1] * cp[m - 1] - sp[1] * sp[m - 1];\r\n\t\t}\r\n\r\n\t\taor = re / r;\r\n\t\tar = aor * aor;\r\n\r\n\t\tfor (n = 1; n <= maxord; n++) {\r\n\t\t\tar = ar * aor;\r\n\t\t\tfor (m = 0, D4 = (n + m + 1); D4 > 0; D4--, m++) {\r\n\r\n\t\t/*\r\n\t\t\t\tCOMPUTE UNNORMALIZED ASSOCIATED LEGENDRE POLYNOMIALS\r\n\t\t\t\tAND DERIVATIVES VIA RECURSION RELATIONS\r\n\t\t*/\r\n\t\t\t\tif (n === m) {\r\n\t\t\t\t\tp[m][n] = st * p[m - 1][n - 1];\r\n\t\t\t\t\tdp[m][n] = st * dp[m - 1][n - 1] + ct *\r\n\t\t\t\t\t\tp[m - 1][n - 1];\r\n\t\t\t\t} else if (n === 1 && m === 0) {\r\n\t\t\t\t\tp[m][n] = ct * p[m][n - 1];\r\n\t\t\t\t\tdp[m][n] = ct * dp[m][n - 1] - st * p[m][n - 1];\r\n\t\t\t\t} else if (n > 1 && n !== m) {\r\n\t\t\t\t\tif (m > n - 2) { p[m][n - 2] = 0; }\r\n\t\t\t\t\tif (m > n - 2) { dp[m][n - 2] = 0.0; }\r\n\t\t\t\t\tp[m][n] = ct * p[m][n - 1] - k[m][n] * p[m][n - 2];\r\n\t\t\t\t\tdp[m][n] = ct * dp[m][n - 1] - st * p[m][n - 1] -\r\n\t\t\t\t\t\tk[m][n] * dp[m][n - 2];\r\n\t\t\t\t}\r\n\r\n\t\t/*\r\n\t\t\t\tTIME ADJUST THE GAUSS COEFFICIENTS\r\n\t\t*/\r\n\r\n\t\t\t\ttc[m][n] = c[m][n] + dt * cd[m][n];\r\n\t\t\t\tif (m !== 0) {\r\n\t\t\t\t\ttc[n][m - 1] = c[n][m - 1] + dt * cd[n][m - 1];\r\n\t\t\t\t}\r\n\r\n\t\t/*\r\n\t\t\t\tACCUMULATE TERMS OF THE SPHERICAL HARMONIC EXPANSIONS\r\n\t\t*/\r\n\t\t\t\tpar = ar * p[m][n];\r\n\t\t\t\tif (m === 0) {\r\n\t\t\t\t\ttemp1 = tc[m][n] * cp[m];\r\n\t\t\t\t\ttemp2 = tc[m][n] * sp[m];\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttemp1 = tc[m][n] * cp[m] + tc[n][m - 1] * sp[m];\r\n\t\t\t\t\ttemp2 = tc[m][n] * sp[m] - tc[n][m - 1] * cp[m];\r\n\t\t\t\t}\r\n\t\t\t\tbt = bt - ar * temp1 * dp[m][n];\r\n\t\t\t\tbp += (fm[m] * temp2 * par);\r\n\t\t\t\tbr += (fn[n] * temp1 * par);\r\n\t\t/*\r\n\t\t\t\t\tSPECIAL CASE:  NORTH/SOUTH GEOGRAPHIC POLES\r\n\t\t*/\r\n\t\t\t\tif (st === 0.0 && m === 1) {\r\n\t\t\t\t\tif (n === 1) {\r\n\t\t\t\t\t\tpp[n] = pp[n - 1];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpp[n] = ct * pp[n - 1] - k[m][n] * pp[n - 2];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparp = ar * pp[n];\r\n\t\t\t\t\tbpp += (fm[m] * temp2 * parp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbp = (st === 0.0 ? bpp : bp / st);\r\n\t\t/*\r\n\t\t\tROTATE MAGNETIC VECTOR COMPONENTS FROM SPHERICAL TO\r\n\t\t\tGEODETIC COORDINATES\r\n\t\t*/\r\n\t\tbx = -bt * ca - br * sa;\r\n\t\tby = bp;\r\n\t\tbz = bt * sa - br * ca;\r\n\r\n\t\t/*\r\n\t\t\tCOMPUTE DECLINATION (DEC), INCLINATION (DIP) AND\r\n\t\t\tTOTAL INTENSITY (TI)\r\n\t\t*/\r\n\t\tbh = Math.sqrt((bx * bx) + (by * by));\r\n\t\tti = Math.sqrt((bh * bh) + (bz * bz));\r\n\t\tdec = rad2deg(Math.atan2(by, bx));\r\n\t\tdip = rad2deg(Math.atan2(bz, bh));\r\n\r\n\t\t/*\r\n\t\t\tCOMPUTE MAGNETIC GRID VARIATION IF THE CURRENT\r\n\t\t\tGEODETIC POSITION IS IN THE ARCTIC OR ANTARCTIC\r\n\t\t\t(I.E. GLAT > +55 DEGREES OR GLAT < -55 DEGREES)\r\n\t\t\tOTHERWISE, SET MAGNETIC GRID VARIATION TO -999.0\r\n\t\t*/\r\n\r\n\t\tif (Math.abs(glat) >= 55.0) {\r\n\t\t\tif (glat > 0.0 && glon >= 0.0) {\r\n\t\t\t\tgv = dec - glon;\r\n\t\t\t} else if (glat > 0.0 && glon < 0.0) {\r\n\t\t\t\tgv = dec + Math.abs(glon);\r\n\t\t\t} else if (glat < 0.0 && glon >= 0.0) {\r\n\t\t\t\tgv = dec + glon;\r\n\t\t\t} else if (glat < 0.0 && glon < 0.0) {\r\n\t\t\t\tgv = dec - Math.abs(glon);\r\n\t\t\t}\r\n\t\t\tif (gv > 180.0) {\r\n\t\t\t\tgv -= 360.0;\r\n\t\t\t} else if (gv < -180.0) { gv += 360.0; }\r\n\t\t}\r\n\r\n\t\treturn {dec: dec, dip: dip, ti: ti, bh: bh, bx: bx, by: by, bz: bz, lat: glat, lon: glon, gv: gv};\r\n\t};\r\n\tthis.calc = this.calculate;\r\n\tthis.mag = this.calculate;\r\n\r\n\tif (model !== undefined) { // initialize\r\n\t\tif (typeof model === 'string') { // WMM.COF file\r\n\t\t\tparseCof(model);\r\n\t\t\tunnormalize(wmm);\r\n\t\t} else if (typeof model === 'object') { // unnorm obj\r\n\t\t\tthis.setUnnorm(model);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid argument type\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar cof = `\r\n    2010.0            WMM-2010        11/20/2009\r\n  1  0  -29496.6       0.0       11.6        0.0\r\n  1  1   -1586.3    4944.4       16.5      -25.9\r\n  2  0   -2396.6       0.0      -12.1        0.0\r\n  2  1    3026.1   -2707.7       -4.4      -22.5\r\n  2  2    1668.6    -576.1        1.9      -11.8\r\n  3  0    1340.1       0.0        0.4        0.0\r\n  3  1   -2326.2    -160.2       -4.1        7.3\r\n  3  2    1231.9     251.9       -2.9       -3.9\r\n  3  3     634.0    -536.6       -7.7       -2.6\r\n  4  0     912.6       0.0       -1.8        0.0\r\n  4  1     808.9     286.4        2.3        1.1\r\n  4  2     166.7    -211.2       -8.7        2.7\r\n  4  3    -357.1     164.3        4.6        3.9\r\n  4  4      89.4    -309.1       -2.1       -0.8\r\n  5  0    -230.9       0.0       -1.0        0.0\r\n  5  1     357.2      44.6        0.6        0.4\r\n  5  2     200.3     188.9       -1.8        1.8\r\n  5  3    -141.1    -118.2       -1.0        1.2\r\n  5  4    -163.0       0.0        0.9        4.0\r\n  5  5      -7.8     100.9        1.0       -0.6\r\n  6  0      72.8       0.0       -0.2        0.0\r\n  6  1      68.6     -20.8       -0.2       -0.2\r\n  6  2      76.0      44.1       -0.1       -2.1\r\n  6  3    -141.4      61.5        2.0       -0.4\r\n  6  4     -22.8     -66.3       -1.7       -0.6\r\n  6  5      13.2       3.1       -0.3        0.5\r\n  6  6     -77.9      55.0        1.7        0.9\r\n  7  0      80.5       0.0        0.1        0.0\r\n  7  1     -75.1     -57.9       -0.1        0.7\r\n  7  2      -4.7     -21.1       -0.6        0.3\r\n  7  3      45.3       6.5        1.3       -0.1\r\n  7  4      13.9      24.9        0.4       -0.1\r\n  7  5      10.4       7.0        0.3       -0.8\r\n  7  6       1.7     -27.7       -0.7       -0.3\r\n  7  7       4.9      -3.3        0.6        0.3\r\n  8  0      24.4       0.0       -0.1        0.0\r\n  8  1       8.1      11.0        0.1       -0.1\r\n  8  2     -14.5     -20.0       -0.6        0.2\r\n  8  3      -5.6      11.9        0.2        0.4\r\n  8  4     -19.3     -17.4       -0.2        0.4\r\n  8  5      11.5      16.7        0.3        0.1\r\n  8  6      10.9       7.0        0.3       -0.1\r\n  8  7     -14.1     -10.8       -0.6        0.4\r\n  8  8      -3.7       1.7        0.2        0.3\r\n  9  0       5.4       0.0       -0.0        0.0\r\n  9  1       9.4     -20.5       -0.1       -0.0\r\n  9  2       3.4      11.5        0.0       -0.2\r\n  9  3      -5.2      12.8        0.3        0.0\r\n  9  4       3.1      -7.2       -0.4       -0.1\r\n  9  5     -12.4      -7.4       -0.3        0.1\r\n  9  6      -0.7       8.0        0.1       -0.0\r\n  9  7       8.4       2.1       -0.1       -0.2\r\n  9  8      -8.5      -6.1       -0.4        0.3\r\n  9  9     -10.1       7.0       -0.2        0.2\r\n 10  0      -2.0       0.0        0.0        0.0\r\n 10  1      -6.3       2.8       -0.0        0.1\r\n 10  2       0.9      -0.1       -0.1       -0.1\r\n 10  3      -1.1       4.7        0.2        0.0\r\n 10  4      -0.2       4.4       -0.0       -0.1\r\n 10  5       2.5      -7.2       -0.1       -0.1\r\n 10  6      -0.3      -1.0       -0.2       -0.0\r\n 10  7       2.2      -3.9        0.0       -0.1\r\n 10  8       3.1      -2.0       -0.1       -0.2\r\n 10  9      -1.0      -2.0       -0.2        0.0\r\n 10 10      -2.8      -8.3       -0.2       -0.1\r\n 11  0       3.0       0.0        0.0        0.0\r\n 11  1      -1.5       0.2        0.0       -0.0\r\n 11  2      -2.1       1.7       -0.0        0.1\r\n 11  3       1.7      -0.6        0.1        0.0\r\n 11  4      -0.5      -1.8       -0.0        0.1\r\n 11  5       0.5       0.9        0.0        0.0\r\n 11  6      -0.8      -0.4       -0.0        0.1\r\n 11  7       0.4      -2.5       -0.0        0.0\r\n 11  8       1.8      -1.3       -0.0       -0.1\r\n 11  9       0.1      -2.1        0.0       -0.1\r\n 11 10       0.7      -1.9       -0.1       -0.0\r\n 11 11       3.8      -1.8       -0.0       -0.1\r\n 12  0      -2.2       0.0       -0.0        0.0\r\n 12  1      -0.2      -0.9        0.0       -0.0\r\n 12  2       0.3       0.3        0.1        0.0\r\n 12  3       1.0       2.1        0.1       -0.0\r\n 12  4      -0.6      -2.5       -0.1        0.0\r\n 12  5       0.9       0.5       -0.0       -0.0\r\n 12  6      -0.1       0.6        0.0        0.1\r\n 12  7       0.5      -0.0        0.0        0.0\r\n 12  8      -0.4       0.1       -0.0        0.0\r\n 12  9      -0.4       0.3        0.0       -0.0\r\n 12 10       0.2      -0.9        0.0       -0.0\r\n 12 11      -0.8      -0.2       -0.1        0.0\r\n 12 12       0.0       0.9        0.1        0.0\r\n999999999999999999999999999999999999999999999999\r\n999999999999999999999999999999999999999999999999\r\n`;\r\nvar geoMag = new Geomag(cof).mag;\r\n// var geoMag = newGeomag.mag;\r\n\r\nexport {\r\n\tserverBase,\r\n\tserverProxy,\r\n\tfields,\r\n\tfieldsConf,\r\n\tcolsToHash,\r\n\tgeoMag\r\n};","import * as Config from './Config.js';\r\n\r\nconst serverBase = window.serverBase || '//maps.kosmosnimki.ru/';\r\nconst ext = {\r\n\t_gtxt: window._gtxt,\r\n\t// _mapHelper: window._mapHelper,\r\n\t_queryMapLayers: window._queryMapLayers,\r\n\tnsGmx: window.nsGmx\r\n};\r\n\r\nconst _getParentByClassName = (node, name) => {\r\n\twhile(node) {\r\n\t\tif (node.classList && node.classList.contains(name)) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t\tnode = node.parentNode;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nconst _getFirstChildByClassName = (node, name) => {\r\n\tif (node) {\r\n\t\tfor (var i = 0, len = node.childNodes.length; i < len; i++) {\r\n\t\t\tvar pn = node.childNodes[i];\r\n\t\t\tif (pn.classList && pn.classList.contains(name)) {\r\n\t\t\t\treturn pn;\r\n\t\t\t}\r\n\t\t\tpn = _getFirstChildByClassName(pn, name);\r\n\t\t\tif (pn) {\r\n\t\t\t\treturn pn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nconst _chkHiddenFields = (key, str, node) => {\r\n\tvar prnt = _getParentByClassName(node, 'edit-obj'),\r\n\t\tpars = Config.fields[key];\r\n\r\n\tpars.onValue[str].show.forEach((it) => {\r\n\t\tlet pn = _getFirstChildByClassName(prnt, 'field-name-' + it);\r\n\t\tif (pn && pn.classList) { pn.classList.remove('hidden'); }\r\n\t});\r\n\tpars.onValue[str].hide.forEach((it) => {\r\n\t\tlet pn = _getFirstChildByClassName(prnt, 'field-name-' + it);\r\n\t\tif (pn && pn.classList) { pn.classList.add('hidden'); }\r\n\t});\r\n};\r\n\r\nconst _getFieldsTitle = (params) => {\r\n\tvar fields = params.fields || [],\r\n\t\tdFields = params.dFields || {},\r\n\t\thashCols = params.hashCols || {},\r\n\t\tkvKey = hashCols['Квартал'] ? 'Квартал' : (hashCols.kv ? 'kv' : 'kvartal'),\r\n\t\tskipKeys = fields.reduce((a, v) => { a[v.name] = true; return a; }, {});\r\n\r\n\tObject.keys(hashCols).map(fk => {\r\n\t\tif (fk !== 'geomixergeojson' && fk !== 'gmx_id' && !(fk in skipKeys)) {\r\n\t\t\tvar keyHash = Config.fields[fk],\r\n\t\t\t\ttitle = keyHash ? keyHash.title : '',\r\n\t\t\t\tout = { name: fk };\r\n\r\n\t\t\tif (title) {\r\n\t\t\t\tout.title = title;\r\n\t\t\t}\r\n\t\t\tif (dFields[fk]) {\r\n\t\t\t\tout.value = dFields[fk];\r\n\t\t\t}\r\n\t\t\tif (params.del) {\r\n\t\t\t\tout.hide = true;\r\n\t\t\t} else if (fk === 'FRSTAT') {\r\n\t\t\t\tout = {name: fk, hide: true, value: 0};\r\n\t\t\t} else if (fk === 'snap') {\r\n\t\t\t\tout = {name: fk, hide: true, value: params.snap || ''};\r\n\t\t\t} else if (fk === 'report_t') {\r\n\t\t\t\tfields.push({ name: fk, hide: true });\r\n\r\n\t\t\t\tdelete out.name;\r\n\r\n\t\t\t\tout.isRequired = true;\r\n\t\t\t\tout.view = {\r\n\t\t\t\t\tgetUI: function(editDialog) {\r\n\t\t\t\t\t\tvar select = L.DomUtil.create('select', 'gmxForest-selectItem selectStyle');\r\n                        var opt = L.DomUtil.create('option', '', select);\r\n                        opt.setAttribute('id', 0);\r\n                        opt.text = 'об использовании лесов';\r\n\t\t\t\t\t\tif (out.value === opt.text) {\r\n\t\t\t\t\t\t\t//opt.setAttribute('checked', true);\r\n\t\t\t\t\t\t\tselect.options.selectedIndex = 0;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\topt = L.DomUtil.create('option', '', select);\r\n                        opt.setAttribute('id', 1);\r\n                        opt.text = 'о воспроизводстве лесов';\r\n\t\t\t\t\t\tif (out.value === opt.text) {\r\n\t\t\t\t\t\t\t// opt.checked = true;\r\n\t\t\t\t\t\t\tselect.options.selectedIndex = 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (out.value) {\r\n\t\t\t\t\t\t\tsetTimeout(function() {editDialog.set(fk, out.value);}, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tselect.onchange = function() {\r\n\t\t\t\t\t\t\tvar str = select.options[select.options.selectedIndex].text;\r\n\t\t\t\t\t\t\t// console.log('ssssssssss', str, editDialog);\r\n\t\t\t\t\t\t\teditDialog.set(fk, str);\r\n\t\t\t\t\t\t\t_chkHiddenFields(fk, str, select);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t// setTimeout(_chkHiddenFields(fk, select.options[select.options.selectedIndex].text, select), 1200);\r\n\t\t\t\t\t\treturn select;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t} else if (fk === kvKey && params.kvartal) {\r\n\t\t\t\tout.value = params.kvartal;\r\n\t\t\t}\r\n\t\t\tfields.push(out);\r\n\t\t}\r\n\t});\r\n\treturn fields;\r\n};\r\n\r\nconst editObject = (layerId, objectId, params) => {\r\n\tparams.fields = _getFieldsTitle(params);\r\n\r\n\tlet editControl = new window.nsGmx.EditObjectControl(layerId, objectId, params);\r\n\teditControl.initPromise.then(function(pNode) {\r\n\t\t // console.log('editObject1', pNode, editControl);\r\n\t\t_chkHiddenFields('report_t', 'ИЛ', pNode);\r\n\t\tif (pNode && params.del) {\r\n\t\t\tlet node = pNode.getElementsByClassName('obj-edit-canvas')[0];\r\n\t\t\tif (node) { pNode.parentNode.style.height = node.style.height = 'auto'; }\r\n\t\t}\r\n\r\n\t});\r\n\treturn editControl;\r\n};\r\n\r\nconst saveLayer = (properties) => {\r\n\tlet layerProperties = new nsGmx.LayerProperties();\r\n\tlayerProperties.initFromViewer('Vector', null, properties);\r\n\r\n\treturn layerProperties.save().then(function(response) {\r\n\t\tif (response.Result) {\r\n\t\t\tlet props = response.Result.properties;\r\n\t\t\twindow._layersTree.addLayerToTree(props.name);\r\n\t\t\tsetTimeout(ext._queryMapLayers.saveMap, 1000);\r\n\t\t\treturn props;\r\n\t\t}\r\n\t});\r\n};\r\n\r\nconst createLayer = (flag) => {\r\n\tlet prnt = nsGmx.Utils._div(null, [['attr','id','new' + 'Vector' + 'Layer'], ['css', 'height', '100%']]),\r\n\t\tdialogDiv = nsGmx.Utils.showDialog(flag ? 'Создать слой квартальной сети' : 'Создать группу делянок', prnt, 340, 340, false, false);\r\n\r\n\treturn nsGmx.createLayerEditor(false, 'Vector', prnt, {}, {\r\n\t\tdoneCallback: function(res) {\r\n\t\t\tres.then(json => {\r\n\t\t\t\text._queryMapLayers.saveMap();\r\n\t\t\t});\r\n\t\t\text.nsGmx.Utils.removeDialog(dialogDiv);\r\n\t\t}\r\n\t});\r\n\r\n};\r\n\r\nconst editLayer = (layerId) => {\r\n\twindow._mapHelper.createLayerEditor(layerId, 'Vector', undefined, nsGmx.gmxMap.layersByID[layerId].getGmxProperties());\r\n};\r\n\r\nexport {\r\n\teditLayer,\r\n\tcreateLayer,\r\n\teditObject,\r\n\tsaveLayer\r\n};","<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tgetReverse: null,\r\n\t\t\t\tstandart: '',\r\n\t\t\t\tring: [],\r\n\t\t\t\ttab: 2\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tlatlng: ({ geoJson }) => geoJson.coordinates[0][0]\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\ttoggleTab(tab) {\r\n\t\t\t\tif (tab === 1) {\r\n\t\t\t\t\tthis.nextPoint(ev.target, true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\treverse(tab) {\r\n\t\t\t\tconst {getReverse} = this.get();\r\n\t\t\t\tthis.set({ring: getReverse()});\r\n\t\t\t\t// console.log('ring', ring, geoJson);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"main_pop_cont_2\">\r\n\t<div class=\"pop_title edit\"></div>\r\n\t<div class=\"tabbable\" id=\"tabs-440015\">\r\n\t   <ul class=\"nav nav-tabs\">\r\n\t\t  <li class=\"nav-item edit\" on:click=\"set({tab: 2})\">\r\n\t\t\t <a class=\"nav-link mi {tab === 2 ? 'active' : ''}\" href=\"#tab2\" data-toggle=\"tab\" aria-expanded=\"false\">Информация</a>\r\n\t\t  </li>\r\n\t\t  <li class=\"nav-item edit\" on:click=\"set({tab: 1})\">\r\n\t\t\t <a class=\"nav-link mi {tab === 1 ? 'active' : ''}\" href=\"#tab1\" data-toggle=\"tab\" aria-expanded=\"true\">Контур делянки </a>\r\n\t\t  </li>\r\n\t   </ul>\r\n\t   <div class=\"tab-content\">\r\n\t\t  <div class=\"tab-pane active tab1 {tab === 2 ? 'disabled' : ''}\" ref:tab1 aria-expanded=\"true\">\r\n\t\t\t <div class=\"scrollbar scrolly\">\r\n\t\t\t\t<div class=\"pop_ro_title\">\r\n\t\t\t\t   <div class=\"pop_ro_title_left\">Координаты привязочной точки</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"pop_ro pop_ro_radio_input\">\r\n\t\t\t\t   <input class=\"inp_pop_mini\" placeholder=\"lat\" value=\"{latlng[1]}\" disabled />\r\n\t\t\t\t   <input class=\"inp_pop_mini\" placeholder=\"long\" value=\"{latlng[0]}\" disabled />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"pop_ro_title\">\r\n\t\t\t\t   <div class=\"pop_ro_title_left\">Контур делянки</div>\r\n\t\t\t\t\t<div class=\"gmx-geometry-select-container\"><button on:click=\"reverse()\" class=\"gmx-sidebar-button\">(Поменять порядок обхода)</button></div>\r\n\r\n\t\t\t\t</div>\r\n\t{#if ring}\r\n\t\t{#each ring as it, i}\r\n\t\t<div class=\"pop_ro ring ring{i}\">\r\n\t\t\t<div class=\"pop_ro_title_left\">{i + 0}-{i === ring.length - 1 ? 0 : i + 1}</div>\r\n\t\t\t<input name=\"ring{i}_a\" value=\"{it[0]}\" class=\"inp_pop_mini_m\" disabled />\r\n\t\t\t-\r\n\t\t\t<input name=\"ring{i}_d\" value=\"{Math.round(it[1])}\" class=\"inp_pop_mini_m\" placeholder=\"Distance\" type=\"number\" min=\"0\" step=\"1\" disabled />\r\n\t\t</div>\r\n\t\t{/each}\r\n\t{/if}\r\n\r\n\t\t\t </div>\r\n\t\t  </div>\r\n\t\t  <div class=\"tab-pane {tab === 1 ? 'disabled' : ''} tab2\" ref:tab2 aria-expanded=\"false\">\r\n\t\t\t <div class=\"scrollbar scrolly\" id=\"style-4\">\r\n\t\t\t\t{@html standart}\r\n\t\t\t </div>\r\n\t\t  </div>\r\n\t   </div>\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\r\n.main_pop_cont_2 {\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 287px;\r\n    height: 460px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: left;\r\n}\r\n.main_pop_cont_2 div {\r\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n}\r\n.main_pop_cont_2 div button {\r\n    cursor: pointer;\r\n}\r\n.scrollbar {\r\n    height: 340px;\r\n    width: 100%;\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n}\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: -5px;\r\n}\r\n.pop_ro_title_big {\r\n    font-style: normal;\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    color: #394B59;\r\n    display: block;\r\n}\r\n.pop_ro_title_radio {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-bottom: -12px;\r\n    margin-top: -5px;\r\n}\r\n.custom-control-input {\r\n    position: relative;\r\n    z-index: 1;\r\n    opacity: 1;\r\n    margin-right: 10px;\r\n    top: 2px;\r\n}\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    display: block;\r\n}\r\n.pop_ro.pop_ro_radio_input {\r\n    margin-left: 23px;\r\n}\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 5px 15px;\r\n}\r\ninput.inp_pop {\r\n    width: 100%;\r\n    text-align: left;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini {\r\n    width: 48%;\r\n    text-align: left;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini_m {\r\n    width: 60px;\r\n    text-align: left;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\n.pop_ro_right_dotted span {\r\n    cursor: pointer;\r\n}\r\n.add_thin_ic {\r\n    content: url(./img/add_thin_ic.svg);\r\n}\r\n.dotted_ic {\r\n    content: url(./img/remove_thin_ic.svg);\r\n}\r\n.pop_bottom {\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 40px;\r\n    border-top: 1px solid #D8E1E8;\r\n    align-items: center;\r\n}\r\n.pop_bottom_left {\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-right: 1px solid #D8E1E8;\r\n    cursor: pointer;\r\n}\r\n.pop_bottom_right {\r\n    color: #394B59;\r\n    width: 50%;\r\n    justify-content: center;\r\n    color: #318CFE;\r\n    cursor: pointer;\r\n}\r\n.main_pop_cont_4_Imp {\r\n\tposition: absolute;\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 218px;\r\n    height: 118px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 15px;\r\n}\r\n.info {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: right;\r\n    text-decoration-line: underline;\r\n    cursor: pointer;\r\n    color: #318CFE;\r\n}\r\n.main_pop_cont_4_Imp_text {\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    text-align: left;\r\n    line-height: 18px;\r\n    color: #10161A;\r\n    display: block;\r\n}\r\n.pop_ro_title .main_pop_cont_4_Imp {\r\n\tdisplay: none;\r\n}\r\n.pop_ro_title .info:hover .main_pop_cont_4_Imp {\r\n\tdisplay: block;\r\n}\r\n\r\n.error {\r\n\tbackground-color: lightcoral;\r\n}\r\n.disabled {\r\n    display: none;\r\n}\r\n\r\n.nav-tabs {\r\n    border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.nav {\r\n    display: -webkit-box;\r\n    display: -webkit-flex;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    padding-left: 0;\r\n    margin-bottom: 0;\r\n    list-style: none;\r\n}\r\n\r\n.nav-tabs .nav-item {\r\n    width: 50%;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    background: #F3F7FA;\r\n    border-left: 1px solid lightgray;\r\n}\r\n\r\nlink.active {\r\n    color: #02A97A;\r\n    background-color: rgba(2, 169, 122, 0.1);\r\n    border-bottom: 4px solid #02A97A;\r\n}\r\n\r\nli.nav-item.edit {\r\n\tfont-size: 14px;\r\n}\r\n\r\n.nav-link {\r\n    display: block;\r\n    padding: .5em 1em;\r\n}\r\n\r\na.nav-link.mi {\r\n    font-size: 11px;\r\n    line-height: 23px;\r\n}\r\n\r\nspan.font_normal {\r\n    font-weight: 400;\r\n    color: #333;\r\n}\r\n\r\n:global(.gmxPopup .leaflet-popup-content-wrapper .leaflet-popup-content) {\r\n    overflow: hidden;\r\n    min-width: 290px;\r\n}\r\n\r\n.leaflet-popup-content {\r\n    line-height: 1.4;\r\n    margin: -2px -5px;\r\n}\r\n\r\na.nav-link.mi {\r\n    font-size: 13px;\r\n    line-height: 26px;\r\n    text-decoration: none;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    font-weight: 600;\r\n    color: #394B59;\r\n}\r\n\r\na.nav-link.mi.active {\r\n    color: #02A97A;\r\n    background-color: rgba(2, 169, 122, 0.1);\r\n    border-bottom: 4px solid #02A97A;\r\n}\r\n\r\ndiv.active {\r\n    background-color: transparent;\r\n    padding: 20px 0px;\r\n}\r\n\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 20px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: -5px;\r\n}\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 15px 15px;\r\n    align-items: center;\r\n    margin-top: 7px;\r\n}\r\n\r\nbutton.gmx-sidebar-button {\r\n    background: transparent;\r\n    border: 0 solid lightgray;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    padding: 0 13px;\r\n    background: #02A97A;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #FFF;\r\n    width: 180px;\r\n    height: 30px;\r\n    background: #ED5641;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n    position: relative;\r\n    left: 3px;\r\n}\r\n\r\ninput.inp_pop_mini_m {\r\n    width: 60px;\r\n    text-align: left;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    left: 3px;\r\n    position: relative;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\n\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    min-width: 35px;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\ndiv#style-4 {\r\n    padding: 20px 15px;\r\n}\r\n\r\n.leaflet-container a.leaflet-popup-close-button {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    padding: 11px 4px 0 5px;\r\n    border: none;\r\n    text-align: center;\r\n    width: 18px;\r\n    height: 14px;\r\n    font: 16px/14px Tahoma, Verdana, sans-serif;\r\n    color: #c3c3c3;\r\n    text-decoration: none;\r\n    font-weight: bold;\r\n    background: transparent;\r\n}\r\n</style>\r\n","import * as Config from './Config.js';\r\nimport * as EditorLib from './EditorLib.js';\r\nimport Popup from './Popup.html';\r\n\r\nconst\tserverBase = window.serverBase || '//maps.kosmosnimki.ru/',\r\n\t\tserverProxy = serverBase + 'Plugins/ForestReport/proxy';\r\n\t\t// ,\r\n\t\t// fields = {\r\n\t\t\t// report_type:\t{ Name: 'report_type', ColumnSimpleType: 'String', title: 'Тип отчета'},\r\n\t\t\t// company:\t\t{ Name: 'company', ColumnSimpleType: 'String', title: 'Наименование организации'},\r\n\t\t\t// region:\t\t\t{ Name: 'region', ColumnSimpleType: 'String', title: 'Субъект Российской Федерации'},\r\n\t\t\t// forestry:\t\t{ Name: 'forestry', ColumnSimpleType: 'String', title: 'Лесничество'},\r\n\t\t\t// subforestry:\t{ Name: 'subforestry', ColumnSimpleType: 'String', title: 'Участковое Лесничество'},\r\n\t\t\t// dacha:\t\t\t{ Name: 'dacha', ColumnSimpleType: 'String', title: 'Дача'},\r\n\t\t\t// kvartal:\t\t{ Name: 'kvartal', ColumnSimpleType: 'Integer', title: 'Квартал'},\r\n\t\t\t// vydel:\t\t\t{ Name: 'vydel', ColumnSimpleType: 'String', title: 'Выделы'},\r\n\t\t\t// delyanka:\t\t{ Name: 'delyanka', ColumnSimpleType: 'String', title: 'Делянка'},\r\n\t\t\t// form_rub:\t\t{ Name: 'form_rub', ColumnSimpleType: 'String', title: 'Форма рубки'},\r\n\t\t\t// type_rub:\t\t{ Name: 'type_rub', ColumnSimpleType: 'String', title: 'Тип рубки'},\r\n\t\t\t// reforest_type:\t{ Name: 'reforest_type', ColumnSimpleType: 'String', title: 'Тип лесовосстановления'},\r\n\t\t\t// year:\t\t\t{ Name: 'year', ColumnSimpleType: 'String', title: 'Год'},\r\n\t\t\t// area:\t\t\t{ Name: 'area', ColumnSimpleType: 'Float', title: 'Площадь'},\r\n\t\t\t// FRSTAT:\t\t\t{ Name: 'FRSTAT', ColumnSimpleType: 'Integer', title: 'Признак отчета'},\r\n\t\t\t// snap:\t\t\t{ Name: 'snap', ColumnSimpleType: 'String', title: 'Привязочный ход'}\r\n\t\t// },\r\n\t\t// cols = Object.keys(fields).map((key) => {\r\n\t\t\t// return {\r\n\t\t\t\t// Name: key,\r\n\t\t\t\t// ColumnSimpleType: fields[key].ColumnSimpleType\r\n\t\t\t// }\r\n\t\t// });\r\n\r\n// console.log('______________', Config.fieldsConf)\r\n\r\nconst chkLayer = (val) => {\r\n\tlet map = nsGmx.leafletMap,\r\n\t\tlayer = nsGmx.gmxMap.layersByID[val],\r\n\t\tlatLngBounds = L.gmxUtil.getGeometryBounds(layer._gmx.geometry).toLatLngBounds(true);\r\nconsole.log('ddddddddd', layer._gmx.geometry)\r\n\tmap.fitBounds(latLngBounds);\r\n\tif (!layer._map) {\r\n\t\tmap.addLayer(layer);\r\n\t}\r\n};\r\n\r\nconst getAngleDist = (latlng, latlngs, dec, delta) => {\r\n\tdelta = delta || 1;\r\n\tlet p = latlng;\r\n\tlet ring = latlngs.map((latlng) => {\r\n\t\tlet bearing = L.GeometryUtil.bearing(p, latlng),\r\n\t\t\tdistance = L.gmxUtil.distVincenty(p.lng, p.lat, latlng.lng, latlng.lat);\r\n\r\n\t\tp = latlng;\r\n\t\t//console.log('dec', dec, bearing)\r\n\t\tif (dec) {\r\n\t\t\tbearing -= dec;\r\n\t\t}\r\n\t\tbearing = bearing + (bearing < 0 ? 360 : 0);\r\n\t\tbearing = Math.floor(bearing * 100) / 100;\r\n\t\treturn [bearing, distance];\r\n\t\t// return [bearing, distance * delta];\r\n\t});\r\n\treturn ring;\r\n};\r\n\r\nconst getFormBody = function(par) {\r\n\treturn Object.keys(par).map((key) => {\r\n\t\treturn encodeURIComponent(key) + '=' + encodeURIComponent(par[key]);\r\n\t}).join('&');\r\n};\r\nconst getFormData = function(obj) {\r\n\tlet formData  = new FormData();\r\n\tfor(let name in obj) {\r\n\t\tlet val  = obj[name];\r\n\t\tformData.append(name, typeof val === 'object' ? JSON.stringify(val) : val);\r\n\t}\r\n\treturn formData;\r\n};\r\n\r\nconst createVectorLayer = (params) => {\r\n\tparams.WrapStyle = 'None';\r\n\r\n\tconst url = `${serverBase}VectorLayer/CreateVectorLayer.ashx`;\r\n\tL.gmxUtil.loaderStatus(url);\r\n\t\r\n\treturn fetch(url, {\r\n\t\tmethod: 'post',\r\n\t\tmode: 'cors',\r\n\t\tcredentials: 'include',\r\n\t\tbody: getFormData(params)\t// TODO: сервер почему то не хочет работать так https://googlechrome.github.io/samples/fetch-api/fetch-post.html\r\n\t})\r\n\t\t.then(res => { L.gmxUtil.loaderStatus(url, true); return res.json(); })\r\n\t\t.catch(err => console.warn(err));\r\n};\r\n\r\nconst querySelect = (sql) => {\r\n\t// console.log('modifyVectorObjects ____ ', layerId, features);\r\n\r\n\tconst url = `${serverBase}VectorLayer/CreateVectorLayer.ashx`;\r\n\tL.gmxUtil.loaderStatus(url);\r\n\r\n\treturn fetch(url, {\r\n\t\tmethod: 'post',\r\n\t\tmode: 'cors',\r\n\t\tcredentials: 'include',\r\n\t\theaders: {'Content-type': 'application/x-www-form-urlencoded'},\r\n\t\tbody: getFormBody({\r\n\t\t\tWrapStyle: 'None',\r\n\t\t\tsql: sql\r\n\t\t})\r\n\t})\r\n\t\t.then(res => { L.gmxUtil.loaderStatus(url, true); return res.json(); })\r\n\t\t.catch(err => console.warn(err));\r\n};\r\n\r\nconst modifyVectorObjects = (layerId, features) => {\r\n\t// console.log('modifyVectorObjects ____ ', layerId, features);\r\n\tconst url = `${serverBase}VectorLayer/ModifyVectorObjects.ashx`;\r\n\r\n\tL.gmxUtil.loaderStatus(url);\r\n\treturn fetch(url, {\r\n\t\tmethod: 'post',\r\n\t\tmode: 'cors',\r\n\t\tcredentials: 'include',\r\n\t\theaders: {'Content-type': 'application/x-www-form-urlencoded'},\r\n\t\tbody: getFormBody({\r\n\t\t\tWrapStyle: 'None',\r\n\t\t\tLayerName : layerId,\r\n\t\t\tgeometry_cs: 'EPSG:4326',\r\n\t\t\tObjects: JSON.stringify(features)\r\n\t\t})\r\n\t})\r\n\t\t.then(res => { L.gmxUtil.loaderStatus(url, true); return res.json(); })\r\n\t\t.catch(err => console.warn(err));\r\n};\r\n\r\nconst getReq = url => {\r\n\tL.gmxUtil.loaderStatus(url);\r\n\treturn fetch(url, {\r\n\t\t\tmode: 'cors',\r\n\t\t\tcredentials: 'include'\r\n\t\t})\r\n\t\t.then(res => { L.gmxUtil.loaderStatus(url, true); return res.json(); })\r\n\t\t.catch(err => console.warn(err));\r\n};\r\n\r\nconst getReportsCount = () => {\r\n\treturn getReq(serverProxy + '?path=/rest/v1/get-current-user-info');\r\n};\r\n\r\nconst loadFeature = (layerId, id) => {\r\n\tconst url = `${serverBase}VectorLayer/Search.ashx?layer=${layerId}&query=gmx_id=${id}&geometry=true&out_cs=EPSG:4326&WrapStyle=None`;\r\n\treturn getReq(url);\r\n};\r\n\r\nconst loadFeatures = id => {\r\n\tconst url = `${serverBase}VectorLayer/Search.ashx?layer=${id}&geometry=true&out_cs=EPSG:4326&WrapStyle=None`;\r\n\treturn getReq(url);\r\n};\r\n\r\nconst colsToHash = arr => {\r\n\treturn arr.reduce((a, v, i) => { a[v] = i; return a; }, {});\r\n};\r\n\r\nconst loadQuadrantValues = id => {\r\n\treturn loadFeatures(id)\r\n\t\t.then(json => {\r\n\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\tlet res = json.Result,\r\n\t\t\t\t\tcols = res.fields,\r\n\t\t\t\t\thashCols = colsToHash(cols),\r\n\t\t\t\t\tnm = hashCols.kv,\r\n\t\t\t\t\tnmGeo = hashCols.geomixergeojson;\r\n\t\t\t\treturn res.values.reduce((a, v, i) => {\r\n\t\t\t\t\tlet key = v[nm],\r\n\t\t\t\t\t\tgeo = v[nmGeo],\r\n\t\t\t\t\t\tbbox = L.gmxUtil.getGeometryBounds(geo),\r\n\t\t\t\t\t\tp = a[key] || {};\r\n\t\t\t\t\tif (p.bbox) {\r\n\t\t\t\t\t\tbbox.extendBounds(p.bbox);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tv.bbox = bbox;\r\n\t\t\t\t\t\tp = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ta[key] = p;\r\n\t\t\t\t\treturn a;\r\n\t\t\t\t}, {});\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nconst selectFeaturesWithDrawing = (id, geometry) => {\r\n\tconst params = {\r\n\t\tWrapStyle: 'None',\r\n\t\tlayer: id,\r\n\t\tcolumns: '[{\"Value\":\"[gmx_id]\"}]',\r\n\t\tpage: 0,\r\n\t\t// pagesize: null,\r\n\t\tquery: `STIntersects([gmx_geometry], GeometryFromGeoJson('${JSON.stringify(geometry)}', 4326))`\r\n\t};\r\n\r\n\treturn fetch(`${serverBase}VectorLayer/Search.ashx?${L.gmxUtil.getFormData(params)}`, {\r\n\t\tmode: 'cors',\r\n\t\tcredentials: 'include',\r\n\t\theaders: {\r\n\t\t\t'Accept': 'application/json'\r\n\t\t}\r\n\t})\r\n\t.then(res => res.json())\r\n\t.then(json => {\r\n\t\tif (json.Status === 'ok' && json.Result) {\r\n\t\t\treturn json.Result.values.reduce((a, v) => {\r\n\t\t\t\ta[v] = true;\r\n\t\t\t\treturn a;\r\n\t\t\t}, {});\r\n\t\t}\r\n\t})\r\n\t.catch(err => console.warn(err))\r\n};\r\n\r\nconst getLayersParams = (gmxMap) => {\r\n\tlet satLayers = [];\r\n\r\n\tgmxMap.layers.forEach((it) => {\r\n\t\tif (it.getGmxProperties && it._map) {\r\n\t\t\tlet props = it.getGmxProperties(),\r\n\t\t\t\tmetaProps = props.MetaProperties || {},\r\n\t\t\t\tout = {layerId: props.name, type: 'оптическая'};\r\n\t\t\tif (props.IsRasterCatalog || props.type === 'Raster') {\r\n\t\t\t\tif (props.Temporal) {\r\n\t\t\t\t\tvar dt = it.getDateInterval();\r\n\t\t\t\t\tif (dt.beginDate) { out.beginDate = dt.beginDate.getTime()/1000; }\r\n\t\t\t\t\tif (dt.endDate) { out.endDate = dt.endDate.getTime()/1000; }\r\n\t\t\t\t}\r\n\t\t\t\tif (metaProps.type) {\r\n\t\t\t\t\tout.type = metaProps.type.Value;\r\n\t\t\t\t}\r\n\t\t\t\tif (metaProps.system) {\r\n\t\t\t\t\tout.system = metaProps.system.Value;\r\n\t\t\t\t}\r\n\t\t\t\tif (metaProps.resolution) {\r\n\t\t\t\t\tout.resolution = metaProps.resolution.Value;\r\n\t\t\t\t}\r\n\t\t\t\tsatLayers.push(out);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\treturn satLayers;\r\n};\r\n\r\nconst getLayersIds = (gmxMap) => {\r\n\tlet layerIds = [], quadrantIds = [], limit = 0, layerIdsHash = {}, quadrantIdsHash = {};\r\n\r\n\tgmxMap.layers.forEach((it) => {\r\n\t\tif (it.getGmxProperties) {\r\n\t\t\tlet props = it.getGmxProperties(),\r\n\t\t\t\tmetaProps = props.MetaProperties || {};\r\n\t\t\tif (\r\n\t\t\t\tprops.type.toLowerCase() === 'vector' &&\r\n\t\t\t\tprops.GeometryType.toLowerCase() === 'polygon' &&\r\n\t\t\t\t!props.IsRasterCatalog &&\r\n\t\t\t\t!props.Quicklook\r\n\t\t\t\t) {\r\n\t\t\t\tlet keys = it._gmx.tileAttributeTypes,\r\n\t\t\t\t\thash = {id: props.name, title: props.title, bounds: it.getBounds(), _layer: it};\r\n\r\n\t\t\t\t// if (keys.FRSTAT && (keys.kv || keys.kvartal || keys['Квартал'])) {\r\n\t\t\t\t\t// hash.linkKey = keys.kv ? 'kv' : (keys.kvartal ? 'kvartal' : 'Квартал');\r\n\t\t\t\tif (keys.FRSTAT && keys.snap) {\r\n\t\t\t\t\thash.linkKey = 'kvartal';\r\n\t\t\t\t\tlayerIds.push(hash);\r\n\t\t\t\t\tlayerIdsHash[hash.id] = hash;\r\n\r\n\t\t\t\t\tit.addPopupHook('forestCont', (properties, div, node, hooksCount) => {\r\n\t\t\t\t\t\tlet standart = div.innerHTML.replace(/<b>FRSTAT:.+?<br>/, '').replace(/<b>snap:.+?<br>/, '')\r\n\t\t\t\t\t\t// div.innerHTML = '[forestCont]';\r\n\t\t\t\t\t\tdiv.innerHTML = '';\r\n\t\t\t\t\t\tloadFeature(hash.id, properties.gmx_id).then((json) => {\r\n\t\t\t\t\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\t\t\t\t\tlet arr = json.Result.values[0],\r\n\t\t\t\t\t\t\t\t\tgeo = arr[arr.length - 1],\r\n\t\t\t\t\t\t\t\t\tgeoJson = L.gmxUtil.geometryToGeoJSON(geo),\r\n\t\t\t\t\t\t\t\t\tcoord = geoJson.coordinates[0][0],\r\n\t\t\t\t\t\t\t\t\tdeclination = geoMag(coord[1], coord[0], 0).dec || 0,\r\n\t\t\t\t\t\t\t\t\tlatlngs = geoJson.coordinates[0].map((it) => L.latLng(it[1], it[0])),\r\n\t\t\t\t\t\t\t\t\tring = getAngleDist(latlngs[0], latlngs, declination);\r\n\t\t\t\t\t\t\t\tring.shift();\r\n\r\n\t\t\t\t\t\t\t\tlet popup = new Popup({\r\n\t\t\t\t\t\t\t\t\ttarget: div,\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tgetReverse: () => { latlngs.reverse(); let arr = getAngleDist(latlngs[0], latlngs, declination); arr.shift(); return arr; },\r\n\t\t\t\t\t\t\t\t\t\tring: ring,\r\n\t\t\t\t\t\t\t\t\t\tstandart: standart,\r\n\t\t\t\t\t\t\t\t\t\tproperties: properties,\r\n\t\t\t\t\t\t\t\t\t\t// declination: geoMag(coord[1], coord[0], 0).dec || 0,\r\n\t\t\t\t\t\t\t\t\t\tgeoJson: geoJson\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tlet gmxPopup = nsGmx.leafletMap._gmxPopups[0],\r\n\t\t\t\t\t\t\t\t\tbbox = L.gmxUtil.getGeometryBounds(geoJson),\r\n\t\t\t\t\t\t\t\t\tlatlng = L.latLng(bbox.max.y, bbox.min.x + (bbox.max.x - bbox.min.x) / 2);\r\n\r\n\t\t\t\t\t\t\t\tgmxPopup.setLatLng(latlng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (keys.kv) {\r\n\t\t\t\t\thash.linkKey = 'kv';\r\n\t\t\t\t\tquadrantIds.push(hash);\r\n\t\t\t\t\tquadrantIdsHash[hash.id] = hash;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\treturn {layerIds, quadrantIds, limit, cols: []};\r\n};\r\n\r\nconst saveState = (data, key) => {\r\n\tkey = key || 'gmxForest_';\r\n\twindow.localStorage.setItem(key, JSON.stringify(data));\r\n};\r\n\r\nconst getState = key => {\r\n\tkey = key || 'gmxForest_';\r\n\treturn JSON.parse(window.localStorage.getItem(key)) || {};\r\n};\r\n\r\nconst getReportType = (zn) => {\r\n\tif (zn.indexOf('использован') > -1) { zn = 'ИЛ'; }\r\n\telse if (zn.indexOf('восста') > -1) { zn = 'ВЛ'; }\r\n\tconst pt = Config.fieldsConf.report_t.onValue[zn] || zn;\r\n\r\n\treturn pt ? pt.value : zn;\r\n};\r\n\r\nconst sendReport = (flag, numPoints, drawSnap, showGrid, pdf, checked, layerItems, hashCols, params, format, layerID, gmxMap, changedParams, num_points, templ, app) => {\r\n\tlet groupRequest = [],\r\n\t\tfeatures = [],\r\n\t\tsatLayers = getLayersParams(gmxMap);\r\n\r\n\tfor (let i = 0, len = layerItems.length; i < len; i++) {\r\n\t\tlet it = layerItems[i];\r\n\t// layerItems.forEach((it) => {\r\n\t\tlet id = it[hashCols.gmx_id];\r\n\t\tif (checked[id]) {\r\n\t\t\tlet data = {featureID: id, num_points: num_points, templ: templ};\r\n\t\t\tfor (let key in params) {\r\n\t\t\t\tif (key === 'layerID') {\r\n\t\t\t\t\tdata[key] = layerID;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet val = params[key];\r\n\t\t\t\t\tlet par = key in changedParams ? changedParams[key] : {};\r\n\t\t\t\t\tdata[key] = typeof(par) === 'string' ? par : par.field ? it[hashCols[par.field]] : par.value || val.value;\r\n\t\t\t\t}\r\n\t\t\t\tlet emptyFlag = false;\r\n\t\t\t\tif (flag && key !== 'scale' && key !== 'dacha' && key !== 'inn' && data[key] === '') {\r\n\t\t\t\t\temptyFlag = true;\r\n\t\t\t\t\tlet rt = getReportType(data['reportType']);\r\n\t\t\t\t\tif (rt === 'ИЛ' && (key === 'recoveryEventType' || key === 'recoveryEventType')) {\r\n\t\t\t\t\t\temptyFlag = false;\r\n\t\t\t\t\t} else if (rt === 'ВЛ' && (\r\n\t\t\t\t\t\t\t\tkey === 'fellingType' ||\r\n\t\t\t\t\t\t\t\tkey === 'fellingForm' ||\r\n\t\t\t\t\t\t\tkey === 'form_rub' ||\r\n\t\t\t\t\t\t\tkey === 'type_rub'\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\temptyFlag = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n// console.log('ssssssssss', key, data[key]);\r\n\t\t\t\tif (emptyFlag) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata.satLayers = satLayers;\r\n\t\t\tgroupRequest.push(data);\r\n\t\t\tfeatures.push({action:'update', id:id, properties:{FRSTAT:2}});\r\n\t\t}\r\n\t}\r\n\t// });\r\n\r\nlet reparseParams = (arr) => {\r\n\tlet out = arr.map((it) => {\r\n\t\tlet ph = {};\r\n\t\tfor (let key in it) {\r\n\t\t\tswitch(key) {\r\n\t\t\t\tcase 'num_points':\r\n\t\t\t\tcase 'templ':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'quadrantLayerId':\r\n\t\t\t\t\tph.kvartalLayerID = it[key];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'organizationName':\r\n\t\t\t\t\tph.company = it[key];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'sectionForestry':\r\n\t\t\t\t\tph.subForestry = it[key];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'quadrant':\r\n\t\t\t\t\tph.kvartal = Number(it[key]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'stratum':\r\n\t\t\t\t\tph.vydel = it[key];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'recoveryEventType':\r\n\t\t\t\t\tph.reforestType = it[key];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'siteArea':\r\n\t\t\t\t\tph.area = it[key];\r\n\t\t\t\t\t// ph.area = Number(it[key]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'scale':\r\n\t\t\t\t\tph.scale = Number(it[key]) || 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'site':\r\n\t\t\t\t\tph.delyanka = String(it[key]);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'satLayers':\r\n\t\t\t\t\tph.satLayers = it.satLayers.map((pt) => {\r\n\t\t\t\t\t\tlet ps = {};\r\n\t\t\t\t\t\tfor (let key in pt) {\r\n\t\t\t\t\t\t\tswitch(key) {\r\n\t\t\t\t\t\t\t\tcase 'resolution':\r\n\t\t\t\t\t\t\t\t\tps.resolution = String(pt.resolution) + ' м';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'layerId':\r\n\t\t\t\t\t\t\t\t\tps.layerID = pt.layerId;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tps[key] = pt[key];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn ps;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tph[key] = it[key];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ph;\r\n\t});\r\n\treturn out;\r\n};\r\n\r\nlet tt = reparseParams(groupRequest);\r\n// console.log('groupRequest1', JSON.stringify(tt));\r\n\r\n\treturn fetch(serverProxy + '', {\r\n\t\t\tmethod: 'post',\r\n\t\t\tmode: 'cors',\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({groupRequest: tt, numPoints: numPoints, drawSnap: drawSnap, pdf: pdf, showGrid: showGrid, path: '/rest/v1/createfile' })\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(json => {\r\n// console.log('createfile', json);\r\n\t\t\tif (json.status === 'active') {\r\n\t\t\t\tsaveState(changedParams);\r\n\t\t\t\treturn chkTask(json.id)\r\n\t\t\t\t\t.then(json => {\r\n// console.log('chkTask', json);\r\n\t\t\t\t\t\tif (json.status === 'completed') {\r\n\t\t\t\t\t\t\tlet downloadFile = json.message;\r\n\r\n\t\t\t\t\t\t\t//window.open('http://lesfond.tk/rest/v1/' + downloadFile, '_self');\r\n\t\t\t\t\t\t\twindow.open(serverProxy + '?path=/rest/v1/getfile&' + downloadFile, '_self');\r\n\r\n\t\t\t\t\t\t\tmodifyVectorObjects(layerID, features).then(function(argv) {\r\n\t\t\t\t\t\t\t\tapp.loadFeatures();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn {report: false};\r\n\t\t\t\t\t\t} else if (json.status === 'error') {\r\n\t\t\t\t\t\t\treturn {report: false, error: json.message};\r\n\t\t\t\t\t\t\t// return json;\r\n\t\t\t\t\t\t\t//reject(json);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => console.warn(err));\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tconsole.warn(err);\r\n\t\t\treturn {report: false};\r\n\t\t});\r\n};\r\n\r\nconst chkTask = id => {\r\n\tconst UPDATE_INTERVAL = 2000;\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet interval = setInterval(() => {\r\n\t\t\tfetch(serverProxy + '?path=/rest/v1/checkstatus&id=' + id, {\r\n\t\t\t\t// mode: 'cors',\r\n\t\t\t\t// credentials: 'include'\r\n\t\t\t})\r\n\t\t\t\t.then(res => res.json())\r\n\t\t\t\t.then(json => {\r\n// console.log('chkTask_______', json);\r\n\t\t\t\t\tif (json.status === 'error') {\r\n\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\tresolve(json);\r\n\t\t\t\t\t} else if (json.status === 'completed') {\r\n\t\t\t\t\t\tclearInterval(interval);\r\n\t\t\t\t\t\tresolve(json);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => console.warn(err));\r\n\t\t}, UPDATE_INTERVAL);\r\n\t})\r\n\t.catch(err => console.warn(err));\r\n};\r\n\r\nconst createSiteLayer = (data, columns) => {\r\n\tdata = data || {};\r\n\tlet props = {\r\n\t\tTitle: data.Title || 'Делянки 1',\r\n\t\tMetaProperties: {\r\n\t\t\t'report_t':{Value: data.report_t || '', Type: 'String'},\r\n\t\t\t'kvartal':{Value: data.kvartalLayerID || '', Type: 'String'},\r\n\t\t\t'forestr':{Value: data.forestr || '', Type: 'String'},\r\n\t\t\t'region':{Value: data.region ||  '', Type: 'String'},\r\n\t\t\t'company':{Value: data.company ||  '', Type: 'String'}\r\n\t\t},\r\n\t\tsrs: 3857,\r\n\t\tColumns: columns || cols,\r\n\t\tSourceType: 'manual',\r\n\t\tGeometryType: \"polygon\"\r\n\t};\r\n\treturn EditorLib.saveLayer(props).then(json => {\r\n\t\tL.gmx.loadLayer(nsGmx.gmxMap.options.mapName, json.name, nsGmx.gmxMap.options)\r\n\t\t.then((res) => {\r\n\t\t});\r\n\t\treturn json.name;\r\n\t});\r\n};\r\n\r\nconst sendVectorFile = (target, flagNames) => {\r\n\t// const url = 'http://10.1.2.20:4000/rest/v1/get-contours',\r\n\tconst url = serverProxy + '?path=/rest/v1/get-contours',\r\n\t\tformData = new FormData();\r\n\r\n\tfor (let i = 0, len = target.files.length; i < len; i++) {\r\n\t\tformData.append('file' + i, target.files[i]);\r\n\t}\r\n\t\r\n\tL.gmxUtil.loaderStatus(url);\r\n\r\n\treturn fetch(url, {\r\n\t\tmethod: 'POST',\r\n\t\tbody: formData,\r\n\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(json => {\r\n\t\t\tL.gmxUtil.loaderStatus(url, true);\r\n\t\t\tif (json.status === 'ok') {\r\n\t\t\t\tlet features = json.text.features,\r\n\t\t\t\t\tcolumns = null;\r\n\t\t\t\tif (flagNames) {\r\n\t\t\t\t\t// console.log('ddddd', features[0]);\r\n\t\t\t\t\tcolumns = Object.keys(features[0].properties).map(key => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tName: key,\r\n\t\t\t\t\t\t\tColumnSimpleType: key === 'FRSTAT' ? 'Integer' : 'String'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn createSiteLayer({\r\n\t\t\t\t\tTitle: json.title || ''\r\n\t\t\t\t}, columns).then(layerID => {\r\n// console.log('sendImportFile', layerID, features);\r\n\t\t\t\t\tif (features.length) {\r\n\t\t\t\t\t\treturn modifyVectorObjects(layerID, features.map((it) => {\r\n\t\t\t\t\t\t\tit.action = 'insert';\r\n\t\t\t\t\t\t\treturn it;\r\n\t\t\t\t\t\t})).then((ev) => {\r\n// console.log('modifyVectorObjects', layerID, ev)\r\n\t\t\t\t\t\t\treturn {layerID: layerID};\r\n\t\t\t\t\t\t\t// this._clearDrawingItems();\r\n\t\t\t\t\t\t\t// map.gmxDrawing.remove(geo);\r\n\t\t\t\t\t\t\t// prnt.regetFeatures();\r\n\t\t\t\t\t\t\t// L.gmx.layersVersion.chkVersion(layerID);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n// console.log('sendImportFile', json);\r\n\t\t\treturn json;\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tconsole.warn(err);\r\n\t\t\treturn {report: false};\r\n\t\t});\r\n};\r\n\r\nconst sendExcel = target => {\r\n\tconst url = serverProxy + '?path=/rest/v1/create-contours',\r\n\t// const url = location.search.indexOf('&test=proxy') !== -1 ? serverProxy + '?path=/rest/v1/create-contours' : 'http://lesfond.tk/rest/v1/create-contours',\r\n\t\tformData = new FormData();\r\n\r\n\tfor (let i = 0, len = target.files.length; i < len; i++) {\r\n\t\tformData.append('file' + i, target.files[i]);\r\n\t}\r\n\t\r\n\tL.gmxUtil.loaderStatus(url);\r\n\r\n\treturn fetch(url, {\r\n\t\tmethod: 'POST',\r\n\t\tbody: formData,\r\n\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(json => {\r\n\t\t\tL.gmxUtil.loaderStatus(url, true);\r\n\t\t\tif (json.status === 'ok') {\r\n\t\t\t\tlet features = json.text.features;\r\n\t\t\t\treturn createSiteLayer({\r\n\t\t\t\t\tTitle: json.title || ''\r\n\t\t\t\t}).then(layerID => {\r\n// console.log('sendImportFile', layerID, features);\r\n\t\t\t\t\tif (features.length) {\r\n\t\t\t\t\t\treturn modifyVectorObjects(layerID, features.map((it) => {\r\n\t\t\t\t\t\t\tit.action = 'insert';\r\n\t\t\t\t\t\t\treturn it;\r\n\t\t\t\t\t\t})).then((ev) => {\r\nconsole.log('modifyVectorObjects', layerID, ev)\r\n\t\t\t\t\t\t\treturn {layerID: layerID};\r\n\t\t\t\t\t\t\t// this._clearDrawingItems();\r\n\t\t\t\t\t\t\t// map.gmxDrawing.remove(geo);\r\n\t\t\t\t\t\t\t// prnt.regetFeatures();\r\n\t\t\t\t\t\t\t// L.gmx.layersVersion.chkVersion(layerID);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n// console.log('sendImportFile', json);\r\n\t\t\treturn json;\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tconsole.warn(err);\r\n\t\t\treturn {report: false};\r\n\t\t});\r\n};\r\n\r\n/*jslint plusplus:true */\r\nfunction Geomag(model) {\r\n\t'use strict';\r\n\tvar wmm,\r\n\t\tmaxord = 12,\r\n\t\ta = 6378.137,\t\t// WGS 1984 Equatorial axis (km)\r\n\t\tb = 6356.7523142,\t// WGS 1984 Polar axis (km)\r\n\t\tre = 6371.2,\r\n\t\ta2 = a * a,\r\n\t\tb2 = b * b,\r\n\t\tc2 = a2 - b2,\r\n\t\ta4 = a2 * a2,\r\n\t\tb4 = b2 * b2,\r\n\t\tc4 = a4 - b4,\r\n\t\tz = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n\t\tunnormalizedWMM;\r\n\r\n\tfunction parseCof(cof) {\r\n\t\twmm = (function (cof) {\r\n\t\t\tvar modelLines = cof.split('\\n'), wmm = [], i, vals, epoch, model, modelDate;\r\n\t\t\tfor (i in modelLines) {\r\n\t\t\t\tif (modelLines.hasOwnProperty(i)) {\r\n\t\t\t\t\tvals = modelLines[i].replace(/^\\s+|\\s+$/g, \"\").split(/\\s+/);\r\n\t\t\t\t\tif (vals.length === 3) {\r\n\t\t\t\t\t\tepoch = parseFloat(vals[0]);\r\n\t\t\t\t\t\tmodel = vals[1];\r\n\t\t\t\t\t\tmodelDate = vals[2];\r\n\t\t\t\t\t} else if (vals.length === 6) {\r\n\t\t\t\t\t\twmm.push({\r\n\t\t\t\t\t\t\tn: parseInt(vals[0], 10),\r\n\t\t\t\t\t\t\tm: parseInt(vals[1], 10),\r\n\t\t\t\t\t\t\tgnm: parseFloat(vals[2]),\r\n\t\t\t\t\t\t\thnm: parseFloat(vals[3]),\r\n\t\t\t\t\t\t\tdgnm: parseFloat(vals[4]),\r\n\t\t\t\t\t\t\tdhnm: parseFloat(vals[5])\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn {epoch: epoch, model: model, modelDate: modelDate, wmm: wmm};\r\n\t\t}(cof));\r\n\t}\r\n\r\n\tfunction unnormalize(wmm) {\r\n\t\tvar i, j, m, n, D2, flnmj,\r\n\t\t\tc = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tcd = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tk = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tsnorm = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice()],\r\n\t\t\tmodel = wmm.wmm;\r\n\t\tfor (i in model) {\r\n\t\t\tif (model.hasOwnProperty(i)) {\r\n\t\t\t\tif (model[i].m <= model[i].n) {\r\n\t\t\t\t\tc[model[i].m][model[i].n] = model[i].gnm;\r\n\t\t\t\t\tcd[model[i].m][model[i].n] = model[i].dgnm;\r\n\t\t\t\t\tif (model[i].m !== 0) {\r\n\t\t\t\t\t\tc[model[i].n][model[i].m - 1] = model[i].hnm;\r\n\t\t\t\t\t\tcd[model[i].n][model[i].m - 1] = model[i].dhnm;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t/* CONVERT SCHMIDT NORMALIZED GAUSS COEFFICIENTS TO UNNORMALIZED */\r\n\t\tsnorm[0][0] = 1;\r\n\r\n\t\tfor (n = 1; n <= maxord; n++) {\r\n\t\t\tsnorm[0][n] = snorm[0][n - 1] * (2 * n - 1) / n;\r\n\t\t\tj = 2;\r\n\r\n\t\t\tfor (m = 0, D2 = (n - m + 1); D2 > 0; D2--, m++) {\r\n\t\t\t\tk[m][n] = (((n - 1) * (n - 1)) - (m * m)) /\r\n\t\t\t\t\t((2 * n - 1) * (2 * n - 3));\r\n\t\t\t\tif (m > 0) {\r\n\t\t\t\t\tflnmj = ((n - m + 1) * j) / (n + m);\r\n\t\t\t\t\tsnorm[m][n] = snorm[m - 1][n] * Math.sqrt(flnmj);\r\n\t\t\t\t\tj = 1;\r\n\t\t\t\t\tc[n][m - 1] = snorm[m][n] * c[n][m - 1];\r\n\t\t\t\t\tcd[n][m - 1] = snorm[m][n] * cd[n][m - 1];\r\n\t\t\t\t}\r\n\t\t\t\tc[m][n] = snorm[m][n] * c[m][n];\r\n\t\t\t\tcd[m][n] = snorm[m][n] * cd[m][n];\r\n\t\t\t}\r\n\t\t}\r\n\t\tk[1][1] = 0.0;\r\n\r\n\t\tunnormalizedWMM = {epoch: wmm.epoch, k: k, c: c, cd: cd};\r\n\t}\r\n\r\n\tthis.setCof = function (cof) {\r\n\t\tparseCof(cof);\r\n\t\tunnormalize(wmm);\r\n\t};\r\n\tthis.getWmm = function () {\r\n\t\treturn wmm;\r\n\t};\r\n\tthis.setUnnorm = function (val) {\r\n\t\tunnormalizedWMM = val;\r\n\t};\r\n\tthis.getUnnorm = function () {\r\n\t\treturn unnormalizedWMM;\r\n\t};\r\n\tthis.getEpoch = function () {\r\n\t\treturn unnormalizedWMM.epoch;\r\n\t};\r\n\tthis.setEllipsoid = function (e) {\r\n\t\ta = e.a;\r\n\t\tb = e.b;\r\n\t\tre = 6371.2;\r\n\t\ta2 = a * a;\r\n\t\tb2 = b * b;\r\n\t\tc2 = a2 - b2;\r\n\t\ta4 = a2 * a2;\r\n\t\tb4 = b2 * b2;\r\n\t\tc4 = a4 - b4;\r\n\t};\r\n\tthis.getEllipsoid = function () {\r\n\t\treturn {a: a, b: b};\r\n\t};\r\n\tthis.calculate = function (glat, glon, h, date) {\r\n\t\tif (unnormalizedWMM === undefined) {\r\n\t\t\tthrow new Error(\"A World Magnetic Model has not been set.\")\r\n\t\t}\r\n\t\tif (glat === undefined || glon === undefined) {\r\n\t\t\tthrow new Error(\"Latitude and longitude are required arguments.\");\r\n\t\t}\r\n\t\tfunction rad2deg(rad) {\r\n\t\t\treturn rad * (180 / Math.PI);\r\n\t\t}\r\n\t\tfunction deg2rad(deg) {\r\n\t\t\treturn deg * (Math.PI / 180);\r\n\t\t}\r\n\t\tfunction decimalDate(date) {\r\n\t\t\tdate = date || new Date();\r\n\t\t\tvar year = date.getFullYear(),\r\n\t\t\t\tdaysInYear = 365 +\r\n\t\t\t\t\t(((year % 400 === 0) || (year % 4 === 0 && (year % 100 > 0))) ? 1 : 0),\r\n\t\t\t\tmsInYear = daysInYear * 24 * 60 * 60 * 1000;\r\n\r\n\t\t\treturn date.getFullYear() + (date.valueOf() - (new Date(year, 0)).valueOf()) / msInYear;\r\n\t\t}\r\n\r\n\t\tvar epoch = unnormalizedWMM.epoch,\r\n\t\t\tk = unnormalizedWMM.k,\r\n\t\t\tc = unnormalizedWMM.c,\r\n\t\t\tcd = unnormalizedWMM.cd,\r\n\t\t\talt = (h / 3280.8399) || 0, // convert h (in feet) to kilometers (default, 0 km)\r\n\t\t\tdt = decimalDate(date) - epoch,\r\n\t\t\trlat = deg2rad(glat),\r\n\t\t\trlon = deg2rad(glon),\r\n\t\t\tsrlon = Math.sin(rlon),\r\n\t\t\tsrlat = Math.sin(rlat),\r\n\t\t\tcrlon = Math.cos(rlon),\r\n\t\t\tcrlat = Math.cos(rlat),\r\n\t\t\tsrlat2 = srlat * srlat,\r\n\t\t\tcrlat2 = crlat * crlat,\r\n\t\t\tq,\r\n\t\t\tq1,\r\n\t\t\tq2,\r\n\t\t\tct,\r\n\t\t\tst,\r\n\t\t\tr2,\r\n\t\t\tr,\r\n\t\t\td,\r\n\t\t\tca,\r\n\t\t\tsa,\r\n\t\t\taor,\r\n\t\t\tar,\r\n\t\t\tbr = 0.0,\r\n\t\t\tbt = 0.0,\r\n\t\t\tbp = 0.0,\r\n\t\t\tbpp = 0.0,\r\n\t\t\tpar,\r\n\t\t\ttemp1,\r\n\t\t\ttemp2,\r\n\t\t\tparp,\r\n\t\t\tD4,\r\n\t\t\tm,\r\n\t\t\tn,\r\n\t\t\tfn = [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\r\n\t\t\tfm = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],\r\n\t\t\tz = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n\t\t\ttc = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tsp = z.slice(),\r\n\t\t\tcp = z.slice(),\r\n\t\t\tpp = z.slice(),\r\n\t\t\tp = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tdp = [z.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice(), z.slice(), z.slice(), z.slice(), z.slice(), z.slice(),\r\n\t\t\t\tz.slice()],\r\n\t\t\tbx,\r\n\t\t\tby,\r\n\t\t\tbz,\r\n\t\t\tbh,\r\n\t\t\tti,\r\n\t\t\tdec,\r\n\t\t\tdip,\r\n\t\t\tgv;\r\n\t\tsp[0] = 0.0;\r\n\t\tsp[1] = srlon;\r\n\t\tcp[1] = crlon;\r\n\t\ttc[0][0] = 0;\r\n\t\tcp[0] = 1.0;\r\n\t\tpp[0] = 1.0;\r\n\t\tp[0][0] = 1;\r\n\r\n\t\t/* CONVERT FROM GEODETIC COORDS. TO SPHERICAL COORDS. */\r\n\t\tq = Math.sqrt(a2 - c2 * srlat2);\r\n\t\tq1 = alt * q;\r\n\t\tq2 = ((q1 + a2) / (q1 + b2)) * ((q1 + a2) / (q1 + b2));\r\n\t\tct = srlat / Math.sqrt(q2 * crlat2 + srlat2);\r\n\t\tst = Math.sqrt(1.0 - (ct * ct));\r\n\t\tr2 = (alt * alt) + 2.0 * q1 + (a4 - c4 * srlat2) / (q * q);\r\n\t\tr = Math.sqrt(r2);\r\n\t\td = Math.sqrt(a2 * crlat2 + b2 * srlat2);\r\n\t\tca = (alt + d) / r;\r\n\t\tsa = c2 * crlat * srlat / (r * d);\r\n\r\n\t\tfor (m = 2; m <= maxord; m++) {\r\n\t\t\tsp[m] = sp[1] * cp[m - 1] + cp[1] * sp[m - 1];\r\n\t\t\tcp[m] = cp[1] * cp[m - 1] - sp[1] * sp[m - 1];\r\n\t\t}\r\n\r\n\t\taor = re / r;\r\n\t\tar = aor * aor;\r\n\r\n\t\tfor (n = 1; n <= maxord; n++) {\r\n\t\t\tar = ar * aor;\r\n\t\t\tfor (m = 0, D4 = (n + m + 1); D4 > 0; D4--, m++) {\r\n\r\n\t\t/*\r\n\t\t\t\tCOMPUTE UNNORMALIZED ASSOCIATED LEGENDRE POLYNOMIALS\r\n\t\t\t\tAND DERIVATIVES VIA RECURSION RELATIONS\r\n\t\t*/\r\n\t\t\t\tif (n === m) {\r\n\t\t\t\t\tp[m][n] = st * p[m - 1][n - 1];\r\n\t\t\t\t\tdp[m][n] = st * dp[m - 1][n - 1] + ct *\r\n\t\t\t\t\t\tp[m - 1][n - 1];\r\n\t\t\t\t} else if (n === 1 && m === 0) {\r\n\t\t\t\t\tp[m][n] = ct * p[m][n - 1];\r\n\t\t\t\t\tdp[m][n] = ct * dp[m][n - 1] - st * p[m][n - 1];\r\n\t\t\t\t} else if (n > 1 && n !== m) {\r\n\t\t\t\t\tif (m > n - 2) { p[m][n - 2] = 0; }\r\n\t\t\t\t\tif (m > n - 2) { dp[m][n - 2] = 0.0; }\r\n\t\t\t\t\tp[m][n] = ct * p[m][n - 1] - k[m][n] * p[m][n - 2];\r\n\t\t\t\t\tdp[m][n] = ct * dp[m][n - 1] - st * p[m][n - 1] -\r\n\t\t\t\t\t\tk[m][n] * dp[m][n - 2];\r\n\t\t\t\t}\r\n\r\n\t\t/*\r\n\t\t\t\tTIME ADJUST THE GAUSS COEFFICIENTS\r\n\t\t*/\r\n\r\n\t\t\t\ttc[m][n] = c[m][n] + dt * cd[m][n];\r\n\t\t\t\tif (m !== 0) {\r\n\t\t\t\t\ttc[n][m - 1] = c[n][m - 1] + dt * cd[n][m - 1];\r\n\t\t\t\t}\r\n\r\n\t\t/*\r\n\t\t\t\tACCUMULATE TERMS OF THE SPHERICAL HARMONIC EXPANSIONS\r\n\t\t*/\r\n\t\t\t\tpar = ar * p[m][n];\r\n\t\t\t\tif (m === 0) {\r\n\t\t\t\t\ttemp1 = tc[m][n] * cp[m];\r\n\t\t\t\t\ttemp2 = tc[m][n] * sp[m];\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttemp1 = tc[m][n] * cp[m] + tc[n][m - 1] * sp[m];\r\n\t\t\t\t\ttemp2 = tc[m][n] * sp[m] - tc[n][m - 1] * cp[m];\r\n\t\t\t\t}\r\n\t\t\t\tbt = bt - ar * temp1 * dp[m][n];\r\n\t\t\t\tbp += (fm[m] * temp2 * par);\r\n\t\t\t\tbr += (fn[n] * temp1 * par);\r\n\t\t/*\r\n\t\t\t\t\tSPECIAL CASE:  NORTH/SOUTH GEOGRAPHIC POLES\r\n\t\t*/\r\n\t\t\t\tif (st === 0.0 && m === 1) {\r\n\t\t\t\t\tif (n === 1) {\r\n\t\t\t\t\t\tpp[n] = pp[n - 1];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpp[n] = ct * pp[n - 1] - k[m][n] * pp[n - 2];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparp = ar * pp[n];\r\n\t\t\t\t\tbpp += (fm[m] * temp2 * parp);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbp = (st === 0.0 ? bpp : bp / st);\r\n\t\t/*\r\n\t\t\tROTATE MAGNETIC VECTOR COMPONENTS FROM SPHERICAL TO\r\n\t\t\tGEODETIC COORDINATES\r\n\t\t*/\r\n\t\tbx = -bt * ca - br * sa;\r\n\t\tby = bp;\r\n\t\tbz = bt * sa - br * ca;\r\n\r\n\t\t/*\r\n\t\t\tCOMPUTE DECLINATION (DEC), INCLINATION (DIP) AND\r\n\t\t\tTOTAL INTENSITY (TI)\r\n\t\t*/\r\n\t\tbh = Math.sqrt((bx * bx) + (by * by));\r\n\t\tti = Math.sqrt((bh * bh) + (bz * bz));\r\n\t\tdec = rad2deg(Math.atan2(by, bx));\r\n\t\tdip = rad2deg(Math.atan2(bz, bh));\r\n\r\n\t\t/*\r\n\t\t\tCOMPUTE MAGNETIC GRID VARIATION IF THE CURRENT\r\n\t\t\tGEODETIC POSITION IS IN THE ARCTIC OR ANTARCTIC\r\n\t\t\t(I.E. GLAT > +55 DEGREES OR GLAT < -55 DEGREES)\r\n\t\t\tOTHERWISE, SET MAGNETIC GRID VARIATION TO -999.0\r\n\t\t*/\r\n\r\n\t\tif (Math.abs(glat) >= 55.0) {\r\n\t\t\tif (glat > 0.0 && glon >= 0.0) {\r\n\t\t\t\tgv = dec - glon;\r\n\t\t\t} else if (glat > 0.0 && glon < 0.0) {\r\n\t\t\t\tgv = dec + Math.abs(glon);\r\n\t\t\t} else if (glat < 0.0 && glon >= 0.0) {\r\n\t\t\t\tgv = dec + glon;\r\n\t\t\t} else if (glat < 0.0 && glon < 0.0) {\r\n\t\t\t\tgv = dec - Math.abs(glon);\r\n\t\t\t}\r\n\t\t\tif (gv > 180.0) {\r\n\t\t\t\tgv -= 360.0;\r\n\t\t\t} else if (gv < -180.0) { gv += 360.0; }\r\n\t\t}\r\n\r\n\t\treturn {dec: dec, dip: dip, ti: ti, bh: bh, bx: bx, by: by, bz: bz, lat: glat, lon: glon, gv: gv};\r\n\t};\r\n\tthis.calc = this.calculate;\r\n\tthis.mag = this.calculate;\r\n\r\n\tif (model !== undefined) { // initialize\r\n\t\tif (typeof model === 'string') { // WMM.COF file\r\n\t\t\tparseCof(model);\r\n\t\t\tunnormalize(wmm);\r\n\t\t} else if (typeof model === 'object') { // unnorm obj\r\n\t\t\tthis.setUnnorm(model);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid argument type\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar cof = `\r\n    2010.0            WMM-2010        11/20/2009\r\n  1  0  -29496.6       0.0       11.6        0.0\r\n  1  1   -1586.3    4944.4       16.5      -25.9\r\n  2  0   -2396.6       0.0      -12.1        0.0\r\n  2  1    3026.1   -2707.7       -4.4      -22.5\r\n  2  2    1668.6    -576.1        1.9      -11.8\r\n  3  0    1340.1       0.0        0.4        0.0\r\n  3  1   -2326.2    -160.2       -4.1        7.3\r\n  3  2    1231.9     251.9       -2.9       -3.9\r\n  3  3     634.0    -536.6       -7.7       -2.6\r\n  4  0     912.6       0.0       -1.8        0.0\r\n  4  1     808.9     286.4        2.3        1.1\r\n  4  2     166.7    -211.2       -8.7        2.7\r\n  4  3    -357.1     164.3        4.6        3.9\r\n  4  4      89.4    -309.1       -2.1       -0.8\r\n  5  0    -230.9       0.0       -1.0        0.0\r\n  5  1     357.2      44.6        0.6        0.4\r\n  5  2     200.3     188.9       -1.8        1.8\r\n  5  3    -141.1    -118.2       -1.0        1.2\r\n  5  4    -163.0       0.0        0.9        4.0\r\n  5  5      -7.8     100.9        1.0       -0.6\r\n  6  0      72.8       0.0       -0.2        0.0\r\n  6  1      68.6     -20.8       -0.2       -0.2\r\n  6  2      76.0      44.1       -0.1       -2.1\r\n  6  3    -141.4      61.5        2.0       -0.4\r\n  6  4     -22.8     -66.3       -1.7       -0.6\r\n  6  5      13.2       3.1       -0.3        0.5\r\n  6  6     -77.9      55.0        1.7        0.9\r\n  7  0      80.5       0.0        0.1        0.0\r\n  7  1     -75.1     -57.9       -0.1        0.7\r\n  7  2      -4.7     -21.1       -0.6        0.3\r\n  7  3      45.3       6.5        1.3       -0.1\r\n  7  4      13.9      24.9        0.4       -0.1\r\n  7  5      10.4       7.0        0.3       -0.8\r\n  7  6       1.7     -27.7       -0.7       -0.3\r\n  7  7       4.9      -3.3        0.6        0.3\r\n  8  0      24.4       0.0       -0.1        0.0\r\n  8  1       8.1      11.0        0.1       -0.1\r\n  8  2     -14.5     -20.0       -0.6        0.2\r\n  8  3      -5.6      11.9        0.2        0.4\r\n  8  4     -19.3     -17.4       -0.2        0.4\r\n  8  5      11.5      16.7        0.3        0.1\r\n  8  6      10.9       7.0        0.3       -0.1\r\n  8  7     -14.1     -10.8       -0.6        0.4\r\n  8  8      -3.7       1.7        0.2        0.3\r\n  9  0       5.4       0.0       -0.0        0.0\r\n  9  1       9.4     -20.5       -0.1       -0.0\r\n  9  2       3.4      11.5        0.0       -0.2\r\n  9  3      -5.2      12.8        0.3        0.0\r\n  9  4       3.1      -7.2       -0.4       -0.1\r\n  9  5     -12.4      -7.4       -0.3        0.1\r\n  9  6      -0.7       8.0        0.1       -0.0\r\n  9  7       8.4       2.1       -0.1       -0.2\r\n  9  8      -8.5      -6.1       -0.4        0.3\r\n  9  9     -10.1       7.0       -0.2        0.2\r\n 10  0      -2.0       0.0        0.0        0.0\r\n 10  1      -6.3       2.8       -0.0        0.1\r\n 10  2       0.9      -0.1       -0.1       -0.1\r\n 10  3      -1.1       4.7        0.2        0.0\r\n 10  4      -0.2       4.4       -0.0       -0.1\r\n 10  5       2.5      -7.2       -0.1       -0.1\r\n 10  6      -0.3      -1.0       -0.2       -0.0\r\n 10  7       2.2      -3.9        0.0       -0.1\r\n 10  8       3.1      -2.0       -0.1       -0.2\r\n 10  9      -1.0      -2.0       -0.2        0.0\r\n 10 10      -2.8      -8.3       -0.2       -0.1\r\n 11  0       3.0       0.0        0.0        0.0\r\n 11  1      -1.5       0.2        0.0       -0.0\r\n 11  2      -2.1       1.7       -0.0        0.1\r\n 11  3       1.7      -0.6        0.1        0.0\r\n 11  4      -0.5      -1.8       -0.0        0.1\r\n 11  5       0.5       0.9        0.0        0.0\r\n 11  6      -0.8      -0.4       -0.0        0.1\r\n 11  7       0.4      -2.5       -0.0        0.0\r\n 11  8       1.8      -1.3       -0.0       -0.1\r\n 11  9       0.1      -2.1        0.0       -0.1\r\n 11 10       0.7      -1.9       -0.1       -0.0\r\n 11 11       3.8      -1.8       -0.0       -0.1\r\n 12  0      -2.2       0.0       -0.0        0.0\r\n 12  1      -0.2      -0.9        0.0       -0.0\r\n 12  2       0.3       0.3        0.1        0.0\r\n 12  3       1.0       2.1        0.1       -0.0\r\n 12  4      -0.6      -2.5       -0.1        0.0\r\n 12  5       0.9       0.5       -0.0       -0.0\r\n 12  6      -0.1       0.6        0.0        0.1\r\n 12  7       0.5      -0.0        0.0        0.0\r\n 12  8      -0.4       0.1       -0.0        0.0\r\n 12  9      -0.4       0.3        0.0       -0.0\r\n 12 10       0.2      -0.9        0.0       -0.0\r\n 12 11      -0.8      -0.2       -0.1        0.0\r\n 12 12       0.0       0.9        0.1        0.0\r\n999999999999999999999999999999999999999999999999\r\n999999999999999999999999999999999999999999999999\r\n`;\r\nvar geoMag = new Geomag(cof).mag;\r\n// var geoMag = newGeomag.mag;\r\n\r\nexport {\r\n\tchkLayer,\r\n\tcolsToHash,\r\n\tgetAngleDist,\r\n\tgeoMag,\r\n\tsendExcel,\r\n\tsendVectorFile,\r\n\tcreateVectorLayer,\r\n    sendReport,\r\n\tgetReportsCount,\r\n    getLayersIds,\r\n    getLayersParams,\r\n    selectFeaturesWithDrawing,\r\n    loadFeatures,\r\n\tloadQuadrantValues,\r\n    saveState,\r\n    getState,\r\n    chkTask,\r\n\tmodifyVectorObjects\r\n};","<div class=\"pop_title\">Создание групп делянок</div>\r\n\r\n<div class=\"site-block\">\r\n\t<div class=\"main_pop_cont_2\">\r\n\t\t<div class=\"scrollbar\" id=\"style-4\">\r\n\t\t   <div class=\"pop_ro_title\">\r\n\t\t\t  <div class=\"pop_ro_title_left\">Название группы</div>\r\n\t\t\t  <div class=\"pop_ro_title_right\">Обязательное</div>\r\n\t\t   </div>\r\n\t\t   <div class=\"pop_ro\"><input class=\"inp_pop\" on:change=\"setNodeField(this, true)\" name=\"layerID\" placeholder=\"Делянки\" ref:layerID /></div>\r\n\r\n\t\t   <div class=\"pop_ro_title\"><div class=\"pop_ro_title_left\">Квартальная сеть</div></div>\r\n\t\t   <div class=\"pop_ro\">\r\n\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"quadrantLayerId\" ref:quadrantLayerId class=\"select\">\r\n\t\t\t\t\t{#each quadrantIds as it}\r\n\t\t\t\t\t\t<option value=\"{it.id}\" selected=\"{quadrantLayerId === it.id}\" class=\"{it.bad ? 'red' : ''}\">{it.title}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\r\n\t\t\t  <span class=\"pop_upload\" alt=\"pop_upload\" on:click=\"createKvartal()\" ></span>\r\n\t\t   </div>\r\n\r\n\t\t</div>\r\n\t\t<div class=\"pop_bottom\">\r\n\t\t   <div class=\"pop_bottom_left\" on:click=\"cancel()\">Отмена</div>\r\n\t\t   <div class=\"pop_bottom_right\" on:click=\"create()\">Создать</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<script>\r\nimport * as Config from './Config.js';\r\nimport * as Requests from './Requests.js';\r\nimport * as EditorLib from './EditorLib.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tquadrantIds: [],\r\n\t\t\tquadrantLayerId: null,\r\n\t\t\treportType: 'об использовании лесов'\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t},\r\n\tmethods: {\r\n\t\tsetNodeField(node, setFlag) {\r\n // console.log('setNodeField', node);\r\n\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value,\r\n\t\t\t\tname = node.name;\r\n\t\t\t// this.setField(name, val);\r\n\t\t\tif (setFlag) {\r\n\t\t\t\tlet attr = {};\r\n\t\t\t\tattr[name] = val;\r\n\t\t\t\tif (name === 'layerID') {\r\n\t\t\t\t\tif (this.refs.layerID.value) {\r\n\t\t\t\t\t\tthis.refs.layerID.classList.remove('error');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.refs.layerID.classList.add('error');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.set(attr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcancel() {\r\n\t\t\tlet {map, gmxPopup} = this.get();\r\n\t\t\tmap.removeControl(gmxPopup);\r\n\t\t},\r\n\t\tcreateKvartal() {\r\n\t\t\tEditorLib.createLayer(true);\r\n\t\t},\r\n\t\tcreate() {\r\n\t\t\tlet {map, gmxPopup, quadrantIds, prnt} = this.get();\r\n\r\n\t\t\tif (!this.refs.layerID.value) {\r\n\t\t\t\tthis.refs.layerID.classList.add('error');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet qSel = this.refs.quadrantLayerId,\r\n\t\t\t\tqVal = qSel.options.length ? qSel.options[qSel.selectedIndex || 0].value : '',\r\n\t\t\t\tcols = Object.keys(Config.fieldsConf).map ((k) => { return { Name: k, ColumnSimpleType: Config.fieldsConf[k].ColumnSimpleType } });\r\n\t\t\tlet props = {\r\n\t\t\t\tTitle: this.refs.layerID.value || 'Делянки 1',\r\n\t\t\t\tMetaProperties: {\r\n\t\t\t\t\tkvartal: {Value: qVal, Type: 'String'}\r\n\t\t\t\t},\r\n\t\t\t\tsrs: 3857,\r\n\t\t\t\tColumns: cols,\r\n\t\t\t\tSourceType: 'manual',\r\n\t\t\t\tGeometryType: \"polygon\"\r\n\t\t\t};\r\n\t\t\tEditorLib.saveLayer(props)\r\n\t\t\t\t.then(json => {\r\n\t\t\t\t\tmap.removeControl(gmxPopup);\r\n\t\t\t\t\tsetTimeout(prnt.regetLayersIds.bind(prnt, json.name), 1500);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n.gmxControlPopup .content-wrapper {\r\n    margin: 20px 0 0 0;\r\n    padding: 1px;\r\n    text-align: left;\r\n    cursor: default;\r\n}\r\n\r\n.closeButton {\r\n    position: absolute;\r\n    font: 16px/14px Tahoma, Verdana, sans-serif;\r\n    font-weight: bold;\r\n    color: #c3c3c3;\r\n    top: 12px;\r\n    right: 12px;\r\n    cursor: pointer;\r\n}\r\n\r\nselect.reportType.gmx-sidebar-select-large {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n\r\ninput.inp_pop {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n    padding-left: 5px;\r\n}\r\n\r\nselect.select {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n\r\n\r\nspan.pop_upload {\r\n    content: url(./img/upload.svg);\r\n\tcursor: pointer;\r\n    left: 10px;\r\n    position: relative;\r\n}\r\n\r\n.pop_ro_title_right {\r\n    font-style: italic;\r\n    font-weight: normal;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: right;\r\n    color: #8A9BA8;\r\n    display: block;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    display: block;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n\r\n.main_pop_cont_2 {\r\n    cursor: default;\r\n    overflow-y: auto;\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 0px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 287px;\r\n    height: auto;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: flex-start;\r\n}\r\n\r\n.pop_bottom_left {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-right: 1px solid #D8E1E8;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n.pop_bottom_right {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #318CFE;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n\r\n.pop_bottom {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 40px;\r\n    border-top: 1px solid #D8E1E8;\r\n    align-items: center;\r\n    font-family: IBM Plex Sans;\r\n    margin-top: 23px;\r\n}\r\n\r\n.gmxControlPopup {\r\n    position: absolute;\r\n    border-radius: 4px;\r\n    background: white;\r\n    box-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n}\r\n\r\n.pop_title {\r\n    pointer-events: none;\r\n    position: relative;\r\n    top: 0px;\r\n    left: 0;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    font-family: IBM Plex Sans;\r\n    min-height: 30px;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    padding-left: 17px;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 5px 15px;\r\n}\r\n.pop_ro select, .pop_ro input {\r\n    width: 100%;\r\n    min-height: 30px;\r\n}\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    /*min-height: 30px;*/\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: -5px;\r\n}\r\n</style>\r\n","<script>\r\n\timport * as Config from './Config.js';\r\n\timport * as EditorLib from './EditorLib.js';\r\n\timport * as Requests from './Requests.js';\r\n\r\n\t// import * as geoMag from './geomag.js';\r\n\r\n\tconst DEFANGLE = 45,\r\n\t\tDEFLEG = 200,\r\n\t\tPATERNS = {\r\n\t\t\tangle: /(\\d*)\\.?\\d*_a/,\r\n\t\t\tdist: /(\\d+)_d/\r\n\t\t\t// ,\r\n\t\t\t// latlng: '\\d*([\\.]&#123;1&#125;\\d*)?'\r\n\t\t};\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstep: 1,\r\n\t\t\t\tcoordType: 0,\r\n\t\t\t\tcancel: null,\r\n\t\t\t\tdrawings: null,\r\n\t\t\t\tquadrantLayerId: null,\r\n\t\t\t\tquadrantIds: null,\r\n\t\t\t\tquadrantValues: null,\r\n\t\t\t\tlayerItems: null,\r\n\t\t\t\tsnap: null,\r\n\t\t\t\tkvartal: null,\r\n\t\t\t\tpaterns: {\r\n\t\t\t\t\tangle: '[СВЮЗ]*[ВЗ]*[\\d]+([\\.,][\\d]+)?',\t\t\t// С, СВ, В, ЮВ, Ю, ЮЗ, З, СЗ\r\n\t\t\t\t\tlatlng: '\\d*([\\.]&#123;1&#125;\\d*)?',\r\n\t\t\t\t\tlatlngPoint: '\\d+°\\d+\\'\\d\\d.\\d\\d\" N, \\d+°\\d+\\'\\d\\d.\\d\\d\" E'\r\n\t\t\t\t},\r\n\t\t\t\tfieldsConf: Config.fieldsConf || {},\r\n\t\t\t\tisForestCols: false,\r\n\t\t\t\treportType: 'ИЛ',\r\n\t\t\t\thashCols: {},\r\n\t\t\t\tchecked: {},\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\tlayerIds: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tisReqTypeReport: ({ meta }) => meta.report_t && (meta.report_t.Value === 'ВЛ' || meta.report_t.Value === 'о воспроизводстве лесов'),\r\n\t\t\tlatlng: ({ snap }) => snap && snap.latlng,\r\n\t\t\tlatlngPoint: ({ snap }) => snap && snap.latlng && L.gmxUtil.getCoordinatesString(L.latLng(snap.latlng[0], snap.latlng[1]), 1),\r\n\t\t\tsnapArr: ({ snap }) => snap && snap.snap || [[0, 0, 0]],\r\n\t\t\tringArr: ({ snap }) => snap && snap.ring || [[0, 0, 0]],\r\n\t\t\tlistQuadrants: ({ quadrantValues }) => quadrantValues && Object.keys(quadrantValues) || null\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t_lastProps: {},\r\n\t\t\t_useLastProps(props) {\r\n\t\t\t\tlet _lastProps = Requests.getState('gmxForest_lastProps') || {};\r\n\t\t\t\tif (props) {\r\n\t\t\t\t\tfor (let k in props) {\r\n\t\t\t\t\t\tif (Config.fieldsConf[k] && Config.fieldsConf[k].save && props[k]) {\r\n\t\t\t\t\t\t\tif (!L.Util.isArray(_lastProps[k])) { _lastProps[k] = []; }\r\n\t\t\t\t\t\t\t_lastProps[k].push(props[k]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tRequests.saveState(_lastProps, 'gmxForest_lastProps');\r\n\t\t\t\t}\r\n\t\t\t\treturn _lastProps;\r\n\t\t\t},\r\n\t\t\tcoordFormatChange(ev) {\r\n\t\t\t\tconst { snap, coordType } = this.get();\r\n\t\t\t\tif (coordType) {\r\n\t\t\t\t\tlet latlng = snap.latLng;\r\n\t\t\t\t\tlet str = L.gmxUtil.latLonFormatCoordinates(latlng);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlet latlng = snap.latLng;\r\n\t\t\t\t\tlet str = L.gmxUtil.formatCoordinates(latlng);\r\nconsole.log('coordFormatChange', ev)\r\n\t\t// return  gmxAPIutils.formatDegrees(Math.abs(y)) + (y > 0 ? ' N, ' : ' S, ') +\r\n\t\t\t// gmxAPIutils.formatDegrees(Math.abs(x)) + (x > 0 ? ' E' : ' W');\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({coordType: coordType ? 0 : 1})\r\n\t\t\t},\r\n\r\n\t\t\tparseCoordinate: function(text) {\r\n\t\t\t\tif (text.match(/[йцукенгшщзхъфывапролджэячсмитьбюЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮqrtyuiopadfghjklzxcvbmQRTYUIOPADFGHJKLZXCVBM_:]/)) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\ttext = text.replace(/,/g, '.');\r\n\t\t\t\tlet regex = /(-?\\d+(\\.\\d+)?)([^\\d\\-]*)/g,\r\n\t\t\t\t\tt = regex.exec(text),\r\n\t\t\t\t\tresults = [];\r\n\r\n\t\t\t\twhile (t) {\r\n\t\t\t\t\tresults.push(t[1]);\r\n\t\t\t\t\tt = regex.exec(text);\r\n\t\t\t\t}\r\n\t\t\t\tif (!results.length) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\tvar ii = Math.floor(results.length),\r\n\t\t\t\t\ty = 0,\r\n\t\t\t\t\tmul = 1,\r\n\t\t\t\t\ti;\r\n\t\t\t\tfor (i = 0; i < ii; i++) {\r\n\t\t\t\t\ty += parseFloat(results[i]) * mul;\r\n\t\t\t\t\tmul /= 60;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (text.indexOf('S') !== -1 || text.indexOf('W') !== -1) {\r\n\t\t\t\t\ty = -y;\r\n\t\t\t\t}\r\n\t\t\t\treturn y;\r\n\t\t\t},\r\n\r\n\t\t\tonKeyUp(ev) {\r\n\t\t\t\tif (ev.key === 'Enter') {\r\n\t\t\t\t\tthis.nextPoint(ev.target, true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t_parseAngle(str) {\t\t// С, СВ, В, ЮВ, Ю, ЮЗ, З, СЗ\r\n\t\t\t\tstr = str.trim();\r\n\t\t\t\tlet angle = 0,\r\n\t\t\t\t\tnp = '',\r\n\t\t\t\t\tp1 = (str[0] || '').toUpperCase(),\r\n\t\t\t\t\tp2 = (str[1] || '').toUpperCase(),\r\n\t\t\t\t\td = (p2 === 'З' ? 45 : (p2 === 'В' || p2 === 'B' ? -45 : 0)),\r\n\t\t\t\t\tfMinus = false,\r\n\t\t\t\t\ts = 1;\r\n\r\n\t\t\t\tif (p1 === 'C' || p1 === 'С') {\r\n\t\t\t\t\tnp = 'С';\r\n\t\t\t\t\tif (p2 === 'З') {\r\n\t\t\t\t\t\t// angle = 360;\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'СЗ';\r\n\t\t\t\t\t\tfMinus = true;\r\n\t\t\t\t\t} else if (p2 === 'В' || p2 === 'B') {\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'СВ';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (p1 === 'Ю') {\r\n\t\t\t\t\tnp = 'Ю';\r\n\t\t\t\t\tangle = 180;\r\n\t\t\t\t\tif (p2 === 'З') {\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'ЮЗ';\r\n\t\t\t\t\t} else if (p2 === 'В' || p2 === 'B') {\r\n\t\t\t\t\t\ts = 2;\r\n\t\t\t\t\t\tnp = 'ЮВ';\r\n\t\t\t\t\t\tfMinus = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (p1 === 'З') {\r\n\t\t\t\t\tnp = 'З';\r\n\t\t\t\t\tangle = 270;\r\n\t\t\t\t} else if (p1 === 'В' || p1 === 'B') {\r\n\t\t\t\t\tnp = 'В';\r\n\t\t\t\t\tangle = 90;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ts = 0;\r\n\t\t\t\t}\r\n\t\t\t\tlet rumb = Number(str.substr(s));\r\n\t\t\t\treturn {\r\n\t\t\t\t\tnp: np,\r\n\t\t\t\t\trumb: rumb,\r\n\t\t\t\t\tangle: angle + (fMinus ? -rumb : rumb)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\t_isError(val, val1, rmb) {\r\n\t\t\t\tif (rmb && rmb.np) {\r\n\t\t\t\t\tif (rmb.np.length === 1 && rmb.rumb !== 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else if (rmb.rumb < 0 || rmb.rumb >= 90) {\r\n\t\t\t\t\t// } else if (isNaN(val) || rmb.rumb < 0 || rmb.rumb >= 90) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tval = rmb.rumb;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn isNaN(val) || (val !== null && (val < 0 || val >= 360)) ? true : (val1 !== undefined && val1 <= 0 ? true : false);\r\n\t\t\t},\r\n\t\t\tfromClipboard(ev) {\r\n\t\t\t\tconst { snap, map } = this.get();\r\n\t\t\t\tlet cont = this.refs.sn0,\r\n\t\t\t\t\tinputs = cont.getElementsByTagName('input'),\r\n\t\t\t\t\ttarget = ev.target,\r\n\t\t\t\t\tclipboardData = ev.clipboardData,\r\n\t\t\t\t\tstr = clipboardData.getData('text/plain'),\r\n\t\t\t\t\tarr = str.indexOf(',') !== -1 ? L.gmxUtil.parseCoordinates(str) : this.parseCoordinate(str);\r\n\t\t\t\tif (arr) {\r\n\t\t\t\t\tif (!L.Util.isArray(arr)) {\r\n\t\t\t\t\t\tarr = target === inputs[0] ? [arr, inputs[1].value] : [inputs[0].value, arr];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclipboardData.clearData();\r\n\t\t\t\t\t\r\n\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(arr[0] || 0, arr[1] || 0));\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tinputs[0].value = snap.latlng[0];\r\n\t\t\t\t\t\tinputs[1].value = snap.latlng[1];\r\n\t\t\t\t\t}, 200);\r\n\t\t\t\t\tinputs[0].classList.remove('error');\r\n\t\t\t\t\tinputs[1].classList.remove('error');\r\n\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinputs[0].classList.add('error');\r\n\t\t\t\t\tinputs[1].classList.add('error');\r\n\t\t\t\t\tthis.refs.sn00.classList.add('error');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetPoint(ev) {\r\n\t\t\t\tlet node = ev.target,\r\n\t\t\t\t\tkey = ev.data,\r\n\t\t\t\t\t_focus = null;\r\n\r\n\t\t\t\tif (node.value === '') {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst { snap, map } = this.get();\r\n\t\t\t\tlet str = node.options ? node.options[node.selectedIndex].value : node.value;\r\n\t\t\t\t\r\n\t\t\t\tlet rmb = this._parseAngle(str),\r\n\t\t\t\t\tval = rmb.angle,\r\n\t\t\t\t\tname = node.name,\r\n\t\t\t\t\tprnt = node.parentNode,\r\n\t\t\t\t\ttype = 'point',\r\n\t\t\t\t\tdata = snap.latlng,\r\n\t\t\t\t\terror = true;\r\n\r\n\t\t\t\tif (prnt.classList.contains('snap')) {\r\n\t\t\t\t\ttype = 'snap';\r\n\t\t\t\t\tdata = snap.snap || [[]];\r\n\t\t\t\t} else if (prnt.classList.contains('ring')) {\r\n\t\t\t\t\ttype = 'ring';\r\n\t\t\t\t\tdata = snap.ring || [[]];\r\n\t\t\t\t}\r\n// console.log('setPoint', type, val, node, prnt.name);\r\n\t\t\t\tif (type === 'point') {\r\n\t\t\t\t\tif (name === 'lng' || name === 'lat') {\r\n\t\t\t\t\t\tval = Number(node.value);\r\n\t\t\t\t\t\tif (val) {\r\n\t\t\t\t\t\t\tif (name === 'lng' && val >= -180 && val <= 180) {\r\n\t\t\t\t\t\t\t\terror = false;\r\n\t\t\t\t\t\t\t\t// snap.latlng = [snap.latlng ? snap.latlng[0] : 0, val];\r\n\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(snap.latlng ? snap.latlng[0] : 0, val));\r\n\t\t\t\t\t\t\t} else if (name === 'lat' && val > -90 && val < 90) {\r\n\t\t\t\t\t\t\t\terror = false;\r\n\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(val, snap.latlng ? snap.latlng[1] : 0));\r\n\t\t\t\t\t\t\t\t// snap.latlng = [val, snap.latlng ? snap.latlng[1] : 0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (val === 0) {\r\n\t\t\t\t\t\t\terror = false;\r\n\t\t\t\t\t\t\tlet cont = this.refs.sn0,\r\n\t\t\t\t\t\t\t\tinputs = cont.getElementsByTagName('input'),\r\n\t\t\t\t\t\t\t\tcenter = map.getCenter();\r\n\r\n\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(center);\r\n\t\t\t\t\t\t\t// snap.latlng = [Number(center.lat.toFixed(6)), Number(center.lng.toFixed(6))];\r\n\t\t\t\t\t\t\tinputs[0].value = snap.latlng[0];\r\n\t\t\t\t\t\t\tinputs[1].value = snap.latlng[1];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (snap.snap && !snap.snap[0].length) {\r\n\t\t\t\t\t\t\t\tsnap.snap = [[90, DEFLEG, '90']];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (snap.ring && !snap.ring[0].length) {\r\n\t\t\t\t\t\t\t\tsnap.ring = [[45, DEFLEG, '45']];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(snap.latlng[0], snap.latlng[1]);\r\n\t\t\t\t\t\t\t// this.delta = snap.latlng[0] ? 1 / Math.cos(snap.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\t\tthis.delta = 1;\r\n\t\t\t\t\t\t\tthis.reDrawing(snap, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (type === 'snap' || type === 'ring') {\r\n\t\t\t\t\tif (PATERNS.angle.test(name)) {\r\n\t\t\t\t\t\tlet arr = PATERNS.angle.exec(name);\r\n\t\t\t\t\t\tif (arr.length) {\r\n\t\t\t\t\t\t\tlet it = data[arr[1]];\r\n\t\t\t\t\t\t\t// error = !val || this._isError(val, it[1], rmb);\r\n\t\t\t\t\t\t\terror = this._isError(val, undefined, rmb);\r\n\t\t\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\t\t\tit[0] = Number(val);\r\n\t\t\t\t\t\t\t\tit[1] = it[1] || 200;\r\n\t\t\t\t\t\t\t\t_focus = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tit[2] = str;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (PATERNS.dist.test(name)) {\r\n\t\t\t\t\t\terror = this._isError(null, val);\r\n\t\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\t\tlet arr = PATERNS.dist.exec(name);\r\n\t\t\t\t\t\t\tif (arr.length) {\r\n\t\t\t\t\t\t\t\tlet it = data[arr[1]];\r\n\t\t\t\t\t\t\t\tit[1] = Number(val);\r\n\t\t\t\t\t\t\t\tit[0] = it[0] || 0;\r\n\t\t\t\t\t\t\t\t_focus = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\tif (type === 'snap') {\r\n\t\t\t\t\t\t\tsnap.snap = data;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsnap.ring = data;\r\n\t\t\t\t\t\t\t// this._focus = data.length === 1 && _focus !== null ? _focus : null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet delItem = prnt.getElementsByClassName('delItem')[0],\r\n\t\t\t\t\taddNext = prnt.getElementsByClassName('addNext')[0];\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tnode.classList.add('error');\r\n\t\t\t\t\tif (delItem) { delItem.classList.add('disabled'); }\r\n\t\t\t\t\tif (addNext) { addNext.classList.add('disabled'); }\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.classList.remove('error');\r\n\t\t\t\t\tif (delItem) { delItem.classList.remove('disabled'); }\r\n\t\t\t\t\tif (addNext) { addNext.classList.remove('disabled'); }\r\n\t\t\t\t\t// this.reDrawing(snap);\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t},\r\n\r\n\t\t\tsetLatlngPoint(ev) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet node = ev.target,\r\n\t\t\t\t\tres = L.Control.gmxLocation.Utils.parseCoordinates(node.value);\r\n\r\n\t\t\t\tif (res) {\r\n\t\t\t\t\tsnap.latlng = res;\r\n\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t} else {\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tdelPoint(node) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet prnt = node.parentNode.parentNode,\r\n\t\t\t\t\tinputs = prnt.getElementsByTagName('input'),\r\n\t\t\t\t\tcmdSpans = prnt.getElementsByClassName('pop_ro_right_dotted')[0].children;\r\n\r\n\t\t\t\tif (prnt.classList.contains('snap') && snap.snap && snap.snap.length) {\r\n\t\t\t\t// if (prnt.classList.contains('snap') && snap.snap.length > 1) {\r\n\t\t\t\t\tlet arr = PATERNS.angle.exec(inputs[0].name),\r\n\t\t\t\t\t\tnm = arr.length ? Number(arr[1]) : 0;\r\n\t\t\t\t\tsnap.snap.splice(nm, 1);\r\n\t\t\t\t\tif (!snap.snap.length) {\r\n\t\t\t\t\t\tsnap.snap = [[]];\r\n\t\t\t\t\t\tinputs[0].value = inputs[1].value = '';\r\n\t\t\t\t\t\tcmdSpans[0].classList.add('disabled');\r\n\t\t\t\t\t\tcmdSpans[1].classList.add('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t} else if (prnt.classList.contains('ring') && snap.ring && snap.ring.length) {\r\n\t\t\t\t// } else if (prnt.classList.contains('ring') && snap.ring.length > 1) {\r\n\t\t\t\t\tlet arr = PATERNS.angle.exec(inputs[0].name),\r\n\t\t\t\t\t\tnm = arr.length ? Number(arr[1]) : 0;\r\n\t\t\t\t\tsnap.ring.splice(nm, 1);\r\n\t\t\t\t\tif (!snap.ring.length) {\r\n\t\t\t\t\t\tsnap.ring = [[]];\r\n\t\t\t\t\t\tinputs[0].value = inputs[1].value = '';\r\n\t\t\t\t\t\tcmdSpans[0].classList.add('disabled');\r\n\t\t\t\t\t\tcmdSpans[1].classList.add('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t_getNum(str, reg) {\r\n\t\t\t\tlet arr = reg.exec(str);\r\n\t\t\t\treturn arr.length ? Number(arr[1]) : 0;\r\n\t\t\t},\r\n\t\t\tnextPoint(node, flag) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet prnt = flag ? node.parentNode : node.parentNode.parentNode,\r\n\t\t\t\t\tcont = this.refs.sn0,\r\n\t\t\t\t\tscrollBox = this.refs.scroll,\r\n\t\t\t\t\tinputs = prnt.getElementsByTagName('input'),\r\n\t\t\t\t\tfirstChild = inputs[0],\r\n\t\t\t\t\trmb = this._parseAngle(firstChild.value),\r\n\t\t\t\t\tleg = [90, DEFLEG];\r\n // console.log('nextPoint', snap, scrollBox.scrollHeight, scrollBox.clientHeight, scrollBox.offsetHeight);\r\n\t\t\t\tthis._focusNode = node === inputs[0] ? inputs[1].name : null;\r\n\t\t\t\tif (prnt.classList.contains('point')) {\r\n\t\t\t\t\tsnap.snap = snap.snap || [[]];\r\n\t\t\t\t\tsnap.snap.unshift(leg);\r\n\t\t\t\t\tthis.set({ snap: snap })\r\n\t\t\t\t} else if (prnt.classList.contains('snap')) {\r\n\t\t\t\t\tif (!this._isError(inputs[0].value, inputs[1].value, rmb)) {\r\n\t\t\t\t\t\tlet nm = this._getNum(inputs[0].name, PATERNS.angle);\r\n\t\t\t\t\t\tsnap.snap = snap.snap || [[Number(inputs[0].value), Number(inputs[1].value)]];\r\n\t\t\t\t\t\tif (!this._focusNode) {\r\n\t\t\t\t\t\t\tsnap.snap.splice(nm + 1, 0, leg);\r\n\t\t\t\t\t\t\tthis._focusNode = 'snap' + (nm + 1) + '_a';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (prnt.classList.contains('ring')) {\r\n\t\t\t\t\tif (!this._isError(inputs[0].value, inputs[1].value, rmb)) {\r\n\t\t\t\t\t\t// let arr = PATERNS.angle.exec(firstChild.name),\r\n\t\t\t\t\t\t\t// nm = arr.length ? Number(arr[1]) : 0;\r\n\t\t\t\t\t\tlet nm = this._getNum(inputs[0].name, PATERNS.angle);\r\n\t\t\t\t\t\tsnap.ring = snap.ring || [[Number(inputs[0].value), Number(inputs[1].value)]];\r\n\t\t\t\t\t\tthis._focus = 0;\r\n\t\t\t\t\t\tif (!this._focusNode) {\r\n\t\t\t\t\t\t\tsnap.ring.splice(nm + 1, 0, [DEFANGLE, DEFLEG]);\r\n\t\t\t\t\t\t\tthis._focusNode = 'ring' + (nm + 1) + '_a';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\taddRing(node) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tsnap.ring = snap.ring || [];\r\n\t\t\t\tsnap.ring.unshift([DEFANGLE, DEFLEG]);\r\n\t\t\t\tthis.set({ snap: snap });\r\n\t\t\t},\r\n\t\t\tcreateKvartal() {\r\n\t\t\t\tEditorLib.createLayer(true);\r\n\t\t\t},\r\n\t\t\tsetKvartal(node) {\r\n\t\t\t\tconst { map, quadrantValues, snap } = this.get();\r\n// console.log('setKvartal', node);\r\n\t\t\t\tif (quadrantValues) {\r\n\t\t\t\t\tif (this._drawingItems) {\r\n\t\t\t\t\t\tfor (let key in this._drawingItems) {\r\n\t\t\t\t\t\t\tmap.gmxDrawing.remove(this._drawingItems[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._drawingItems = null;\r\n\t\t\t\t\tlet kv = node.value,\r\n\t\t\t\t\t\tcont = this.refs.sn0,\r\n\t\t\t\t\t\taddNext = cont.getElementsByClassName('addNext')[0];\r\n\t\t\t\t\tif (quadrantValues[kv]) {\r\n\t\t\t\t\t\tlet bbox = quadrantValues[kv].bbox,\r\n\t\t\t\t\t\t\tlatlng = bbox.getCenter().reverse(),\r\n\t\t\t\t\t\t\tlat = cont.getElementsByClassName('lat')[0],\r\n\t\t\t\t\t\t\tlng = cont.getElementsByClassName('lng')[0],\r\n\t\t\t\t\t\t\tmin = bbox.min,\r\n\t\t\t\t\t\t\tmax = bbox.max;\r\n\t\t\t\t\t\tmap.fitBounds([[min.y, min.x], [max.y, max.x]]);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlat.value = latlng[0]; lat.classList.remove('error');\r\n\t\t\t\t\t\tlng.value = latlng[1]; lng.classList.remove('error');\r\n\t//\t\t\t\t\taddNext.classList.remove('disabled');\r\n\t// console.log('setKvartal', latlng);\r\n\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(latlng[0], latlng[1]));\r\n\t\t\t\t\t\t// snap.latlng = this._getLatlng(latlng);\r\n\t\t\t\t\t\t// snap.latlng = latlng;\r\n\t\t\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(snap.latlng[0], snap.latlng[1]);\r\n\t\t\t\t\t\t// this.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec;\r\n\t\t\t\t\t\t//this.delta = snap.latlng[0] ? 1 / Math.cos(snap.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\tthis.delta = 1;\r\n\t// console.log('nextPoint', snap, prnt);\r\n\t\t\t\t\t\tsnap.snap = snap.snap || [[]];\r\n\t\t\t\t\t\tif (snap.snap.length === 0) {\r\n\t\t\t\t\t\t\tsnap.snap.unshift([90, DEFLEG]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set({ snap: snap, kvartal: kv });\r\n\t\t\t\t\t\tthis.chkInputs(true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// addNext.classList.add('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t_drawingItems: null,\r\n\t\t\t_clearDrawingItems() {\r\n\t\t\t\tconst { geo, map } = this.get();\r\n\t\t\t\tif (this._drawingItems) {\r\n\t\t\t\t\tfor (let key in this._drawingItems) {\r\n\t\t\t\t\t\tmap.gmxDrawing.remove(this._drawingItems[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (geo) { map.gmxDrawing.remove(geo); }\r\n\t\t\t\tthis._drawingItems = null;\r\n\t\t\t},\r\n\r\n\t\t\tcancelMe() {\r\n\t\t\t\tthis.toggleContextmenu(0);\r\n\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\tthis.set({cancel: true});\r\n// console.log('cancelMe', this);\r\n\t\t\t},\r\n\t\t\taddObjectAny(geo) {\r\n\t\t\t\tconst { layerID, kvartal, hashCols, prnt, map } = this.get();\r\n\r\n\t\t\t\tlet snap = '';\r\n\t\t\t\tif (this._drawingItems.snap) {\r\n\t\t\t\t\tlet geo = this._drawingItems.snap.toGeoJSON().geometry,\r\n\t\t\t\t\t\tcoords = geo.coordinates;\r\n\t\t\t\t\tif (coords.length > 1) {\r\n\t\t\t\t\t\tif (coords.length !== 2 || coords[0][0] !== coords[1][0] || coords[0][1] !== coords[1][1]) {\r\n\t\t\t\t\t\t\tsnap = JSON.stringify(geo);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n// console.log('Requests.fields', Requests.fields)\r\n\r\n\t\t\t\t$(\r\n\t\t\t\t\tEditorLib.editObject(layerID, null, {\r\n\t\t\t\t\t\thashCols: hashCols,\r\n\t\t\t\t\t\tdFields: JSON.parse(window.localStorage.getItem('gmxForest_Delanka')) || {},\r\n\t\t\t\t\t\t// fields: fields,\r\n\t\t\t\t\t\tsnap: snap,\r\n\t\t\t\t\t\tdrawingObject: geo\r\n\t\t\t\t\t})\r\n\t\t\t\t).on ('close', e => {\r\n\t\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\t\tmap.gmxDrawing.remove(geo);\r\n\t\t\t\t\tprnt.regetFeatures();\r\n\t\t\t\t\tL.gmx.layersVersion.chkVersion(layerID);\r\n\t\t\t\t\tlet dFields = e.target.getAll();\r\n // console.log('dFields', dFields, hashCols);\r\n\t\t\t\t\tdelete dFields.FRSTAT;\r\n\t\t\t\t\tdelete dFields.snap;\r\n\t\t\t\t\twindow.localStorage.setItem('gmxForest_Delanka', JSON.stringify(dFields));\r\n\t\t\t\t});\r\n\t\t\t\tthis.set({cancel: true});\r\n\t\t\t},\r\n\r\n\t\t\tchkInputs(flag) {\r\n\t\t\t\t// node = node || document.getElementsByClassName('main_pop_cont_2')[0];\r\n\t\t\t\tlet inputs = document.getElementsByClassName('main_pop_cont_2')[0].getElementsByTagName('input');\r\n\t\t\t\tfor (let i = 0, len = inputs.length; i < len; i++) {\r\n\t\t\t\t\tlet it = inputs[i];\r\n\t\t\t\t\tif (flag && it.name === 'ring0_a') {\r\n\t\t\t\t\t\tit.classList.add('error');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('chkInputs', it.classList.contains('error'), val, name)\r\n\t\t\t\t\tif (it.classList.contains('error')) {\r\n\t\t\t\t\t\tit.focus();\r\n\t\t\t\t\t\tit.select();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t// _namesHash: {\r\n\t\t\t\t// reportType: 'Тип отчета',\r\n\t\t\t\t// organizationName: 'Наименование организации',\r\n\t\t\t\t// inn: 'ИНН',\r\n\t\t\t\t// region: 'Субъект Российской Федерации',\r\n\t\t\t\t// forestry: 'Лесничество',\r\n\t\t\t\t// sectionForestry: 'Участковое Лесничество',\r\n\t\t\t\t// quadrant: 'Квартал',\r\n\t\t\t\t// dacha: 'Дача',\r\n\t\t\t\t// stratum: 'Выделы',\r\n\t\t\t\t// fellingForm: 'Форма рубки',\r\n\t\t\t\t// fellingType: 'Тип рубки', // *\r\n\t\t\t\t// recoveryEventType: 'Тип лесовосстановления',\r\n\t\t\t\t// siteArea: 'Площадь',\r\n\t\t\t\t// scale: 'Масштаб',\r\n\t\t\t\t// site: 'Делянка'\r\n\t\t\t// },\r\n\r\n\t\t\taddObject(node) {\r\n\t\t\t\tconst { map, prnt, snap, layerID, hashCols, kvartal, meta, item, geo } = this.get();\r\n\r\n// console.log('Requests.fields', Requests.fields)\r\n\t\t\t\tlet properties = {\r\n\t\t\t\t\tsnap: JSON.stringify(this._drawingItems.snap.toGeoJSON().geometry),\r\n\t\t\t\t\tFRSTAT: 0\r\n\t\t\t\t};\r\n\t\t\t\tlet fields = [\r\n\t\t\t\t\t\t{ name: 'FRSTAT', value: 0 },\r\n\t\t\t\t\t\t{ name: 'snap', value: JSON.stringify(this._drawingItems.snap.toGeoJSON().geometry) }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinputs = this.refs.scroll.getElementsByTagName('input');\r\n\t\t\t\t\t// ,\r\n\t\t\t\t\t// selectNodes = this.refs.scroll.getElementsByTagName('select');\r\n\r\n\t\t\t\t// inputs.concat(selectNodes);\r\n\t\t\t\tfor (let key in meta) {\r\n\t\t\t\t\tif (key in hashCols) {\r\n\t\t\t\t\t\t//fields.push({ name: key, value: meta[key].Value });\r\n\t\t\t\t\t\tproperties[key] = meta[key].Value || '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0, len = inputs.length; i < len; i++) {\r\n\t\t\t\t\tlet it = inputs[i],\r\n\t\t\t\t\t\tname = it.name,\r\n\t\t\t\t\t\tval = it.options ? it.options[it.selectedIndex || 0].value : it.value;\r\n\r\n\t\t\t\t\tif (val) {\r\n\t\t\t\t\t\tproperties[name] = val;\r\n\t\t\t\t\t\t// properties[this._namesHash[name] || name] = val;\r\n\t\t\t\t\t\t// fields.push({ name: this._namesHash[name] || name, value: val });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (hashCols['Квартал'] || hashCols.kv || hashCols.kvartal) {\r\n\t\t\t\t\tlet kvKey = hashCols['Квартал'] ? 'Квартал' : (hashCols.kv ? 'kv' : 'kvartal');\r\n\t\t\t\t\t// fields.push({ name: kvKey, value: kvartal });\r\n\t\t\t\t\tproperties[kvKey] = kvartal;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis._useLastProps(properties);\r\n\t\t\t\t// let lastProps = Object.keys(properties).reduce((p, k) => {\r\n\t\t\t\t\t// if (Config.fieldsConf[k] && Config.fieldsConf[k].save && properties[k]) {\r\n\t\t\t\t\t\t// p[k] = properties[k];\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// return p;\r\n\t\t\t\t// }, {});\r\n\t\t\t\t\r\n\t\t\t\t// Requests.saveState(lastProps, 'gmxForest_lastProps');\r\n// console.log('ssssssssss', latlngs) L.gmxUtil.geoJSONtoGeometry\r\n\t\t\t\tRequests.modifyVectorObjects(layerID, [{\r\n\t\t\t\t\tproperties: properties,\r\n\t\t\t\t\tgeometry: L.gmxUtil.geoJSONtoGeometry(geo.toGeoJSON()),\r\n\t\t\t\t\taction: 'insert'\r\n\t\t\t\t}]).then((ev) => {\r\nconsole.log('insert VectorObjects', ev)\r\n\t\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\t\tmap.gmxDrawing.remove(geo);\r\n\t\t\t\t\t// prnt.editSite();\r\n\t\t\t\t\tprnt.regetFeatures();\r\n\t\t\t\t\tL.gmx.layersVersion.chkVersion(layerID);\r\n\t\t\t\t});\r\n\t\t\t\tthis.cancelMe();\r\n\t\t\t},\r\n\r\n\t\t\tnextStep() {\r\n\t\t\t\tconst { step, meta, map } = this.get();\r\n console.log('nextStep', step, meta, this.refs);\r\n// this.chkInputs();\r\n\t\t\t\tconst isRing = this._drawingItems && this._drawingItems.ring;\r\n\t\t\t\tif (step === 2) {\r\n\t\t\t\t\tthis.addObject();\r\n\t\t\t\t} else if (this.chkInputs(!isRing)) {\r\n\t\t\t\t\tlet ring = this._drawingItems.ring.rings[0].ring,\r\n\t\t\t\t\t\tlatlngs = ring.getLayers()[0].getLatLngs();\r\n// console.log('ssssssssss', latlngs)\r\n\t\t\t\t\tlatlngs[latlngs.length - 1] = latlngs[0];\r\n\r\n\t\t\t\t\tmap.gmxDrawing.remove(this._drawingItems.ring);\r\n\t\t\t\t\tlet geo = map.gmxDrawing.add(L.polygon(latlngs), {title: 'Делянка'});\r\n\r\n\t\t\t\t\tthis.set({step: 2, geo: geo, _lastProps: this._useLastProps()});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\treDrawing(snap, setView) {\r\n\t\t\t\tconst { map } = this.get();\r\n// console.log('reDrawing', snap);\r\n\r\n\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\tif (snap) {\r\n\t\t\t\t\tif (snap.latlng) {\r\n\t\t\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(snap.latlng[0], snap.latlng[1]);\r\n\t\t\t\t\t\tlet cont = this.refs.sn0;\r\n\t\t\t\t\t\tif (cont) {\r\n\t\t\t\t\t\t\tlet inputs = cont.getElementsByTagName('input');\r\n\t\t\t\t\t\t\tinputs[0].classList.remove('error');\r\n\t\t\t\t\t\t\tinputs[1].classList.remove('error');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// this.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec;\r\n\t\t\t\t\t\t// this.delta = snap.latlng[0] ? 1 / Math.cos(snap.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\tthis.delta = 1;\r\n\t\t\t\t\t\tlet gmxDrawing = map.gmxDrawing,\r\n\t\t\t\t\t\t\tlatlng = new L.LatLng(snap.latlng[0], snap.latlng[1]),\r\n\t\t\t\t\t\t\tp = latlng,\r\n\t\t\t\t\t\t\tmarker = L.marker(latlng, {draggable: true, title: 'Snap point'}).on('dragend', (it, ev) => {\r\n\t\t\t\t\t\t\t\t// if (snap.snap && snap.snap.length) {\r\n\t\t\t\t\t\t\t\t\tlet cont = this.refs.sn0,\r\n\t\t\t\t\t\t\t\t\t\tinputs = cont.getElementsByTagName('input'),\r\n\t\t\t\t\t\t\t\t\t\tlatlng = it.target.getLatLng();\r\n\t\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(latlng);\r\n\t\t\t\t\t\t\t\t\t// snap.latlng = [latlng.lat, latlng.lng];\r\n\t\t\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t}, this),\r\n\t\t\t\t\t\t\tmyObject = map.gmxDrawing.add(marker, {}),\r\n\t\t\t\t\t\t\tout = {\r\n\t\t\t\t\t\t\t\tmarker: myObject\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tarr = [];\r\n\r\n\t\t\t\t\t\tif (setView) { map.setView(latlng); }\r\n\t\t\t\t\t\tif (snap.snap) {\r\n\t\t\t\t\t\t\tarr = snap.snap.map((it) => {\r\n\t\t\t\t\t\t\t\t// p = L.GeometryUtil.destination(p, 180 + it[0], it[1]);\r\n\t\t\t\t\t\t\t\tlet angle = it[0] || 0,\r\n\t\t\t\t\t\t\t\t\tdist = it[1] || 0;\r\n\t\t\t\t\t\t\t\tangle += this.declination ? this.declination : 0;\r\n\t\t\t\t\t\t\t\tdist *= this.delta ? this.delta : 1;\r\n\t\t\t\t\t\t\t\tp = L.GeometryUtil.destination(p, angle, dist);\r\n\t\t\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// arr = arr.reverse();\r\n\t\t\t\t\t\t\tarr.unshift(latlng);\r\n\t\t\t\t\t\t\tlatlng = p;\r\n\t\t\t\t\t\t\tout.snap = map.gmxDrawing.add(L.polyline(arr), {pointStyle:{shape: 'circle'}, lineStyle:{color: '#ff0000'}} );\r\n\t\t\t\t\t\t\tout.snap.on('editstop dragend rotateend', (it) => {\r\n\t\t\t\t\t\t\t\tlet geoJSON = it.object.toGeoJSON(),\r\n\t\t\t\t\t\t\t\t\tcoords = geoJSON.geometry.coordinates,\r\n\t\t\t\t\t\t\t\t\tlatlngs = coords.map((it) => L.latLng(it[1], it[0])),\r\n\t\t\t\t\t\t\t\t\tarr = Requests.getAngleDist(latlngs[0], latlngs, this.declination, this.delta);\r\n\t\t\t\t\t\t\t\tarr.shift();\r\n// console.log('latlng1', coords[0]);\r\n\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(L.latLng(coords[0][1], coords[0][0]));\r\n\t\t\t\t\t\t\t\tsnap.snap = arr;\r\n\t\t\t\t\t\t\t\tthis.lastEdit = 'snap';\r\n\t\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (snap.ring) {\r\n\t\t\t\t\t\t\tarr = snap.ring.map((it) => {\r\n\t\t\t\t\t\t\t\tlet angle = (it[0] || 0);\r\n\t\t\t\t\t\t\t\tangle -= this.declination ? this.declination : 0;\r\n\t\t\t\t\t\t\t\tp = L.GeometryUtil.destination(p, (it[0] || 0) + (this.declination ? this.declination : 0), it[1] || 0);\r\n\t\t\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tarr.unshift(latlng);\r\n\t\t\t\t\t\t\tout.ring = map.gmxDrawing.add(L.polyline(arr), {pointStyle:{shape: ''}, lineStyle:{color: '#0000ff'}} );\r\n\t\t\t\t\t\t\tout.ring.on('editstop dragend rotateend', (it) => {\r\n\t\t\t\t\t\t\t\tlet geoJSON = it.object.toGeoJSON(),\r\n\t\t\t\t\t\t\t\t\tlatlngs = geoJSON.geometry.coordinates.map((it) => L.latLng(it[1], it[0])),\r\n\t\t\t\t\t\t\t\t\tarr = Requests.getAngleDist(latlngs[0], latlngs, this.declination, this.delta),\r\n\t\t\t\t\t\t\t\t\tsnapLen = snap.snap ? snap.snap.length : 0;\r\n\t\t\t\t\t\t\t\tif (!snapLen) {\r\n\t\t\t\t\t\t\t\t\tsnap.latlng = this._getLatlng(latlngs[0]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tarr.shift();\r\n\t\t\t\t\t\t\t\tsnap.ring = arr;\r\n\t\t\t\t\t\t\t\tthis.lastEdit = 'ring';\r\n\t\t\t\t\t\t\t\tthis.set({snap: snap});\r\n\t\t\t\t\t\t\t}, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.lastEdit && out[this.lastEdit]) {\r\n\t\t\t\t\t\t\tout[this.lastEdit].bringToFront();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.lastEdit = '';\r\n\t\t\t\t\t\tthis._drawingItems = out;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttoggleContextmenu(flag) {\r\n // console.log('toggleContextmenu', flag);\r\n\t\t\t\tlet map = nsGmx.leafletMap,\r\n\t\t\t\t\tmcm = map.contextmenu,\r\n\t\t\t\t\tdcm = map.gmxDrawing.contextmenu;\r\n\r\n\t\t\t\tif (!this._privazMenu) {\r\n\t\t\t\t\tthis._privazMenu = {callback: this.privaz.bind(this), text: 'Привязать'};\r\n\t\t\t\t}\r\n\t\t\t\tif (flag === 1) {\r\n\t\t\t\t\tdcm.insertItem(this._privazMenu, 0, 'points');\r\n\t\t\t\t\tthis._getCenterMenu = mcm.insertItem({callback: this.getCenter.bind(this), text: 'Взять координату'}, 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdcm.removeItem(this._privazMenu, 'points');\r\n\t\t\t\t\tif (this._getCenterMenu) {\r\n\t\t\t\t\t\tmcm.removeItem(this._getCenterMenu);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmap.gmxDrawing.clear();\r\n\t\t\t\t\tthis._clearDrawingItems();\r\n\t\t\t\t\tthis.set({cancel: true});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsbl_mer(lat, lon) {\r\n\t\t\t\tlet zone = Math.round(lon / 6) + 1,\r\n\t\t\t\t\tl0 = zone * 6 - 3;\r\n\t\t\t\treturn (lon - l0) * Math.sin(lat);\r\n\t\t\t},\r\n\t\t\tsetNodeField(node, setFlag) {\r\n\t\t\t\tconst { map, quadrantIds} = this.get();\r\n\t\t\t\tthis.set({quadrantValues: null, quadrantLayerId: null});\r\n\t\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value;\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tL.gmxUtil.loaderStatus(val);\r\n\t\t\t\t\tRequests.loadQuadrantValues(val)\r\n\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\tthis.set({quadrantValues: json, quadrantLayerId: val || null});\r\n\t\t\t\t\t\tfor (let i = 0, len = quadrantIds.length; i < len; i++) {\r\n\t\t\t\t\t\t\tlet pt = quadrantIds[i];\r\n\t\t\t\t\t\t\tif (pt.id === val) {\r\n\t\t\t\t\t\t\t\tmap.fitBounds(pt.bounds);\r\n\t\t\t\t\t\t\t\tif (!pt._layer._map) { map.addLayer(pt._layer); }\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tL.gmxUtil.loaderStatus(val, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tprivaz(ev, feature) {\r\n\t\t\t\tconst { snap } = this.get();\r\n\t\t\t\tlet geoJson = feature.toGeoJSON(),\r\n\t\t\t\t\tlatlngs = L.geoJson(geoJson).getLayers()[0].getLatLngs();\r\n\t\t\t\t\t\r\n\t\t\t\tif (latlngs[0][0] instanceof L.LatLng) {\r\n\t\t\t\t\tlatlngs = latlngs[0];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar tt = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsnap.latlng = this._getLatlng(latlngs[0]);\r\n\t\t\t\t\r\n\t\t\t\tthis.declination = Requests.geoMag(snap.latlng[0], snap.latlng[1], 0).dec - this.sbl_mer(latlngs[0].lat, latlngs[0].lng);\r\n\t\t\t\tthis.delta = 1;\r\n\t\t\t\tlatlngs.push(latlngs[0]);\r\n\t\t\t\t\r\n\t\t\t\tsnap.snap = [[]];\r\n\t\t\t\tlet ring = Requests.getAngleDist(latlngs[0], latlngs, this.declination, this.delta);\r\n\t\t\t\tring.shift();\r\n\t\t\t\tsnap.ring = ring;\r\n\t\t\t\tfeature.remove();\r\n\t\t\t\tthis.set({snap: snap});\r\n\t\t\t},\r\n\t\t\t_getLatlng(latlng) {\r\n\t\t\t\treturn [Number(latlng.lat.toFixed(6)), Number(latlng.lng.toFixed(6))];\r\n\t\t\t},\r\n\t\t\tgetCenter(ev) {\r\n \t\t\t\tconst { snap, map } = this.get();\r\n\t\t\t\tsnap.latlng = this._getLatlng(ev.latlng);\r\n\t\t\t\tthis.set({snap: snap});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonupdate({ changed, current, previous }) {\r\n\t\t\tif (changed.cancel && current.cancel) {\r\n\t\t\t\tthis.toggleContextmenu(0);\r\n\t\t\t}\r\n\t\t\tif (changed.snap && this._focusNode) {\r\n\t\t\t\tlet arr = document.getElementsByName(this._focusNode);\r\n\t\t\t\tif (arr && arr.length) {\r\n\t\t\t\t\tarr[0].focus();\r\n\t\t\t\t\tarr[0].select();\r\n\t\t\t\t}\r\n\t\t\t\tthis._focusNode = undefined;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonstate({ changed, current, previous }) {\r\n\t\t\tif (changed.step && current.step === 1) {\r\n\t\t\t\tthis.toggleContextmenu(current.step);\r\n\t\t\t}\r\n\r\n console.log('snap onstate', current._lastProps, current);\r\n\t\t\tif (changed.snap) {\r\n\t\t\t\tlet snap = current.snap,\r\n\t\t\t\t\tquadrantValues = current.quadrantValues,\r\n\t\t\t\t\titem = current.item,\r\n\t\t\t\t\thashCols = current.hashCols;\r\n\t\t\t\tif (!snap.latlng && quadrantValues && item && hashCols && current.map) {\r\n\t\t\t\t\tlet out = {},\r\n\t\t\t\t\t\tfitBounds = null,\r\n\t\t\t\t\t\tkv = item[hashCols.kv || hashCols.kvartal];\r\n\t\t\t\t\tif (quadrantValues[kv]) {\r\n\t\t\t\t\t\tlet bbox = quadrantValues[kv].bbox,\r\n\t\t\t\t\t\t\tmin = bbox.min,\r\n\t\t\t\t\t\t\tmax = bbox.max;\r\n\t\t\t\t\t\tcurrent.map.fitBounds([[min.y, min.x], [max.y, max.x]]);\r\n\t\t\t\t\t\tout.latlng = bbox.getCenter();\r\n\t\t\t\t\t\tthis.declination = Requests.geoMag(out.latlng[0], out.latlng[1], 0).dec - this.sbl_mer(out.latlng[0], out.latlng[1]);\r\n\t\t\t\t\t\t// this.delta = out.latlng[0] ? 1 / Math.cos(out.latlng[0] * Math.PI / 180) : 1;\r\n\t\t\t\t\t\tthis.delta = 1;\r\n\t\t\t\t\t\tlet p = new L.LatLng(out.latlng[1], out.latlng[0]),\r\n\t\t\t\t\t\t\tcenter = p,\r\n\t\t\t\t\t\t\tfp = null;\r\n\t\t\t\t\t\tif (!snap.ring && item && hashCols) {\r\n\t\t\t\t\t\t\tlet geo = item[hashCols.geomixergeojson],\r\n\t\t\t\t\t\t\t\tgeoJSON = L.geoJson(L.gmxUtil.geometryToGeoJSON(geo)),\r\n\t\t\t\t\t\t\t\tlatlngs = geoJSON.getLayers()[0].getLatLngs()[0];\r\n\t\t\t\t\t\t\tfp = latlngs[0];\r\n\t\t\t\t\t\t\tlatlngs.unshift(latlngs[0]);\r\n\t\t\t\t\t\t\tlet ring = Requests.getAngleDist(p, latlngs, this.declination, this.delta);\r\n\t\t\t\t\t\t\tring.shift();\r\n\t\t\t\t\t\t\tring.shift();\r\n\t\t\t\t\t\t\tp = latlngs[latlngs.length - 1];\r\n\t\t\t\t\t\t\tlet bearing = L.GeometryUtil.bearing(p, fp);\r\n\t\t\t\t\t\t\tbearing = Math.floor(bearing * 100) / 100;\r\n\t\t\t\t\t\t\tring.push([\r\n\t\t\t\t\t\t\t\tbearing + (bearing < 0 ? 360 : 0),\r\n\t\t\t\t\t\t\t\tL.gmxUtil.distVincenty(p.lng, p.lat, fp.lng, fp.lat)\r\n\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\tout.ring = ring;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!snap.snap) {\r\n\t\t\t\t\t\t\tlet bearing = L.GeometryUtil.bearing(fp, center);\r\n\t\t\t\t\t\t\tbearing = Math.floor(bearing * 100) / 100;\r\n\t\t\t\t\t\t\tout.snap = [[\r\n\t\t\t\t\t\t\t\tbearing + (bearing < 0 ? 360 : 0),\r\n\t\t\t\t\t\t\t\tL.gmxUtil.distVincenty(fp.lng, fp.lat, center.lng, center.lat)\r\n\t\t\t\t\t\t\t]];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsnap = out;\r\n\t\t\t\t\t\tthis.set({snap: out, kvartal: kv});\r\n\t\t\t\t\t\tthis.reDrawing(snap, true);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t// } else if (this._focusNode !== undefined) {\r\n\t\t\t\t\t// console.log('sssssss', this._focusNode);\r\n\t\t\t\t\t// this.set({snap: {\r\n\t\t\t\t\t\t// snap: [[]],\r\n\t\t\t\t\t\t// ring: [[]]\r\n\t\t\t\t\t// }});\r\n\t\t\t\t}\r\n\t\t\t\tthis.reDrawing(snap);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"main_pop_cont_2\">\r\n\t<div class=\"pop_title\">Добавление делянки</div>\r\n{#if step === 1}\r\n\t<div class=\"scrollbar\" ref:scroll>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_big\">Шаг 1. Контур делянки</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class=\"pop_ro_title_radio\">\r\n\t\t\t<div class=\"pop_ro_title_left\"><label class=\"custom-control-label\">Слой квартальной сети</label></div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"quadrantLayerId\" ref:quadrantLayerId class=\"quadrantLayerId gmx-sidebar-select-large\">\r\n\t\t\t\t<option value=\"\"></option>\r\n{#if quadrantIds}\r\n{#each quadrantIds as it}\r\n\t\t\t\t\t\t<option value=\"{it.id}\" selected=\"{it.id === quadrantLayerId}\">{it.title}</option>\r\n{/each}\r\n{/if}\r\n\t\t\t</select>\r\n\t\t\t<span class=\"pop_upload\" alt=\"pop_upload\" on:click=\"createKvartal()\" ></span>\r\n\t\t</div>\r\n{#if listQuadrants}\r\n\t\t<div class=\"pop_ro_title_radio\">\r\n\t\t\t<div class=\"pop_ro_title_left\"><label class=\"custom-control-label\" for=\"defaultUnchecked\">Квартал</label></div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro pop_ro_radio_input\">\r\n\t\t\t<input name=\"kvartal\" value=\"{kvartal || ''}\" on:input=\"setKvartal(this)\" class=\"\" list=\"kvartal\" title=\"Указать квартал\" />\r\n\t\t\t<datalist id=\"kvartal\">\r\n\t\t\t{#each listQuadrants as it}\r\n\t\t\t\t<option value={it} />\r\n\t\t\t{/each}\r\n\t\t\t</datalist>\r\n\t\t</div>\r\n{/if}\r\n\t\t<div class=\"pop_ro_title_radio\">\r\n\t\t\t<div class=\"pop_ro_title_left\"><label class=\"custom-control-label\" for=\"defaultUnchecked\">Координаты опорной точки</label></div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro pop_ro_radio_input point\" ref:sn0>\r\n\t\t\t<span class=\"leaflet-gmx-coordFormatChange\" title=\"Сменить формат координат\" on:click=\"coordFormatChange(this)\"></span>\r\n\t\t\t<input name=\"lat\" on:input=\"setPoint(event)\" on:paste=\"fromClipboard(event)\" value=\"{latlng ? latlng[0] : ''}\" class=\"inp_pop_mini lat error\" placeholder=\"lat\" type=\"number\" pattern=\"{paterns.latlng}\" min=\"-90\" max=\"90\" step=\"0.002\" />\r\n\t\t\t<input name=\"lng\" on:input=\"setPoint(event)\" on:paste=\"fromClipboard(event)\" value=\"{latlng ? latlng[1] : ''}\" class=\"inp_pop_mini lng error\" placeholder=\"long\" type=\"number\" pattern=\"{paterns.latlng}\" min=\"-180\" max=\"180\" step=\"0.002\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro pop_ro_radio_input latlngPoint\" ref:sn00>\r\n\t\t\t<input name=\"latlng\" on:input=\"setLatlngPoint(event)\" disabled value=\"{latlngPoint ? latlngPoint : ''}\" class=\"inp_pop_mini {latlngPoint ? '' : 'error'}\" />\r\n\t\t</div>\r\n\t\t<div class=\"p_block snap\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Привязочный ход</div>\r\n\r\n\t\t{#each snapArr as it, i}\r\n\t\t\t<div class=\"pop_ro snap\">\r\n\t\t\t\t<div class=\"pop_ro_title_left\">{i}-{i + 1}</div>\r\n\t\t\t\t<input name=\"snap{i}_a\" value=\"{it[2] || it[0] || 0}\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" class=\"inp_pop_mini_m\" placeholder=\"Angle\" />\r\n\t\t\t\t-\r\n\t\t\t\t<input name=\"snap{i}_d\" value=\"{Math.round(it[1] || 0)}\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" class=\"inp_pop_mini_m\" placeholder=\"Distance\" type=\"number\" min=\"0\" step=\"1\" size=\"6\" />\r\n\t\t\t\t<div class=\"pop_ro_right_dotted\">\r\n\t\t\t\t\t<span on:click=\"nextPoint(this)\" class=\"add_thin_ic addNext\" title=\"Добавить строку\"></span>\r\n\t\t\t\t\t<span on:click=\"delPoint(this)\" class=\"dotted_ic delItem\" title=\"Удалить строку\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t{/each}\r\n\t\t</div>\r\n\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Контур делянки</div>\r\n\t\t</div>\r\n\r\n\t\t{#each ringArr || [[]] as it, i}\r\n\t\t<div class=\"pop_ro ring ring{i}\">\r\n\t\t\t<div class=\"pop_ro_title_left\">{i + (snapArr ? snapArr.length : 0)}-{i === ringArr.length - 1 ? (snapArr ? snapArr.length : 0) : (snapArr ? snapArr.length : 0) + i + 1}</div>\r\n\t\t\t<input name=\"ring{i}_a\" value=\"{it[2] || it[0] || 0}\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" class=\"inp_pop_mini_m\" />\r\n\t\t\t-\r\n\t\t\t<input name=\"ring{i}_d\" on:keyup=\"onKeyUp(event)\" on:input=\"setPoint(event)\" value=\"{Math.round(it[1] || 0)}\" class=\"inp_pop_mini_m\" placeholder=\"Distance\" type=\"number\" min=\"0\" step=\"1\" />\r\n\t\t\t<div class=\"pop_ro_right_dotted\">\r\n\t\t\t\t<span on:click=\"nextPoint(this)\" class=\"add_thin_ic addNext\" title=\"Добавить строку\"></span>\r\n\t\t\t\t<span on:click=\"delPoint(this)\" class=\"dotted_ic delItem\" title=\"Удалить строку\"></span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t{/each}\r\n\t</div>\r\n\t<div class=\"pop_bottom\">\r\n\t\t<div class=\"pop_bottom_left\" on:click=\"cancelMe()\">Отмена</div>\r\n\t\t<div class=\"pop_bottom_right\" on:click=\"nextStep()\">Далее</div>\r\n\t</div>\r\n{:else}\r\n\t<div class=\"scrollbar\" ref:scroll>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_big\">Шаг 2. Информация</div>\r\n\t\t\t<div class=\"info\">Важно!\r\n\t\t\t\t<div class=\"main_pop_cont_4_Imp\">\r\n\t\t\t\t\t<div class=\"main_pop_cont_4_Imp_text \">\r\n\t\t\t\t\t   на основе этой информации Вы будете создавать отчет, поэтому мы бы рекомендовали заполнить ее сразу, в процессе добавления делянки\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n{#each Object.keys(hashCols) as k}\r\n\t{#if\r\n\t\t(k !== 'geomixergeojson' &&  k !== 'gmx_id' &&  k !== 'FRSTAT' &&  k !== 'snap') &&\r\n\t\t(\r\n\t\t\t(reportType === 'ИЛ' && k !== 'reforest_t') ||\r\n\t\t\t(reportType === 'ВЛ' && k !== 'form_rub' && k !== 'type_rub')\r\n\t\t)\r\n\t}\r\n\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">{isForestCols && fieldsConf[k] ? fieldsConf[k].title : k}</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t{#if isForestCols && k === 'report_t'}\r\n\t\t\t<select on:change=\"set({reportType: this.options[this.selectedIndex].value})\" name=\"{k}\" ref:reportType class=\"reportType gmx-sidebar-select-large\">\r\n\t\t\t\t{#each Object.keys(fieldsConf[k].onValue) as kk}\r\n\t\t\t\t<option value=\"{kk}\">{fieldsConf[k].onValue[kk].title}</option>\r\n\t\t\t\t{/each}\r\n\t\t\t</select>\r\n\t\t{:else}\r\n\t\t\t<input list=\"{k}_\" id=\"{k}\" name=\"{k}\" class=\"inp_pop\" placeholder=\"{isForestCols && fieldsConf[k] ? fieldsConf[k].title : _lastProps[k] || ''}\" />\r\n\t\t\t{#if _lastProps[k]}\r\n\t\t\t\t<datalist id=\"{k}_\">\r\n\t\t\t\t\t{#each _lastProps[k] as pt}\r\n\t\t\t\t\t<option value=\"{pt}\" />\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</datalist>\r\n\t\t\t{/if}\r\n\t\t{/if}\r\n\t\t</div>\r\n\t{/if}\r\n{/each}\r\n\r\n\t\t<!-- div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Участковое лестничество</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"sectionForestry\" class=\"inp_pop\" value=\"\" placeholder=\"Участковое лестничество\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Дача/Урочище</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"dacha\" class=\"inp_pop\"  placeholder=\"Дача/Урочище\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Квартал</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"quadrant\" class=\"inp_pop\"  placeholder=\"Квартал\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Выдел(ы)</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"stratum\" class=\"inp_pop\"  placeholder=\"Выдел(ы)\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Делянка</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"site\" class=\"inp_pop\"  placeholder=\"Делянка\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Площадь</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"siteArea\" class=\"inp_pop\"  placeholder=\"Площадь\" />\r\n\t\t</div>\r\n\t{#if isReqTypeReport}\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Тип лесовосстановительного мероприятия</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"recoveryEventType\" class=\"inp_pop\"  placeholder=\"\" />\r\n\t\t</div>\r\n\t{:else}\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Форма рубки</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"fellingForm\" class=\"inp_pop\"  placeholder=\"сплошная/выборочная\" />\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Тип рубки</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"fellingType\" class=\"inp_pop\"  placeholder=\"\" />\r\n\t\t</div>\r\n\t{/if}\r\n\t\t<div class=\"pop_ro_title\">\r\n\t\t\t<div class=\"pop_ro_title_left\">Год</div>\r\n\t\t</div>\r\n\t\t<div class=\"pop_ro\">\r\n\t\t\t<input name=\"Год\" class=\"inp_pop\"  placeholder=\"\" />\r\n\t\t</div -->\r\n\t</div>\r\n\t<div class=\"pop_bottom\">\r\n\t\t<div class=\"pop_bottom_left\" on:click=\"cancelMe()\">Отмена</div>\r\n\t\t<div class=\"pop_bottom_right\" on:click=\"nextStep()\">Создать</div>\r\n\t</div>\r\n{/if}\r\n</div>\r\n\r\n<style>\r\n* {\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n:global(.gmxControlPopup.leaflet-control .closeButton) {\r\n    top: 12px;\r\n    right: 12px;\r\n    z-index: 2;\r\n}\r\n\r\n.pop_title {\r\n    position: relative;\r\n    top: 0px;\r\n    left: 0;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    font-family: IBM Plex Sans;\r\n    min-height: 30px;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    padding-left: 17px;\r\n}\r\n\r\nlabel.custom-control-label {\r\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n}\r\n\r\n.pop_ro_title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-top: 0;\r\n    bottom: 4px;\r\n    position: relative;\r\n    align-items: center;\r\n}\r\n\r\n.pop_ro {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n    padding: 5px 26px 5px 15px;\r\n    margin-bottom: 6px;\r\n    align-items: center;\r\n}\r\n\r\n.pop_ro.snap {\r\n    align-items: center;\r\n}\r\n\r\n.pop_ro.ring.ring0 {\r\n    align-items: center;\r\n}\r\n\r\n.pop_bottom {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 40px;\r\n    border-top: 1px solid #D8E1E8;\r\n    align-items: center;\r\n    margin-top: 23px;\r\n}\r\n\r\n.pop_bottom_right {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #318CFE;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n.pop_bottom_left {\r\n    font-style: normal;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    display: flex;\r\n    color: #394B59;\r\n    flex-direction: row;\r\n    width: 50%;\r\n    justify-content: center;\r\n    align-items: center;\r\n    border-right: 1px solid #D8E1E8;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-weight: 600;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.main_pop_cont_2 {\r\n    display: block;\r\n    width: 287px;\r\n    height: 460px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    align-items: left;\r\n}\r\n.main_pop_cont_2 div {\r\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n}\r\n.scrollbar {\r\n    height: 100vh;\r\n    width: 100%;\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n}\r\n.pop_ro_title_big {\r\n    font-style: normal;\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    color: #394B59;\r\n    display: block;\r\n}\r\n.pop_ro_title_radio {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    min-height: 30px;\r\n    padding: 13px 26px 5px 15px;\r\n    margin-bottom: -12px;\r\n    margin-top: -5px;\r\n}\r\n.custom-control-input {\r\n    position: relative;\r\n    z-index: 1;\r\n    opacity: 1;\r\n    margin-right: 10px;\r\n    top: 2px;\r\n}\r\n.pop_ro_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    display: block;\r\n}\r\n\r\n.leaflet-gmx-coordFormatChange {\r\n    margin-left: 2px;\r\n    margin-right: 8px;\r\n    margin-top: 11px;\r\n    display: none;\r\n}\r\n\r\ninput.inp_pop {\r\n    width: 100%;\r\n    text-align: left;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini {\r\n    width: 48%;\r\n    text-align: left;\r\n    /* background: transparent;*/\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\ninput.inp_pop_mini_m {\r\n    width: 60px;\r\n    text-align: left;\r\n/*    background: transparent;*/\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    padding-left: 10px;\r\n    font-weight: bold;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: 'IBM Plex Sans', sans-serif;\r\n    color: #394B59;\r\n}\r\n.latlngPoint {\r\n\ttext-align: right;\r\n}\r\n.latlngPoint input {\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n}\r\n\r\n.pop_ro_right_dotted span {\r\n    cursor: pointer;\r\n}\r\n.add_thin_ic {\r\n    content: url(./img/add_thin_ic.svg);\r\n}\r\n.dotted_ic {\r\n    content: url(./img/remove_thin_ic.svg);\r\n}\r\n.main_pop_cont_4_Imp {\r\n\tposition: absolute;\r\n    display: block;\r\n    /* background: #FFFFFF; */\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 218px;\r\n    height: 118px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 15px;\r\n}\r\n.info {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: right;\r\n    text-decoration-line: underline;\r\n    cursor: pointer;\r\n    color: #318CFE;\r\n}\r\n.main_pop_cont_4_Imp_text {\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    text-align: left;\r\n    line-height: 18px;\r\n    color: #10161A;\r\n    display: block;\r\n}\r\n.pop_ro_title .main_pop_cont_4_Imp {\r\n\tdisplay: none;\r\n}\r\n.pop_ro_title .info:hover .main_pop_cont_4_Imp {\r\n\tdisplay: block;\r\n}\r\n\r\n.error {\r\n\tbackground-color: lightcoral;\r\n}\r\n.disabled {\r\n    display: none;\r\n}\r\n\r\n.pop_ro_title select {\r\n    width: 100%;\r\n\t\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n\t\r\n}\r\n\r\ninput[name=\"kvartal\"] {\r\n    width: 100%;\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n \r\ninput[name=\"kvartal\"]::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    background: #FFF;\r\n}\r\n\r\nspan.pop_upload {\r\n    content: url(./img/upload.svg);\r\n\tcursor: pointer;\r\n    left: 10px;\r\n    position: relative;\r\n}\r\n.p_block .pop_ro_title_left {\r\n    padding: 13px 26px 5px 15px;\r\n}\r\n\r\n.gmx-sidebar-select-large {\r\n\tbox-sizing:border-box;\r\n\twidth:100%;\r\n\theight:33px;\r\n\tpadding:0 8px;\r\n\tborder-radius:3px;\r\n\tbackground: transparent;\r\n\tborder:1px solid #d7e1e7;\r\n\tfont-family:Arial;\r\n\tfont-size:13px;\r\n\tfont-weight:400;\r\n\tcolor:#5b7284;\r\n}\r\n\r\n</style>\r\n","<script>\r\nimport * as Requests from './Requests.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\teditFlag: false,\r\n\t\t\tparentComp: null,\r\n\t\t\tsortType: 'desc',\r\n\t\t\tsortKey: 'gmx_id',\r\n\t\t\treverse: false,\r\n\t\t\tpageCurr: 1,\r\n\t\t\tpagesize: 15,\r\n\t\t\tpageFrom: 0,\r\n\t\t\ttableItems: [],\r\n\t\t\titems: [],\r\n\t\t\titem: null,\r\n\t\t\t// checked: {},\r\n\t\t\thashCols: []\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsort(key) {\r\n\t\t\tconst { sortType } = this.get();\r\n\t\t\t// console.log('sort', sortType);\r\n\t\t\tthis.set({sortType: sortType === 'desc' ? 'asc' : 'desc', sortKey: key});\r\n\t\t\tthis.setCurrPage(1);\r\n\t\t},\r\n\t\tcheckReverse(ev) {\r\n\t\t\t console.log('checkReverse', ev.ctrlKey);\r\n\r\n\t\t\tlet nChecked = {};\r\n\t\t\tlet ctrlKey = ev.ctrlKey;\r\n\t\t\tlet isChecked = ev.target.checked;\r\n\t\t\t\r\n\t\t\tif (ctrlKey || isChecked) {\r\n\t\t\t\tconst { items, hashCols, checked } = this.get();\r\n\t\t\t\tlet nm = hashCols.gmx_id;\r\n\t\t\t\titems.forEach((it) => {\r\n\t\t\t\t\tlet id = it[nm];\r\n\t\t\t\t\tif (!ctrlKey || !checked[id]) {\r\n\t\t\t\t\t\tnChecked[id] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.set({checked: nChecked, reverse: isChecked});\r\n\t\t\t// this.root.set({checked: nChecked});\r\n\t\t},\r\n\t\tcheckMe(id) {\r\n\t\t\t// console.log('checkMe', id);\r\n\t\t\tconst { checked } = this.get();\r\n\t\t\tif (checked[id]) {\r\n\t\t\t\tdelete checked[id];\r\n\t\t\t} else {\r\n\t\t\t\tchecked[id] = true;\r\n\t\t\t}\r\n\t\t\tthis.set({checked: checked});\r\n\t\t\t// this.root.set({checked: checked});\r\n\t\t},\r\n\t\tsortMe(arr, sortKey, hashCols, sortType) {\r\n\t\t\tlet nm = hashCols[sortKey];\r\n\t\t\treturn arr.sort((a, b) => {\r\n\t\t\t\tlet x = b[nm];\r\n\t\t\t\tlet y = a[nm];\r\n                return (x < y ? -1 : (x > y ? 1 : 0)) * (sortType === 'desc' ? -1 : 1);\r\n\t\t\t});\r\n\t\t},\r\n\t\tpageTo(nm) {\r\n\t\t\tconst { pageFrom } = this.get();\r\n\t\t\tthis.set({pageCurr: nm});\r\n\t\t\tnm = nm < 1 ? 1 : (nm > pageFrom ? pageFrom : nm);\r\n\t\t\tthis.setCurrPage(nm);\r\n\t\t\treturn nm;\r\n\t\t},\r\n\t\tsetItem(id) {\r\n\t\t\tconst { tableItems, hashCols, prnt } = this.get();\r\n\t\t\ttableItems.forEach((it) => {\r\n\t\t\t\tif(it[hashCols.gmx_id] === id) {\r\n\t\t\t\t\t// let snap = it[hashCols.snap] || null;\r\n\t\t// console.log('setItem', id, snap);\r\n\t\t\t\t\tthis.set({item: it});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// this.set({item: snap ? JSON.parse(snap) : {}});\r\n\t\t},\r\n\t\tviewItem(id) {\r\n\t\t\tconst { tableItems, hashCols} = this.get();\r\n\t\t\tthis.root.viewItem(id, tableItems, hashCols);\r\n\t\t},\r\n\t\tdeleteItem(id, ev) {\r\n\t\t\tconst { prnt } = this.get();\r\n\t\t\tprnt.deleteItem(id, ev);\r\n\t\t},\r\n\t\teditItem(id, del) {\r\n\t\t\tconst { tableItems, hashCols, prnt } = this.get();\r\n\r\n\t\t\tthis.root.viewItem(id, tableItems, hashCols);\r\n\t\t\tlet snap = null;\r\n\t\t\ttableItems.forEach((it) => {\r\n\t\t\t\tif(it[hashCols.gmx_id] === id) {\r\n\t\t\t\t\tsnap = it[hashCols.snap];\r\n// console.log('editItem', id, snap);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tprnt.editItem(id, snap, del);\r\n\t\t},\r\n\r\n\t\tsetCurrPage(nm) {\r\n\t\t\t// console.log('setCurrPage', nm);\r\n\t\t\tconst { items, hashCols, pageCurr, pagesize, sortKey, sortType } = this.get();\r\n\t\t\tnm = nm || pageCurr;\r\n\t\t\tconst beg = pagesize * (nm - 1);\r\n\r\n\t\t\tlet arr = (sortKey ? this.sortMe(items, sortKey, hashCols, sortType) : items)\r\n\t\t\t\t.slice(beg, beg + pagesize);\r\n\r\n\t\t\tconst cnt = items.length / pagesize;\r\n\t\t\tconst pf = Math.floor(cnt);\r\n\t\t\t// console.log('setCurrPage1', nm, arr, cnt);\r\n\t\t\tthis.set({tableItems: arr, pageCurr: nm, pageFrom: pf + (cnt > pf ? 1 : 0)});\r\n\t\t}\r\n\t},\r\n\tonstate({ changed, current, previous }) {\r\n // console.log('Table in onstate', changed, current, this.refs.Reverse);\r\n\t\tif (changed.items) {\r\n\t\t\tif (current.items.length) {\r\n\t\t\t\tthis.setCurrPage();\r\n\t\t\t} else {\r\n\t\t\t\tthis.set({tableItems: [], pageCurr: 1, pageFrom: 0});\r\n\t\t\t}\r\n\t\t\tif (this.refs.Reverse) {\r\n\t\t\t\tthis.refs.Reverse.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed.tableItems) {\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<table class=\"tabl_main_cont\">\r\n <tbody>\r\n\t<tr class=\"tabl_main_cont_tr\">\r\n\t\t<th>\r\n\t\t{#if !editFlag}\r\n\t\t\t<input on:click=\"checkReverse(event)\" type=\"checkbox\" ref:Reverse />\r\n\t\t{/if}\r\n\t\tID<span on:click=\"sort('gmx_id')\" class=\"c2 sorting { sortKey === 'gmx_id' ? (sortType === 'desc' ? 'sorting-desc' : 'sorting-asc') : '' }\"></span></th>\r\n\t\t<th on:click=\"sort('FRSTAT')\">Статус<span class=\"c2 sorting { sortKey === 'FRSTAT' ? (sortType === 'desc' ? 'sorting-desc' : 'sorting-asc') : '' }\"></span></th>\r\n\t</tr>\r\n {#each tableItems as it}\r\n\t<tr class=\"item {item && item[hashCols.gmx_id] === it[hashCols.gmx_id] ? 'current' : ''}\">\r\n\t\t<td class=\"c2\">\r\n\t\t{#if !editFlag}\r\n\t\t<input on:change=\"checkMe(it[hashCols.gmx_id])\" checked=\"{checked[it[hashCols.gmx_id]]}\" type=\"checkbox\">\r\n\t\t{/if}\r\n\t\t{it[hashCols.gmx_id]}\r\n\t\t</td>\r\n\t\t<td class=\"c3\">\r\n\t\t\t<div class=\"td_last_edit\">\r\n\t\t\t\t<div class=\"td_round\"><span class=\"{it[hashCols.FRSTAT] > 0 ? 'checked' : ''}\" title=\"Отчет{it[hashCols.FRSTAT] > 0 ? '' : ' не'} создан\"></span></div>\r\n\t\t\t\t<div class=\"td_icons_right\">\r\n\t\t\t\t{#if editFlag}\r\n\t\t\t\t\t<span on:click=\"editItem(it[hashCols.gmx_id])\" class=\"sketch_ic\" title=\"Редактировать\"></span>\r\n\t\t\t\t{/if}\r\n\t\t\t\t\t<span class=\"marker_ic\" on:click=\"viewItem(it[hashCols.gmx_id])\" title=\"Центрировать\"></span>\r\n\t\t\t\t{#if editFlag}\r\n\t\t\t\t\t<span class=\"delete_ic\" on:click=\"deleteItem(it[hashCols.gmx_id], event)\" title=\"Удалить\"></span>\r\n\t\t\t\t{/if}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</td>\r\n\t</tr>\r\n{/each}\r\n <tr>\r\n\t<td colspan=\"{editFlag ? 2 : 3}\" class=\"no_pad\">\r\n\t   <div class=\"bottom_tabl_block\">\r\n\t\t  <div class=\"bottom_tabl_block_left\"><span on:click=\"pageTo(pageCurr - 1)\" disabled=\"{ pageCurr === 1 }\"></span></div>\r\n\t\t  <div class=\"bottom_tabl_block_middle\"> Страница {pageCurr}/{pageFrom}</div>\r\n\t\t  <div class=\"bottom_tabl_block_right\"><span on:click=\"pageTo(pageCurr + 1)\" disabled=\"{ pageFrom === pageCurr }\"></span></div>\r\n\t   </div>\r\n\t</td>\r\n </tr>\r\n</tbody>\r\n</table>\r\n\r\n<style>\r\n\r\ntable.tabl_main_cont {\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    width: 100%;\r\n    height: auto;\r\n\tborder-collapse: collapse;\r\n}\r\ntable.tabl_main_cont tr.tabl_main_cont_tr {\r\n    background: #EDF4FA;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    height: 38px;\r\n    color: #8A9BA8;\r\n}\r\n\r\ntable.tabl_main_cont tr.tabl_main_cont_tr th {\r\n    width: 50%;\r\n    text-align: left;\r\n    padding: 0 10px 0 10px;\r\n\tcursor: pointer;\r\n}\r\ntable.tabl_main_cont tr {\r\n    box-sizing: border-box;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    min-height: 38px;\r\n    height: 38px;\r\n    color: #666;\r\n}\r\ntable.tabl_main_cont tr td {\r\n    width: 50%;\r\n    text-align: left;\r\n    padding: 0 10px 0 10px;\r\n}\r\n.td_last_edit {\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.td_icons_right {\r\n    display: flex;\r\n    width: 80px;\r\n    justify-content: space-between;\r\n}\r\ntable.tabl_main_cont tr td.no_pad {\r\n    padding: 0;\r\n}\r\n.bottom_tabl_block {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    width: 100%;\r\n    height: 50px;\r\n    border-top: 1px solid #D8E1E8;\r\n}\r\n.bottom_tabl_block_left {\r\n    background: #EDF4FA;\r\n    border-right: 1px solid #D8E1E8;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    width: 70px;\r\n    height: 50px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.bottom_tabl_block_middle {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    text-align: center;\r\n    color: #8A9BA8;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.bottom_tabl_block_right {\r\n    background: #EDF4FA;\r\n    border-left: 1px solid #D8E1E8;\r\n    border-bottom: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    width: 70px;\r\n    height: 50px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n.bottom_tabl_block_left span {\r\n    content: url(./img/left_ic.svg);\r\n}\r\n.bottom_tabl_block_right span {\r\n    content: url(./img/right_ic.svg);\r\n}\r\n.td_round span {\r\n    content: url(./img/red_ic.svg);\r\n}\r\n.td_round span.checked {\r\n    content: url(./img/green_ic.svg);\r\n}\r\n\r\n.td_icons_right span {\r\n    cursor: pointer;\r\n}\r\n.td_icons_right span.sketch_ic {\r\n    content: url(./img/sketch_ic.svg);\r\n}\r\n.td_icons_right span.delete_ic {\r\n    content: url(./img/delete_ic.svg);\r\n}\r\n.td_icons_right span.marker_ic {\r\n    content: url(./img/marker_ic.svg);\r\n}\r\n\r\nth span.sorting-desc {\r\n\tcontent: url(./img/ar_down.svg);\r\n\tmargin-left: 4px;\r\n\twidth: 8px;\r\n\theight: 6px;\r\n}\r\nth span.sorting-asc {\r\n\tcontent: url(./img/ar_down.svg);\r\n\ttransform: rotate(180deg);\r\n\tmargin-left: 4px;\r\n\twidth: 8px;\r\n\theight: 6px;\r\n}\r\n\r\n</style>\r\n","<script>\r\n\timport * as Config from './Config.js';\r\n\timport * as EditorLib from './EditorLib.js';\r\n\timport * as Requests from './Requests.js';\r\n\timport CreateSite from './CreateSite.html';\r\n\timport Snapping from './Snapping.html';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tprnt: this,\r\n\t\t\t\terror: '',\r\n\t\t\t\taskMode: false,\r\n\t\t\t\tlayerItems: null,\r\n\t\t\t\thashCols: {},\r\n\t\t\t\tchecked: {},\r\n\t\t\t\tquadrantLayerId: '',\r\n\t\t\t\tquadrantIds: [],\r\n\t\t\t\tquadrantValues: null,\r\n\t\t\t\titem: null,\r\n\t\t\t\tdelAsk: 0,\r\n\t\t\t\tdelID: 0,\r\n\t\t\t\tdelAskStyle: '',\r\n\t\t\t\tthisComp: null,\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\tlayerIds: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\t// Snapping: './Snapping.html',\r\n\t\t\tTable: './Table.html'\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tsnap: ({ item, hashCols }) => {\r\n\t\t\t\tlet out = {};\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\tlet snap = item[hashCols.snap];\r\n\t\t\t\t\tif (snap) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tout = JSON.parse(snap);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\treturn out;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn out;\r\n\t\t\t},\r\n\t\t},\r\n\t\r\n\t\tmethods: {\r\n\t\t\tcolsToHash(arr) {\r\n\t\t\t\treturn arr.reduce((a, v, i) => { a[v] = i; return a; }, {});\r\n\t\t\t},\r\n\t\t\tsetNodeField(node, setFlag) {\r\n\t\t\t\tconst {map, gmxMap} = this.get();\r\n\t\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value,\r\n\t\t\t\t\tname = node.name;\r\n\r\n// console.log('setNodeField', node, setFlag, val, gmxMap);\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.regetFeatures(val);\r\n/*\r\n\t\t\t\t\tlet layer = gmxMap.layersByID[val],\r\n\t\t\t\t\t\tmeta = layer.getGmxProperties().MetaProperties;\r\n\r\n\t\t\t\t\tRequests.loadFeatures(val)\r\n\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\t\t\t\tlet res = json.Result,\r\n\t\t\t\t\t\t\t\tcols = res.fields,\r\n\t\t\t\t\t\t\t\thashCols = this.colsToHash(cols),\r\n\t\t\t\t\t\t\t\tout = {prnt: this, cols: cols, hashCols: hashCols, layerItems: res.values, layerID: val || '', quadrantLayerId: '', quadrantValues: null},\r\n\t\t\t\t\t\t\t\tlatlngBounds = L.latLngBounds();\r\n\r\n\t\t\t\t\t\t\tres.values.map( it => {\r\n\t\t\t\t\t\t\t\tlet bb = L.gmxUtil.getGeometryBounds(it[it.length - 1]);\r\n\t\t\t\t\t\t\t\tlatlngBounds.extend([\r\n\t\t\t\t\t\t\t\t\t[bb.min.y, bb.min.x],\r\n\t\t\t\t\t\t\t\t\t[bb.max.y, bb.max.x]\r\n\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (res.values.length) {\r\n\t\t\t\t\t\t\t\tmap.fitBounds(latlngBounds);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!layer._map) {\r\n\t\t\t\t\t\t\t\tmap.addLayer(layer);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Requests.chkLayer(val);\r\n\r\n\t\t\t\t\t\t\tif (meta.kvartal) {\r\n\t\t\t\t\t\t\t\tlet quadrantLayerId = meta.kvartal.Value;\r\n\t\t\t\t\t\t\t\tRequests.loadQuadrantValues(quadrantLayerId)\r\n\t\t\t\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\t\t\t\tout.quadrantLayerId = quadrantLayerId;\r\n\t\t\t\t\t\t\t\t\tout.quadrantValues = json;\r\n\t\t\t\t\t\t\t\t\tthis.set(out);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.set(out);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n*/\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set({layerID: ''});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tregetFeatures(lid) {\r\n\t\t\t\tlet { layerID, map, gmxMap } = this.get();\r\n\t\t\t\tif (lid) { layerID = lid; }\r\n\t\t\t\tlet layer = gmxMap.layersByID[layerID],\r\n\t\t\t\t\tmeta = layer.getGmxProperties().MetaProperties;\r\n\t\t\t\tRequests.loadFeatures(layerID)\r\n\t\t\t\t.then(json => {\r\n\t\t\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\t\t\tlet res = json.Result,\r\n\t\t\t\t\t\t\tcols = res.fields,\r\n\t\t\t\t\t\t\tattr = {prnt: this, isForestCols: true, cols: cols, hashCols: this.colsToHash(cols), layerItems: res.values, layerID: layerID};\r\n\r\n\t\t\t\t\t\tfor (let k in Config.fieldsConf) {\r\n\t\t\t\t\t\t\tif (!(k in attr.hashCols)) {\r\n\r\n\t\t\t\t\t\t\t\tattr.isForestCols = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n// console.log('kkkkkkk', lid, attr);\r\n\t\t\t\t\t\tif (lid) {\r\n\t\t\t\t\t\t\tlet latlngBounds = L.latLngBounds();\r\n\t\t\t\t\t\t\tres.values.forEach( it => {\r\n\t\t\t\t\t\t\t\tlet bb = L.gmxUtil.getGeometryBounds(it[it.length - 1]);\r\n\t\t\t\t\t\t\t\tlatlngBounds.extend([\r\n\t\t\t\t\t\t\t\t\t[bb.min.y, bb.min.x],\r\n\t\t\t\t\t\t\t\t\t[bb.max.y, bb.max.x]\r\n\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (res.values.length) {\r\n\t\t\t\t\t\t\t\tmap.fitBounds(latlngBounds);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!layer._map) {\r\n\t\t\t\t\t\t\t\tmap.addLayer(layer);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Requests.chkLayer(val);\r\n\r\n\t\t\t\t\t\t\tif (meta.kvartal) {\r\n\t\t\t\t\t\t\t\tlet quadrantLayerId = meta.kvartal.Value;\r\n\t\t\t\t\t\t\t\tRequests.loadQuadrantValues(quadrantLayerId)\r\n\t\t\t\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\t\t\t\tattr.quadrantLayerId = quadrantLayerId;\r\n\t\t\t\t\t\t\t\t\tattr.quadrantValues = json;\r\n\t\t\t\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tsetField(key, data) {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tchangedParams[key] = data;\r\n\t\t\t\tthis.set({changedParams: changedParams});\r\n\t\t\t},\r\n\r\n\t\t\tsendExcel(ev) {\r\n\t\t\t\tRequests.sendExcel(ev.target).then(json => {\r\n\t\t\t\t\tif (json) {\r\n\t\t\t\t\t\tif (json.status === 'error') {\r\n\t\t\t\t\t\t\tsetTimeout(function() { this.set({error: ''}); }.bind(this), 5000);\r\n\t\t\t\t\t\t\tthis.set({error: json.text});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (json.layerID) {\r\n\t\t\t\t\t\t\tthis.regetLayersIds(json.layerID);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n// console.log('sendFile', json);\r\n\t\t\t\t});\r\n\t\t\t\tthis.set({askMode: false});\r\n\t\t\t},\r\n\t\t\tsendFile(ev) {\r\n\t\t\t\tRequests.sendVectorFile(ev.target, true).then(json => {\r\n\t\t\t\t\tif (json) {\r\n\t\t\t\t\t\tif (json.status === 'error') {\r\n\t\t\t\t\t\t\tsetTimeout(function() { this.set({error: ''}); }.bind(this), 5000);\r\n\t\t\t\t\t\t\tthis.set({error: json.text});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (json.layerID) {\r\n\t\t\t\t\t\t\tthis.regetLayersIds(json.layerID);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n// console.log('sendFile', json);\r\n\t\t\t\t});\r\n\t\t\t\tthis.set({askMode: false});\r\n\t\t\t},\r\n\t\t\taddHand() {\r\n// console.log('addHand');\r\n\t\t\t\tthis.set({askMode: false});\r\n\t\t\t\tthis.createSite1();\r\n\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tregetLayersIds(layerID) {\r\n// console.log('regetLayersIds', layerID);\r\n\t\t\t\tconst {gmxMap} = this.get();\r\n\r\n\t\t\t\tlet ph = Requests.getLayersIds(gmxMap);\r\n\t\t\t\tph.layerID = layerID;\r\n\t\t\t\tthis.set(ph);\r\n\t\t\t\tthis.setNodeField(this.refs.LayerSelect);\r\n/*\r\n\t\t\t\tRequests.getLayersIds(gmxMap).then(json => {\r\n\t\t\t\t\tjson.layerID = layerID;\r\n\t\t\t\t\tthis.set(json);\r\n\t\t\t\t\tthis.setNodeField(this.refs.LayerSelect);\r\n\t\t\t\t});\r\n*/\r\n\t\t\t},\r\n\r\n\t\t\tcreateSnap() {\r\n\t\t\t\tconst {map, quadrantLayerId, quadrantIds, snap, gmxMap, layerID, item, isForestCols, hashCols, quadrantValues} = this.get();\r\n\t\t\t\tlet gmxPopup = L.control.gmxPopup({maxHeight: 0, position: 'document', anchor: L.point(451, 430), closeOnMapClick: false}).openOn(map),\r\n\t\t\t\t\tsite = new Snapping({\r\n\t\t\t\t\t\ttarget: gmxPopup._contentNode,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprnt: this,\r\n\t\t\t\t\t\t\tsnap: snap,\r\n\t\t\t\t\t\t\tlayerID: layerID,\r\n\t\t\t\t\t\t\titem: item,\r\n\t\t\t\t\t\t\tmeta: gmxMap.layersByID[layerID].getGmxProperties().MetaProperties,\r\n\t\t\t\t\t\t\tisForestCols: isForestCols,\r\n\t\t\t\t\t\t\thashCols: hashCols,\r\n\t\t\t\t\t\t\tquadrantLayerId: quadrantLayerId,\r\n\t\t\t\t\t\t\tquadrantIds: quadrantIds,\r\n\t\t\t\t\t\t\tquadrantValues: quadrantValues,\r\n\t\t\t\t\t\t\tgmxPopup: gmxPopup,\r\n\t\t\t\t\t\t\tmap: map\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\tmap.on('removeControl', site.toggleContextmenu.bind(site));\r\n\t\t\t\tsite.on('update', ({ changed, current, previous }) => {\r\n\t\t\t\t\tif (changed.cancel && current.cancel) {\r\n// console.log('юююююю json', changed, current, site);\r\n\t\t\t\t\t\tmap.removeControl(gmxPopup);\r\n\t\t\t\t\t\t// this.set({});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tmap.gmxControlsManager.add(gmxPopup);\r\n\t\t\t\tthis.gmxPopup = gmxPopup;\r\n\t\t\t},\r\n\t\t\tcreateSite1() {\r\n\t\t\t\tconst {map, quadrantIds} = this.get();\r\n\t\t\t\tlet gmxPopup = L.control.gmxPopup({maxHeight: 0, position: 'document', anchor: L.point(451, 430), closeOnMapClick: false}).openOn(map),\r\n\t\t\t\t\tsite = new CreateSite({\r\n\t\t\t\t\t\ttarget: gmxPopup._contentNode,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tprnt: this,\r\n\t\t\t\t\t\t\tquadrantIds: quadrantIds,\r\n\t\t\t\t\t\t\tgmxPopup: gmxPopup,\r\n\t\t\t\t\t\t\tmap: map\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n// console.log('createSite1 json', map);\r\n\t\t\t\tmap.gmxControlsManager.add(gmxPopup);\r\n\t\t\t\tthis.gmxPopup = gmxPopup;\r\n\t\t\t},\r\n\t\t\tdeleteItem(id, ev) {\r\n\t\t\t\tconst { layerID, delAsk, delID } = this.get();\r\n\t\t\t\t\r\n\t\t\t\tif (delAsk && delID === id) {\r\n\t\t\t\t\tRequests.modifyVectorObjects(layerID, [{\"action\":\"delete\",\"id\": delID}]).then((argv) => {\r\n\t\t\t\t\t\tthis.regetFeatures();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.set({delAsk: 0});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set({delAsk: 1, delID: id, delAskStyle: 'top: '+ (ev.clientY - 30) + 'px; left: 120px;'});\r\n\t\t\t\t}\r\nconsole.log('deleteItem', delID);\r\n\t\t\t},\r\n\t\t\teditItem(id, snap, del) {\r\n\t\t\t\tconst { map, layerID, hashCols } = this.get();\r\n\t\t\t\tlet gmxDrawingSnap = null;\r\n\t\t\t\tif (snap) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet json = JSON.parse(snap);\r\n\t\t\t\t\t\tlet coords = json.coordinates.map(it => it.reverse());\r\n\t\t\t\t\t\tgmxDrawingSnap = map.gmxDrawing.add(L.polyline(coords), {pointStyle:{shape: 'circle'}, lineStyle:{color: '#ff0000'}} );\r\n\t\t\t\t\t\tgmxDrawingSnap.on('editstop dragend rotateend', (it) => {\r\n\t\t\t\t\t\t\tlet geoJSON = it.object.toGeoJSON(),\r\n\t\t\t\t\t\t\t\ttr = document.getElementsByClassName('edit-obj')[0].getElementsByTagName('tr'),\r\n\t\t\t\t\t\t\t\tinp = tr[tr.length - 1].getElementsByTagName('input')[0];\r\n\t\t\t\t\t\t\tinp.value = JSON.stringify(geoJSON.geometry);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// map.setView(coords[0]);\r\n\t\t\t\t\t\t// map.fitBounds(gmxDrawingSnap.getBounds());\r\n\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tconsole.log('Без привязки', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$(\r\n\t\t\t\t\tEditorLib.editObject(layerID, id, {\r\n\t\t\t\t\t\tdel: del,\r\n\t\t\t\t\t\thashCols: hashCols,\r\n\t\t\t\t\t\tfields: [\r\n\t\t\t\t\t\t\t{ name: 'FRSTAT', hide: true },\r\n\t\t\t\t\t\t\t{ name: 'snap', hide: true }\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t})\r\n\t\t\t\t).on ('close', e => {\r\n\t\t\t\t\tvar target = e.currentTarget,\r\n\t\t\t\t\t\tgeo = JSON.stringify(target.getGeometry()),\r\n\t\t\t\t\t\tdgeo = JSON.stringify(target.getGeometryObj().toGeoJSON().geometry);\r\n\r\n\t\t\t\t\t// flag = geo === dgeo;\r\n\t\t\t\t\tmap.gmxDrawing.remove(gmxDrawingSnap);\r\n\t\t\t\t\tthis.regetFeatures();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\tsetAskMode() {\r\n\t\t\t\tif (this.gmxPopup && this.gmxPopup._map) {\r\n\t\t\t\t\tthis.gmxPopup._map.removeControl(this.gmxPopup);\r\n\t\t\t\t\tthis.gmxPopup = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.set({askMode: true});\r\n\t\t\t},\r\n\r\n\t\t\teditSite() {\r\n\t\t\t\tconst { gmxMap, layerID, stateSave } = this.get();\r\n// console.log('editSite', layerID);\r\n\t\t\t\tthis.currentLayer = gmxMap.layersByID[layerID];\r\n\t\t\t\t$(\r\n\t\t\t\t\tEditorLib.editLayer(layerID)\r\n\t\t\t\t);\r\n\t\t\t\t\r\n\t\t\t\tthis.regetFeatures();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonstate({ changed, current, previous }) {\r\n // console.log('Sites onstate', changed, current.layerIds);\r\n\t\t\tif (changed.gmxMap) {\r\n\t\t\t\tlet ph = Requests.getLayersIds(current.gmxMap);\r\n\t\t\t\tthis.set(ph);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"sites\">\r\n\t<div class=\"main_row\">\r\n\t\t<div class=\"main_right_tab_title_left\">Группа делянок</div>\r\n\t\t<div class=\"main_right_tab_title_right\"><span class=\"{layerID ? '' : 'disabled'}\" on:click=\"editSite()\">Редактировать</span>&nbsp;&nbsp;&nbsp;&nbsp;<span on:click=\"setAskMode()\">Создать</span></div>\r\n\t</div>\r\n\t<div class=\"main_row\">\r\n\t\t{#if layerIds.length}\r\n\t\t<select on:change=\"setNodeField(this, true)\" name=\"layerID\" class=\"select\" ref:LayerSelect>\r\n\t\t\t<option value=\"\"></option>\r\n\t\t\t\t{#each layerIds as it}\r\n\t\t\t\t\t<option value=\"{it.id}\" selected=\"{layerID === it.id}\" class=\"{it.bad ? 'red' : ''}\">{it.title}</option>\r\n\t\t\t\t{/each}\r\n\t\t</select>\r\n\t\t{/if}\r\n\t</div>\r\n\t<div class=\"separator\"></div>\r\n\t{#if error}\r\n\t<div class=\"error\">{error || ''}</div>\r\n\t{/if}\r\n\t{#if askMode}\r\n\t<div class=\"main_pop_cont_1\">\r\n\t\t<div class=\"closeButton\" on:click=\"set({askMode: false})\">×</div>\r\n\t\t<div class=\"main_pop_cont_1_top\">\r\n\t\t\t<label for=\"profileImage\">Из файла Excel</label> \r\n\t\t\t<input type=\"file\" id=\"profileImage\" on:change=\"sendExcel(event)\" style=\"display: none;\">\r\n\t\t</div>\r\n\t\t<div class=\"main_pop_cont_1_top\">\r\n\t\t\t<label for=\"profileVector\">Из векторного файла</label> \r\n\t\t\t<input type=\"file\" id=\"profileVector\" on:change=\"sendFile(event)\" style=\"display: none;\">\r\n\t\t</div>\r\n\t\t<div class=\"main_pop_cont_1_bottom\" on:click=\"addHand()\">Вводом углов и дистанций</div>\r\n\t</div>\r\n\t{/if}\r\n\r\n\t{#if layerID}\r\n\t<div class=\"main_row\">\r\n\t\t<div class=\"add_del\" on:click=\"createSnap()\">Добавить делянку</div>\r\n\t</div>\r\n\t{#if layerItems}\r\n\t<div class=\"main_row\">\r\n\t\t<Table prnt=\"{prnt}\" layerID=\"{layerID}\" items=\"{layerItems}\" hashCols=\"{hashCols}\" editFlag=true bind:item bind:checked />\r\n\t</div>\r\n\t{#if delAsk}\r\n\t\t<div class=\"main_pop_cont_del\" style=\"{delAskStyle}\" ref:delAsk>\r\n\t\t\t<div class=\"main_pop_cont_del_row1\">Вы уверены?</div>\r\n\t\t\t<div class=\"main_pop_cont_del_row2\">\r\n\t\t\t\t<div class=\"but_del\" on:click=\"deleteItem(delID)\">Да, удалить</div>\r\n\t\t\t\t<div class=\"but_cancel\" on:click=\"set({delAsk: 0})\">Отмена</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t{/if}\r\n\r\n\t{/if}\r\n\t{/if}\r\n\r\n</div>\r\n\r\n<style>\r\n.main_pop_cont_del {\r\n    position: absolute;\r\n\tdisplay: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 218px;\r\n    height: 85px;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 15px;\r\n}\r\n.main_pop_cont_del_row1 {\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #10161A;\r\n}\r\n.main_pop_cont_del_row2 {\r\n    height: 30px;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n.but_del {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #FFF;\r\n    width: 100px;\r\n    height: 30px;\r\n    background: #ED5641;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n}\r\n.but_cancel {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    color: #10161A;\r\n    width: 74px;\r\n    height: 30px;\r\n    background: #FFF;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    font-family: IBM Plex Sans;\r\n    font-style: normal;\r\n    font-weight: 500;\r\n    font-size: 12px;\r\n}\r\n\r\n\r\n\r\n* {\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n.main_right_tab_title_left {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #8A9BA8;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n.main_right_tab_title_right span {\r\n\tcursor: pointer;\r\n\ttext-decoration: none;\r\n    color: #318CFE;\r\n    transition: all 0.23s ease;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\nselect.select {\r\n    background: transparent;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    height: 30px;\r\n    font-family: IBM Plex Sans;\r\n    color: #636c72;\r\n}\r\n\r\noption {\r\n    font-family: IBM Plex Sans;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n.sites {\r\n    padding: 15px 24px 30px 12px;\r\n}\r\n.error {\r\n    padding: 10px;\r\n}\r\n\r\n.main_row {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    min-height: 30px;\r\n}\r\n.main_row select {\r\n    width: 100%;\r\n    min-height: 30px;\r\n}\r\n\r\n:global(.gmxControlPopup.leaflet-control .content-wrapper) {\r\n\tmargin: 10px 0 0 0;\r\n}\r\n\r\n:global(.gmxControlPopup.leaflet-control) {\r\n    top: -184px;\r\n    border-radius: 3px;\r\n\tmargin: 0;\r\n}\r\n.disabled {\r\n\tdisplay: none;\r\n}\r\n.separator {\r\n    border-bottom: 1px solid #D8E1E8;\r\n    margin-top: 23px;\r\n    margin-left: -12px;\r\n    margin-right: -25px;\r\n    margin-bottom: 13px;\r\n}\r\n\r\n.main_pop_cont_1 {\r\n    display: block;\r\n    background: #FFFFFF;\r\n    border: 1px solid #D8E1E8;\r\n    box-sizing: border-box;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 4px;\r\n    width: 221px;\r\n    height: 142px;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: left;\r\n    padding: 13px 10px;\r\n    position: absolute;\r\n    right: 26px;\r\n}\r\n.main_pop_cont_1 div {\r\n\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    line-height: normal;\r\n    color: #394B59;\r\n    height: 37px;\r\n\tcursor: pointer;\r\n}\r\nlabel {\r\n    cursor: pointer;\r\n}\r\n.main_pop_cont_1_top input {\r\n\ttop: -20px;\r\n    position: relative;\r\n}\r\n\t\r\n.main_pop_cont_1 div:hover {\r\n\tcolor: #318CFE;\r\n}\r\n\r\n.main_pop_cont_1 .closeButton {\r\n    position: absolute;\r\n    font: 16px/14px Tahoma, Verdana, sans-serif;\r\n    font-weight: bold;\r\n    color: #c3c3c3;\r\n    top: 4px;\r\n    right: 4px;\r\n    cursor: pointer;\r\n}\r\n.main_pop_cont_1 div {\r\n    color: #394B59;\r\n/*    transition: all 0.23s ease;*/\r\n}\r\n.main_pop_cont_1 div:before {\r\n    width: 22.5px;\r\n    margin-right: 7px;\r\n    position: relative;\r\n    top: 5px;\r\n}\r\n\r\n.main_pop_cont_1_bottom:before {\r\n    content: url(./img/angle_ic.svg);\r\n}\r\n.main_pop_cont_1_bottom:hover:before {\r\n    content: url(./img/angle_ic_act.svg);\r\n}\r\n.main_pop_cont_1_middle:before {\r\n    content: url(./img/vector_ic.svg);\r\n}\r\n.main_pop_cont_1_middle:hover:before {\r\n    content: url(./img/vector_ic_act.svg);\r\n}\r\n.main_pop_cont_1_top:before {\r\n    content: url(./img/excel_ic.svg);\r\n}\r\n.main_pop_cont_1_top:hover:before {\r\n\tcontent: url(./img/excel_ic_act.svg);\r\n}\r\n\r\n.add_del {\r\n\tcursor: pointer;\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: normal;\r\n    color: #318CFE;\r\n    display: block;\r\n    cursor: pointer;\r\n}\r\n.add_del:before {\r\n    content: url(./img/add_ic.svg);\r\n    margin-right: 7px;\r\n    position: relative;\r\n    top: 3px;\r\n    transition: all 0.23s ease;\r\n}\r\n\r\nfieldset {\r\n    padding: 10px;\r\n    margin: 10px;\r\n}\r\n.red {\r\n\tcolor: red;\r\n}\r\n</style>\r\n","\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tkey: '',\r\n\t\t\tprnt: null,\r\n\t\t\tcols: []\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tvalue: ({ key, changedParams }) => {\r\n\t\t\tlet it = changedParams ? changedParams[key] : {};\r\n\t\t\treturn it && it.value || '';\r\n\t\t},\r\n\t\tcolName: ({ key, changedParams }) => {\r\n\t\t\tlet it = changedParams ? changedParams[key] : {};\r\n\t\t\treturn it && it.field || '';\r\n\t\t},\r\n\t\tisClicked: ({ key, changedParams }) => {\r\n\t\t\tlet it = changedParams ? changedParams[key] : {};\r\n\t\t\treturn it && it.field || false;\r\n\t\t},\r\n\t\tselect: ({ key, params }) => { let it = params[key]; return it.select; },\r\n\t\tlist: ({ key, params }) => { let it = params[key]; return it.list; },\r\n\t\ttitle: ({ key, params }) => { let it = params[key]; return it.title || it.value; }\r\n\t},\r\n\tmethods: {\r\n\t\tsetSelection(val) {\r\n\t\t\tconst { key, changedParams, prnt } = this.get();\r\n // console.log(`___ setSelection ______`, key, prnt, this.props.prnt);\r\n\t\t\tchangedParams[key] = {value: '', field: val};\r\n\t\t\t// resetButton1();\r\n\t\t\tthis.set({changedParams: changedParams, recheckFlag: 1});\r\n\t\t},\r\n\t\tsetValue(val, fieldFlag) {\r\n\t\t\tconst { key, changedParams, meta, params, prnt } = this.get();\r\n // console.log(`___ setValue ______`, key, prnt);\r\n\t\t\t// let it = params[key],\r\n\t\t\t\t// meta[params[key].title]\r\n \r\n\t\t\tchangedParams[key] = {value: !fieldFlag ? val : '', field: fieldFlag ? val : ''};\r\n\t\t\tthis.set({changedParams: changedParams, recheckFlag: 1});\r\n\t\t\t// resetButton1();\r\n\t\t}\r\n\t},\r\n\tonstate({ changed, current, previous }) {\r\n// console.log('select onstate', changed, current);\r\n\t\tif (changed.meta) {\r\n\t\t// if (changed.meta && !current.changedParams[current.key] && current.meta[current.key]) {\r\n\t\t\tlet key = current.key,\r\n\t\t\t\tval = current.params[key].fieldName;\r\n\t\t\tif (val) {\r\n\t\t\t\tthis.setSelection(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (changed.changedParams) {\r\n// console.log('changedParams', this.refs.submitButton)\r\n\t\t\t//\tif (this.refs.submitButton && this.refs.submitButton.textContent !== 'Создать отчеты') {\r\n\t\t}\r\n\r\n\t}\r\n};\r\n</script>\r\n\r\n<div class=\"gmx-sidebar-labeled-block\">\r\n\t<div class=\"gmx-sidebar-label\">{title}</div>\r\n\t<div>\r\n\t\t<div>\r\n\t\t\t{#if isClicked}\r\n\t\t\t\t<select on:change=\"setSelection(event.target.options[event.target.selectedIndex].value)\" ref:sel class=\"gmx-sidebar-select-with-addon\">\r\n\t\t\t\t\t{#each cols as it}\r\n\t\t\t\t\t\t<option value=\"{it}\" selected=\"{colName === it}\">{it}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\t\t\t\t<button on:click=\"setValue('')\" class=\"gmx-addon-button\" title=\"выбрать из таблицы атрибутов\"></button>\r\n\t\t\t{:elseif select}\r\n\t\t\t\t<select on:change=\"setValue(event.target.options[event.target.selectedIndex].value)\" ref:sel1 class=\"gmx-sidebar-select-with-addon\">\r\n\t\t\t\t\t{#each select as it}\r\n\t\t\t\t\t\t<option value=\"{it}\" selected=\"{value === it}\">{it}</option>\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t</select>\r\n\t\t\t\t<button on:click=\"setValue(cols[0], true)\" class=\"gmx-addon-button\" title=\"выбрать из таблицы атрибутов\"></button>\r\n\t\t\t{:else}\r\n\t\t\t\t<input on:change=\"setValue(event.target.value)\" type=\"text\" ref:inp class=\"gmx-sidebar-input-with-addon\" value=\"{value}\" list=\"{list ? title : ''}\">\r\n\t\t\t\t{#if list}\r\n\t\t\t\t\t<datalist id=\"{title}\">\r\n\t\t\t\t\t{#each list as it}\r\n\t\t\t\t\t\t<option value=\"{it}\" />\r\n\t\t\t\t\t{/each}\r\n\t\t\t\t\t</datalist>\r\n\t\t\t\t{/if}\r\n\t\t\t\t<button on:click=\"setValue(cols[0], true)\" class=\"gmx-addon-button\" title=\"выбрать из таблицы атрибутов\"></button>\r\n\t\t\t{/if}\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<style>\r\n\r\n.gmx-sidebar-labeled-block {margin-top:4px;padding:0 10px;width:auto;display:grid;text-align:left}\r\n.gmx-sidebar-label {font-size:13px;line-height:31px;font-family:\"Arial\";padding-left:0px;color:#777f85}\r\n.gmx-sidebar-select ,.gmx-sidebar-select-with-addon {box-sizing:border-box;width:100px;height:33px;padding:0 8px;border-radius:3px;background-color:#f7fbff;border:1px solid #d7e1e7}\r\n.gmx-sidebar-select-with-addon {display:table-cell;float:left;width:85%;border-top-right-radius:0;border-bottom-right-radius:0;font-family:Arial;color:#5b7284;font-size:13px;font-weight:400}\r\n.gmx-sidebar-input ,.gmx-sidebar-input-with-addon {box-sizing:border-box;width:100px;height:33px;padding:0 8px;border-radius:3px;background:#FFF;border:1px solid rgba(27, 68, 97, 0.3);font-family:Arial;color:#5b7284;font-size:13px;font-weight:400}\r\n.gmx-sidebar-input-with-addon {display:table-cell;float:left;width:85%;border-top-right-radius:0;border-bottom-right-radius:0}\r\n.gmx-addon-button {padding:0 6px;box-sizing:border-box;width:15%;height:33px;display:table-cell;vertical-align:middle;background-color:#d7e1e7;border:none;border-radius:0 3px 3px 0;cursor:pointer;background:url(./list.png) no-repeat right #d8e1e8;background-position-x:50%;border-right:1px solid rgba(27, 68, 97, 0.3);border-top:1px solid rgba(27, 68, 97, 0.3);border-bottom:1px solid rgba(27, 68, 97, 0.3)}\r\n.gmx-addon-button :focus{outline:none}\r\n\r\n</style>\r\n","<script>\r\n\timport * as Requests from './Requests.js';\r\n\r\n\tconst stateStorage = Requests.getState();\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\trecheckFlag: 0,\r\n\t\t\t\tstateSave: 1,\r\n\t\t\t\treverse: false,\r\n\t\t\t\terror: '',\r\n\t\t\t\tchangedParams: {},\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tlayerID: {value: '', title: 'Выбор слоя'},\r\n\t\t\t\t\tquadrantLayerId: {value: '', title: 'Слой квартальной сети'},\r\n\t\t\t\t\treportType: {value: 'об использовании лесов', options: ['об использовании лесов', 'о воспроизводстве лесов'], title: 'Тип отчета'},\r\n\t\t\t\t\torganizationName: {value: '', title: 'Наименование организации'},\r\n\t\t\t\t\tinn: {value: '', title: 'ИНН'},\r\n\t\t\t\t\tregion: {value: '', title: 'Субъект Российской Федерации'},\r\n\t\t\t\t\tforestry: {value: '', title: 'Лесничество'},\r\n\t\t\t\t\t//forestry: {value: '', title: 'Лесничество', fieldName: 'Лесничество'},\r\n\t\t\t\t\tsectionForestry: {value: '', title: 'Участковое лесничество'},\r\n\t\t\t\t\tquadrant: {value: '', title: 'Квартал'},\r\n\t\t\t\t\tdacha: {value: '', title: 'Дача/Урочище'},\r\n\t\t\t\t\tstratum: {value: '', title: 'Выдел'},\r\n\t\t\t\t\tfellingForm: {value: 'сплошная', title: 'Форма рубки', select: ['сплошная', 'выборочная']},\r\n\t\t\t\t\tfellingType: {value: '', title: 'Тип рубки'},\r\n\t\t\t\t\trecoveryEventType: {value: '', title: 'Тип лесовосстановительного мероприятия'},\r\n\t\t\t\t\tsiteArea: {value: '', title: 'Площадь'},\r\n\t\t\t\t\tscale: {value: 10000, title: 'Масштаб'},\r\n\t\t\t\t\tsite: {value: '', title: 'Делянка'}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tscales: [\r\n\t\t\t\t\t{value: 5000, title: '1:5000'},\r\n\t\t\t\t\t{value: 10000, title: '1:10000'},\r\n\t\t\t\t\t{value: 15000, title: '1:15000'},\r\n\t\t\t\t\t{value: 20000, title: '1:20000'},\r\n\t\t\t\t\t{value: 25000, title: '1:25000'},\r\n\t\t\t\t\t{value: 30000, title: '1:30000'},\r\n\t\t\t\t\t{value: 35000, title: '1:35000'},\r\n\t\t\t\t\t{value: 40000, title: '1:40000'},\r\n\t\t\t\t\t{value: 45000, title: '1:45000'},\r\n\t\t\t\t\t{value: 50000, title: '1:50000'},\r\n\t\t\t\t\t{value: '', title: 'Авто'}\r\n\t\t\t\t],\r\n \r\n\t\t\t\tshowGrid: 1,\r\n\t\t\t\tpdf: 0,\r\n\t\t\t\tnumPoints: 0,\r\n\t\t\t\tdrawSnap: 0,\r\n\t\t\t\tlayerItems: [],\r\n\t\t\t\tformat: 2,\r\n\t\t\t\ttempl: '',\r\n\t\t\t\tnum_points: true,\r\n\t\t\t\tlimit: 0,\r\n\t\t\t\treport: false,\r\n\t\t\t\tdrawstart: false,\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\tquadrantLayerId: '',\r\n\t\t\t\treportType: '',\r\n\t\t\t\tchecked: {},\r\n\t\t\t\tlayerIds: [], quadrantIds: [],\r\n\t\t\t\tmeta: {},\r\n\t\t\t\thashCols: {},\r\n\t\t\t\tcols: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tTable: './Table.html',\r\n\t\t\tSelectInput: './SelectInput.html'\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tmetaTypeReport: ({ meta }) => meta && meta['Тип отчета'] ? meta['Тип отчета'].Value : '',\r\n\t\t\tisTypeRecovery: ({ meta }) => meta && meta['Тип отчета'] &&  meta['Тип отчета'].Value === 'о воспроизводстве лесов'\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tviewItem(id) {\r\n\t\t\t\tconst { map, layerItems, hashCols} = this.get();\r\n\r\n\t\t\t\tfor (let i = 0, len = layerItems.length; i < len; i++) {\r\n\t\t\t\t\tlet it = layerItems[i];\r\n\t\t\t\t\tif (id === it[hashCols.gmx_id]) {\r\n\t\t\t\t\t\tlet geo = it[hashCols.geomixergeojson],\r\n\t\t\t\t\t\t\tbbox = L.gmxUtil.getGeometryBounds(geo),\r\n\t\t\t\t\t\t\tlatlngBbox = L.latLngBounds([[bbox.min.y, bbox.min.x], [bbox.max.y, bbox.max.x]]);\r\n\t\t\t\t\t\tmap.fitBounds(latlngBbox);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendReport(pt) {\r\n\t\t\t\tconst {numPoints, drawSnap, showGrid, pdf, checked, layerItems, hashCols, params, format, layerID, gmxMap, changedParams, num_points, templ} = this.get();\r\n\r\n\t\t\t\tlet flag = pt.textContent === 'Создать отчеты';\r\n\r\n\t\t\t\tlet promise = Requests.sendReport(flag, numPoints, drawSnap, showGrid, pdf, checked, layerItems, hashCols, params, format, layerID, gmxMap, changedParams, num_points, templ, this);\r\n\t\t\t\tif (promise) {\r\n\t\t\t\t\tthis.set({report: true, error: ''});\r\n\t\t\t\t\tpromise.then(json => {\r\n\t\t\t\t\t\tif (json) { this.set(json); }\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => console.warn(err));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.set({error: 'Не все обязательные параметры заполнены!'});\r\n\t\t\t\t\t//pt.textContent = 'Продолжить';\r\n\t\t\t\t\tthis.resetButton1(true);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartDrawing(ev) {\r\n\t\t\t\tconst { map, drawstart, layerID, checked } = this.get();\r\n\t\t\t\tthis.set({drawstart: !drawstart});\r\n\t\t\t\tif(!drawstart) {\r\n\t\t\t\t\tmap.gmxDrawing.clear();\r\n\t\t\t\t\tmap.gmxDrawing.create('Polygon');\r\n\t\t\t\t\tmap.gmxDrawing.on('drawstop', (e) => {\r\n\t\t\t\t\t\tthis.set({drawstart: false});\r\n\t\t\t\t\t\tRequests.selectFeaturesWithDrawing(layerID, e.object.toGeoJSON().geometry)\r\n\t\t\t\t\t\t\t.then(json => {\r\n\t\t\t\t\t\t\t\tthis.set({checked: L.extend(json, checked)});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t\tmap._gmxEventsManager._drawstart = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tgetKeyState(key) {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\treturn changedParams[key];\r\n\t\t\t},\r\n\t\t\tsetField(key, data) {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tchangedParams[key] = data;\r\n\t\t\t\tthis.set({changedParams: changedParams});\r\n\t\t\t},\r\n\t\t\tsetNodeField(node, setFlag) {\r\n\t\t\t\tconst { map } = this.get();\r\n\t\t\t\tlet val = node.options ? node.options[node.selectedIndex].value : node.value,\r\n\t\t\t\t\tname = node.name;\r\n\t\t\t\tthis.setField(name, val);\r\n\t\t\t\tif (setFlag) {\r\n\t\t\t\t\tlet attr = {checked: {}, reverse: false};\r\n\t\t\t\t\tattr[name] = val;\r\n\t\t\t\t\tif (name === 'layerID') {\r\n\t\t\t\t\t\tthis.clearChangedNodes();\r\n\t\t\t\t\t\tRequests.chkLayer(val);\r\n\t\t\t\t\t\t// let layer = nsGmx.gmxMap.layersByID[val],\r\n\t\t\t\t\t\t\t// latLngBounds = L.gmxUtil.getGeometryBounds(layer._gmx.geometry).toLatLngBounds(true);\r\n\t\t\t\t\t\t// map.fitBounds(latLngBounds);\r\n\t\t\t\t\t\t// if (!layer._map) {\r\n\t\t\t\t\t\t\t// map.addLayer(layer);\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcolsToHash(arr) {\r\n\t\t\t\treturn arr.reduce((a, v, i) => { a[v] = i; return a; }, {});\r\n\t\t\t},\r\n\r\n\t\t\tstyleHook(it) {\r\n\t\t\t\tconst { checked } = this.get();\r\n\t\t\t\treturn checked && checked[it.id] ? { strokeStyle: '#00ffff' } : {};\r\n\t\t\t},\r\n\t\t\tloadState() {\r\n\t\t\t\tconst {hashCols} = this.get();\r\n\t\t\t\tlet changedParams = {};\r\n\t\t\t\tfor(let key in stateStorage) {\r\n\t\t\t\t\tlet it = stateStorage[key],\r\n\t\t\t\t\t\tpk = it.field;\r\n\r\n\t\t\t\t\tif (pk && !hashCols[pk]) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tchangedParams[key] = it;\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({changedParams: changedParams});\r\n\t\t\t\tthis.checkState();\r\n\t\t\t},\r\n\t\t\tclearChangedNodes() {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tfor(let key in changedParams) {\r\n\t\t\t\t\tlet node = this.refs[key];\r\n\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\t\tnode.value = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.set({reportType: '', changedParams:{}});\r\n\t\t\t},\r\n\t\t\tcheckState() {\r\n\t\t\t\tconst {changedParams} = this.get();\r\n\t\t\t\tlet target = this.options.target;\r\n\t\t\t\tfor(let key in changedParams) {\r\n\t\t\t\t\tlet it = changedParams[key],\r\n\t\t\t\t\t\tnode = this.refs[key];\r\n\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\tif (typeof(it) !== 'object') {\r\n\t\t\t\t\t\t\tnode.value = it;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (key === 'reportType') {\r\n\t\t\t\t\t\tthis.set({reportType: it});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloadFeatures() {\r\n\t\t\t\tconst { gmxMap, layerID, stateSave } = this.get();\r\n\t\t\t\tthis.currentLayer = gmxMap.layersByID[layerID];\r\n\t\t\t\tlet meta = null;\r\n\r\n\t\t\t\tif (this.currentLayer) {\r\n\t\t\t\t\tthis.currentLayer.setStyleHook(this.styleHook.bind(this));\r\n\t\t\t\t\tmeta = this.currentLayer.getGmxProperties().MetaProperties;\r\n\t\t\t\t}\r\n\t\t\t\tRequests.loadFeatures(layerID)\r\n\t\t\t\t.then(json => {\r\n\t\t\t\t\tif (json.Status === 'ok') {\r\n\t\t\t\t\t\tlet cols = json.Result.fields,\r\n\t\t\t\t\t\t\tattr = {cols: cols, hashCols: this.colsToHash(cols), meta: meta, layerItems: json.Result.values};\r\n\t\t\t\t\t\tif (Object.keys(stateStorage).length) {\r\n\t\t\t\t\t\t\tattr.stateSave = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (meta && meta['Тип отчета']) {\r\n\t\t\t\t\t\t\tattr.reportType = meta['Тип отчета'].Value;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.refs.scale.selectedIndex = 1;\r\n\t\t\t\t\t\tif (attr.stateSave) {\r\n\t\t\t\t\t\t\tthis.refs.loadState.classList.remove('disabled');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tresetButton1(flag) {\r\n\t\t\t\tif (this.refs.submitButton) {\r\n\t\t\t\t\tthis.refs.submitButton.textContent = flag ? 'Продолжить' : 'Создать отчеты';\r\n\t\t\t\t\tlet attr = {recheckFlag: 0};\r\n\t\t\t\t\tif (!flag) { attr.error = 0; }\r\n\t\t\t\t\tthis.set(attr);\r\n\t\t\t\t\t//this.needRefreshButton = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// onupdate({ changed, current, previous }) {\r\n\t\t// },\r\n\r\n\t\tonstate({ changed, current, previous }) {\r\n// console.log('Report onstate', changed, current);\r\n\t\t\tif (changed.gmxMap) {\r\n\t\t\t\tlet ph = Requests.getLayersIds(current.gmxMap);\r\n\t\t\t\tRequests.getReportsCount().then(json => {\r\n\t\t\t\t\tif (json && json.registered) {\r\n\t\t\t\t\t\tlet count = json.limit - json.used;\r\n\t\t\t\t\t\tph.limit = count > 0 ? count : 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.set(ph);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// this.set(Requests.getLayersIds(current.gmxMap));\r\n\t\t\t}\r\n\t\t\tif (changed.layerID && current.layerID) {\r\n\t\t\t\tthis.loadFeatures();\r\n\t\t\t}\r\n\t\t\tif (changed.checked && this.currentLayer) {\r\n\t\t\t\tthis.currentLayer.repaint();\r\n\t\t\t}\r\n\t\t\tif (changed.recheckFlag && current.recheckFlag) {\r\n\t\t\t\tthis.resetButton1();\r\nconsole.log('recheckFlag', current.recheckFlag)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// if (changed.changedParams) {\r\n// console.log('ggggg', changed)\r\n\t\t\t\t// if (this.refs.submitButton && this.refs.submitButton.textContent !== 'Создать отчеты') {\r\n\t\t\t\t\t// this.refs.submitButton.textContent === 'Создать отчеты';\r\n\t\t\t\t// }\r\n\t\t\t// }\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<div class=\"forest-plugin-container\">\r\n\t<div class=\"forest-plugin-header\">Лимит отчетов: {limit}</div>\r\n\t<div class=\"gmx-select-layer-container\">\r\n\t\t<span class=\"gmx-select-layer-container__label\">Выбор слоя</span>\r\n\t\t<select on:change=\"setNodeField(this, true)\" name=\"layerID\" class=\"gmx-sidebar-select-medium\">\r\n\t\t\t<option value=\"\"></option>\r\n\t\t\t{#if layerIds}\r\n\t\t\t\t{#each layerIds as it}\r\n\t\t\t\t\t<option value=\"{it.id}\" selected=\"{layerID === it.id}\">{it.title}</option>\r\n\t\t\t\t{/each}\r\n\t\t\t{/if}\r\n\t\t</select>\r\n\t</div>\r\n{#if layerID}\r\n\t<div class=\"leftContent forest-plugin-content\">\r\n\t\t\t<div class=\"gmx-sidebar-label-medium\">Ввод информации\r\n\t\t\t\t{#if stateSave}\r\n\t\t\t\t<i on:click=\"loadState()\" ref:loadState class=\"material-icons loadState disabled\" title=\"Загрузить выбор полей предыдущего отчета\"></i>\r\n\t\t\t\t{/if}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div on:mousedown=\"set({recheckFlag: 1})\">\r\n\t\t\t\t\t<div class=\"gmx-sidebar-labeled-block\">\r\n\t\t\t\t\t\t<div class=\"gmx-sidebar-label\">{params.reportType.title}</div>\r\n\t\t\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"reportType\" ref:reportType class=\"reportType gmx-sidebar-select-large\">\r\n{#if metaTypeReport}\r\n\t\t\t\t\t\t\t\t<option value=\"{metaTypeReport}\">{metaTypeReport}</option>\r\n{:else}\r\n{#each params.reportType.options as it}\r\n\t\t\t\t\t\t\t\t<option value=\"{it}\">{it}</option>\r\n{/each}\r\n{/if}\r\n\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n{#if reportType !== 'о воспроизводстве лесов'}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<SelectInput key=\"fellingForm\" bind:recheckFlag bind:params bind:cols bind:changedParams />\r\n\t\t\t\t\t\t<SelectInput key=\"fellingType\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t</div>\r\n{/if}\r\n\t\t\t\t\t<SelectInput key=\"organizationName\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"inn\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"region\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"forestry\" meta={meta} bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"sectionForestry\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"dacha\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"quadrant\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"stratum\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\t\t\t\t\t<SelectInput key=\"site\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n{#if reportType === 'о воспроизводстве лесов'}\r\n\t\t\t\t\t<SelectInput key=\"recoveryEventType\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n{/if}\r\n\t\t\t\t\t<SelectInput key=\"siteArea\" bind:recheckFlag bind:params  bind:cols bind:changedParams />\r\n\r\n\t\t\t\t\t<div class=\"gmx-sidebar-labeled-block\">\r\n\t\t\t\t\t\t<div class=\"gmx-sidebar-label\">{params.scale.title || params.scale.value}</div>\r\n\t\t\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"scale\" ref:scale class=\"scale gmx-sidebar-select-large\">\r\n{#each scales as it}\r\n\t\t\t\t\t\t\t\t<option value=\"{it.value}\" selected=\"{it.value == params.scale.value}\">{it.title}</option>\r\n{/each}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"gmx-sidebar-labeled-block\">\r\n\t\t\t\t\t\t<div class=\"gmx-sidebar-label\">{params.quadrantLayerId.title || params.quadrantLayerId.value}</div>\r\n\t\t\t\t\t\t<select on:change=\"setNodeField(this, true)\" name=\"quadrantLayerId\" ref:quadrantLayerId class=\"quadrantLayerId gmx-sidebar-select-large\">\r\n\t\t\t\t\t\t\t<option value=\"\"></option>\r\n{#if quadrantIds}\r\n\t{#each quadrantIds as it}\r\n\t\t\t\t\t\t\t\t\t<option value=\"{it.id}\"> {it.title}</option>\r\n\t{/each}\r\n{/if}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"labeled-block\">\r\n\t\t\t\t<span class=\"left\">\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"custom-control-input\" name=\"pdf\" on:change=\"set({pdf: this.checked ? 1 : 0})\" />\r\n\t\t\t\t\t<label class=\"custom-control-label\" for=\"pdf\"> +PDF</label>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"center\">\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"custom-control-input\" name=\"numPoints\" on:change=\"set({numPoints: this.checked ? 1 : 0})\" />\r\n\t\t\t\t\t<label class=\"custom-control-label\" for=\"numPoints\">+координаты точек</label>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"right\">\r\n\t\t\t\t\t<input type=\"checkbox\" class=\"custom-control-input\" name=\"drawSnap\" on:change=\"set({drawSnap: this.checked ? 1 : 0})\" />\r\n\t\t\t\t\t<label class=\"custom-control-label\" for=\"drawSnap\"> +привязочный ход</label>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"gmx-sidebar-label-medium\">Список объектов</div>\r\n\t\t\t<div class=\"forest-features-block\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div class=\"gmx-geometry-select-container\"><button on:click=\"startDrawing(event)\" class=\"gmx-sidebar-button\">{drawstart ? 'Полигон рисуется' :'Выделите участки полигоном'}</button></div>\r\n\t\t\t\t\t<div class=\"gmx-sidebar-label-medium\">Выделено: {Object.keys(checked).length} / {layerItems.length}</div>\r\n\t\t\t\t\t<Table items=\"{layerItems}\" hashCols=\"{hashCols}\" reverse={reverse} bind:checked />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{#if error}\r\n\t\t\t<div class=\"errorParent\">\r\n\t\t\t\t<div class=\"error\">{error || ''}</div>\r\n\t\t\t</div>\r\n\t\t\t{/if}\r\n\t\t\t<div class=\"gmx-button-container\">\r\n{#if report}\r\n\t\t\t\t<button class=\"gmx-sidebar-button-disabled\"><div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div></button>\r\n{:else}\r\n\t\t\t\t<button on:click=\"sendReport(this)\" class=\"gmx-sidebar-button{Object.keys(checked).length ? '' : '-disabled'}\" ref:submitButton>Создать отчеты</button>\r\n{/if}\r\n\t\t\t</div>\r\n\r\n\t</div>\r\n{/if}\r\n</div>\r\n\r\n<style>\r\n\r\n.errorParent, .error {\r\n    padding: 10px;\r\n}\r\n\r\n.labeled-block {\r\n    text-align: center;\r\n    margin-top: 15px;\r\n}\r\n.labeled-block span {\r\n\tmargin: 6px;\r\n}\r\n.loadState {\r\n    transform: rotate(90deg);\r\n    right: 14px;\r\n    position: absolute;\r\n\tcursor: pointer;\r\n}\r\n.loadState:after {\r\n\tcontent: 'storage';\r\n}\r\n.disabled {\r\n\tpointer-events: none;\r\n\tcolor:#efefef;\r\n\tcursor:default\r\n}\r\n\r\n.clearState {\r\n    right: 24px;\r\n    position: absolute;\r\n\tcursor: pointer;\r\n}\r\n.clearState:after {\r\n\tcontent: 'delete';\r\n}\r\n.material-icons {\r\n\tfont-family: 'Material Icons';\r\n    font-weight: normal;\r\n    font-style: normal;\r\n    font-size: 16px;\r\n    letter-spacing: normal;\r\n    text-transform: none;\r\n    display: inline-block;\r\n    white-space: nowrap;\r\n    word-wrap: normal;\r\n    direction: ltr;\r\n    -webkit-font-smoothing: antialiased;\r\n}\r\n\r\n.line-block {\r\n    margin-top: 20px;\r\n    padding: 0px 12px;\r\n    font-size: 13px;\r\n    line-height: 31px;\r\n    font-family: \"Arial\";\r\n    color: #777f85;\r\n}\r\n.line-block input {\r\n\tposition: relative;\r\n    top: 2px;\r\n}\r\n\r\n.gmx-button-container {width:100%;height:40px;margin:10px 0}\r\n.gmx-button-container  button {display:block;margin:0 auto}\r\n\r\n.gmx-sidebar-select-medium ,\r\n.gmx-sidebar-select-large {\r\n\tbox-sizing:border-box;\r\n\twidth:100px;\r\n\theight:33px;\r\n\tpadding:0 8px;\r\n\tborder-radius:3px;\r\n\tbackground-color:#f7fbff;\r\n\tborder:1px solid #d7e1e7;\r\n\tfont-family:Arial;\r\n\tfont-size:13px;\r\n\tfont-weight:400;\r\n\tcolor:#5b7284;\r\n}\r\n\r\n.gmx-sidebar-select-medium {\r\n\twidth:200px;\r\n\theight:30px;\r\n\tfloat:right;\r\n\tmargin-right:10px;\r\n\tmargin-top:5px;\r\n\r\n\ttext-align:left;\r\n\tpadding-right:40px;\r\n\toverflow:hidden;\r\n\ttext-overflow:ellipsis\r\n}\r\n.gmx-sidebar-select-large {\r\n\twidth:100%;\r\n}\r\n\r\n.gmx-select-layer-container {width:100%;height:40px;background-color:#ebf1f5;border-bottom:1px solid #bbb}\r\n.gmx-select-layer-container__label {width:30%;height:22px;padding:0 10px;font-size:16px;font-weight:400;line-height:31px;color:#5b7284;font-family:Arial;color:#5b7284;font-size:15px;font-weight:600;line-height:38px;text-align:left}\r\n\r\n.forest-plugin-container {font-family:\"Roboto\";border-collapse:collapse;padding-bottom:17px}\r\n.forest-plugin-header {height:40px;line-height:40px;padding-left:10px;background-color:#ebf1f5;font-size:18px;font-weight:bold;color:#5b7284;font-family:Arial;color:#181f25;font-size:15px;font-weight:600;text-align:left;border-bottom:1px solid #bbb}\r\n.gmx-sidebar-labeled-block {margin-top:4px;padding:0 10px;width:auto;display:grid;text-align:left}\r\n.forest-features-block {padding:0 10px}\r\n.forest-plugin-content {width:100%;height:90%;background-color:#f5f8fa;overflow:hidden}\r\n\r\n.forest-plugin-container  select {\r\n\tborder:1px solid rgba(27, 68, 97, 0.3);\r\n\toutline:0px;-moz-appearance:none;\r\n\t-webkit-appearance:none;appearance:none;\r\n\tbackground:url(./sort-down.png) no-repeat right #FFF;\r\n\tbackground-position-x:98%\r\n}\r\n.forest-plugin-container  select :-moz-focusring{color:transparent;text-shadow:0 0 0 #000}\r\n.forest-plugin-container  option :not(:checked){color:#49677d}\r\n\r\n.gmx-geometry-select-container {width:100%;height:40px}\r\n.gmx-geometry-select-container  button {display:block;margin:0 auto;width:100%;margin-top:15px;font-family:Arial;color:#5b7284;font-size:14px;font-weight:500;line-height:31.249px;text-align:center;border:1px solid rgba(27, 68, 97, 0.3);background:url(./ext/polygon.png) no-repeat #d8e1e8;background-position:4%;padding-left:30px;transition:all 0.25s ease}\r\n.gmx-geometry-select-container  button :hover{box-shadow:0 2px 3px rgba(0, 0, 0, 0.2)}\r\n.gmx-sidebar-input-large {\r\n\twidth:100%;\r\n\tbackground:#FFF;\r\n\tborder:1px solid rgba(27, 68, 97, 0.3);\r\n\tfont-family:Arial;\r\n\tcolor:#5b7284;\r\n\tfont-size:13px;\r\n\tfont-weight:400;\r\n\tline-height:31.249px;\r\n\ttext-align:left\r\n}\r\n.gmx-sidebar-label ,.gmx-sidebar-label-medium ,.gmx-sidebar-label-small {font-size:13px;line-height:31px;font-family:\"Arial\";padding-left:0px;color:#777f85}\r\n.gmx-sidebar-label-medium {font-size:16px;font-family:Arial;color:#5b7284;font-size:16px;font-weight:600;line-height:31.249px;text-align:left;top:10px;position:relative;padding-bottom:10px;padding-left:10px}\r\n.gmx-sidebar-label-small {font-size:13px}\r\n\r\n.gmx-sidebar-button ,.gmx-sidebar-button-toggled ,.gmx-sidebar-button-error ,.gmx-sidebar-button-disabled {border-radius:3px;padding:0 6px;border:1px solid #d7e1e7;cursor:pointer;background-color:#5baceb;width:94%;height:47px;color:#FFF;font-family:Arial;font-size:17px;font-weight:600}\r\n.gmx-sidebar-button :focus,.gmx-sidebar-button-toggled :focus,.gmx-sidebar-button-error :focus,.gmx-sidebar-button-disabled :focus{outline:none}\r\n.gmx-sidebar-button-toggled {box-shadow:inset 0 1px 4px rgba(27, 31, 35, 0.55)}\r\n.gmx-sidebar-button-error {color:red}\r\n.gmx-sidebar-button-disabled {pointer-events:none;background-color:#efefef;cursor:default}\r\n\r\n\r\n</style>\r\n","<script>\r\n\timport * as Requests from './Requests.js';\r\n\r\n\t//const stateStorage = Requests.getState();\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowGrid: 1,\r\n\t\t\t\tgmxMap: null,\r\n\t\t\t\tquadrantIds: [],\r\n\t\t\t\tlayerIds: [],\r\n\t\t\t\tlayerID: '',\r\n\t\t\t\ttab: 'sites'\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tSites: './Sites.html',\r\n\t\t\tReport: './Report.html'\r\n\t\t},\r\n\t\r\n\t\tmethods: {\r\n\t\t\tviewItem(id, layerItems, hashCols) {\r\n\t\t\t\tconst { map } = this.get();\r\n\r\n\t\t\t\tfor (let i = 0, len = layerItems.length; i < len; i++) {\r\n\t\t\t\t\tlet it = layerItems[i];\r\n\t\t\t\t\tif (id === it[hashCols.gmx_id]) {\r\n\t\t\t\t\t\tlet geo = it[hashCols.geomixergeojson],\r\n\t\t\t\t\t\t\tbbox = L.gmxUtil.getGeometryBounds(geo),\r\n\t\t\t\t\t\t\tlatlngBbox = L.latLngBounds([[bbox.min.y, bbox.min.x], [bbox.max.y, bbox.max.x]]);\r\n\t\t\t\t\t\tmap.fitBounds(latlngBbox);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tclearLayer(ev) {\r\n\t\t\t\tconst { layerID, layerIds, quadrantIds} = this.get();\r\n\t\t\t\tlet ph = {},\r\n\t\t\t\t\tdelID = ev.layer.options.layerID;\r\n\t\t\t\tif (delID === layerID) {\r\n\t\t\t\t\tph.layerID = '';\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0, len = layerIds.length; i < len; i++) {\r\n\t\t\t\t\tif (layerIds[i].id === delID) {\r\n\t\t\t\t\t\tlayerIds.splice(i, 1);\r\n\t\t\t\t\t\tph.layerIds = layerIds;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0, len = quadrantIds.length; i < len; i++) {\r\n\t\t\t\t\tif (quadrantIds[i].id === delID) {\r\n\t\t\t\t\t\tquadrantIds.splice(i, 1);\r\n\t\t\t\t\t\tph.quadrantIds = quadrantIds;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n // console.log('clearLayer', ph, quadrantIds);\r\n\t\t\t\tthis.set(ph);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonstate({ changed, current, previous }) {\r\n\t\t\tif (changed.gmxMap) {\r\n\t\t\t\tif (!this._eventOn && current.gmxMap._events) {\r\n\t\t\t\t\tthis._eventOn = true;\r\n\t\t\t\t\tcurrent.gmxMap.on('layerremove', this.clearLayer.bind(this));\r\n\t\t\t\t}\r\n// console.log('App onstate', changed, current);\r\n\r\n// addPopupHook(key, callback:function(properties, div, node, hooksCount))\r\n\t\t\t\t// Requests.getLayersIds(current.meta, current.gmxMap).then(json => { this.set(json); });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n//\tReport\r\n</script>\r\n\r\n<div class=\"forest-plugin-container\">\r\n\t<ul class=\"nav nav-tabs\">\r\n\t\t<li class=\"nav-item\">\r\n\t\t\t<a class=\"nav-link show {tab === 'sites' ? 'active' : '-'}\" href=\"#tab1\" on:click=\"set({tab: 'sites', layerID: ''})\">Делянки</a>\r\n\t\t</li>\r\n\t\t<li class=\"nav-item\">\r\n\t\t\t<a class=\"nav-link {tab === 'reports' ? 'active' : '-'}\" href=\"#tab2\" data-toggle=\"tab\" on:click=\"set({tab: 'reports', layerID: ''})\">Отчеты</a>\r\n\t\t</li>\r\n\t</ul>\r\n\r\n{#if tab === 'reports'}\r\n\t<Report bind:gmxMap bind:map bind:layerID bind:layerIds bind:quadrantIds bind:showGrid />\r\n{:else}\r\n\t<Sites bind:gmxMap bind:map bind:layerID bind:layerIds bind:quadrantIds />\r\n{/if}\r\n</div>\r\n\r\n<style>\r\n.forest-plugin-container {\r\n    background: #FFFFFF;\r\n    border-right: 1px solid lightgray;\r\n}\r\n.forest-plugin-container a {\r\n\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n\tfont-size: 16px;\r\n\tfont-weight: 500;\r\n}\r\n\r\n.nav {\r\n\tdisplay: -webkit-box;\r\n\tdisplay: -webkit-flex;\r\n\tdisplay: -ms-flexbox;\r\n\tdisplay: flex;\r\n\tpadding-left: 0;\r\n\tmargin-bottom: 0;\r\n\tlist-style: none\r\n}\r\n\r\n.nav-link {\r\n\tdisplay: block;\r\n\tpadding: .5em 1em\r\n}\r\n\r\n.nav-link:focus,\r\n.nav-link:hover {\r\n\ttext-decoration: none\r\n}\r\n\r\n.nav-link.disabled {\r\n\tcolor: #636c72;\r\n\tcursor: not-allowed\r\n}\r\n\r\n.nav-tabs {\r\n\tborder-bottom: 1px solid #ddd\r\n}\r\n\r\n.nav-tabs .nav-item {\r\n\t/*margin-bottom: -1px;*/\r\n\twidth: 50%;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    background: #F3F7FA;\r\n    border-left: 1px solid lightgray;\r\n}\r\n\r\n.nav-tabs .nav-link {\r\n\t/*border: 1px solid transparent;*/\r\n\t/*border-top-right-radius: .25rem;*/\r\n\t/*border-top-left-radius: .25rem*/\r\n}\r\n\r\n.nav-tabs .nav-link:focus,\r\n.nav-tabs .nav-link:hover {\r\n\t/*border-color: #eceeef #eceeef #ddd*/\r\n}\r\n\r\n.nav-tabs .nav-link.disabled {\r\n\tcolor: #636c72;\r\n\tbackground-color: transparent;\r\n\tborder-color: transparent\r\n}\r\n\r\n.nav-tabs .nav-item.show .nav-link,\r\n.nav-tabs .nav-link.active {\r\n\tcolor: #02A97A;\r\n\tbackground-color: rgba(2, 169, 122, 0.1);\r\n\tborder-bottom: 4px solid #02A97A;\r\n}\r\n\r\n.nav-tabs .dropdown-menu {\r\n\tmargin-top: -1px;\r\n\tborder-top-right-radius: 0;\r\n\tborder-top-left-radius: 0\r\n}\r\n\r\na.nav-link {\r\n    color: #394B59;\r\n\ttext-decoration: none;\r\n}\r\n\r\n\r\nul.nav.nav-tabs li:first-child.nav-item a.nav-link:before {\r\n    content: url(./img/del_ic.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\nul.nav.nav-tabs li:first-child.nav-item a.nav-link.active:before {\r\n    content: url(./img/del_ic_act.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\nul.nav.nav-tabs li:last-child.nav-item a.nav-link:before {\r\n    content: url(./img/otch_ic.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\nul.nav.nav-tabs li:last-child.nav-item a.nav-link.active:before {\r\n    content: url(./img/otch_ic_act.svg);\r\n    width: 12px;\r\n    height: 10.5px;\r\n    display: inline-block;\r\n    z-index: 100;\r\n    margin-right: 5px;\r\n}\r\n\r\n</style>\r\n"],"names":["const","serverBase","Config.fields","let","fields","serverProxy","colsToHash","geoMag","Config.fieldsConf","EditorLib.saveLayer","Geomag","cof","EditorLib.createLayer","Requests.getState","Requests.saveState","latlng","str","Requests.geoMag","arr","it","nm","geo","EditorLib.editObject","this","Requests.modifyVectorObjects","Requests.getAngleDist","Requests.loadQuadrantValues","bearing","Requests.loadFeatures","Requests.sendExcel","Requests.sendVectorFile","Requests.getLayersIds","EditorLib.editLayer","Requests.sendReport","Requests.selectFeaturesWithDrawing","Requests.chkLayer","Requests.getReportsCount","i","len"],"mappings":"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AE;KACpE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAChE,CAAC,CAAC,KAAK,EAAE,CAAC;IACX,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KACrE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAChE,CAAC,CAAC,KAAK,EAAE,CAAC;IACX,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KACpE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAChE,CAAC,CAAC,KAAK,EAAE,CAAC;IACX,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAC7D,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAChE,CAAC,CAAC,KAAK,EAAE,EAAE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E,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,KAAK;IACxB,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KACpE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAChE,CAAC,CAAC,KAAK,EAAE,CAAC;IACX,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KACrE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAChE,CAAC,CAAC,KAAK,EAAE,CAAC;IACX,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KACpE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE;KAChE,CAAC,CAAC,KAAK,EAAE,CAAC;IACX,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,C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"}